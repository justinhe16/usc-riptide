/*! uxcore v1.4.1 (36aa732) | built 2018-04-18, 10:30 AM MDT by bcbailey | copyright 2018 GoDaddy.com LLC */
!function(a,b){return ux.swfobject=function(){function a(){if(!S){try{var a=L.getElementsByTagName("body")[0].appendChild(r("span"));a.parentNode.removeChild(a)}catch(b){return}S=!0;for(var c=O.length,d=0;c>d;d++)O[d]()}}function c(a){S?a():O[O.length]=a}function d(a){if(typeof K.addEventListener!=D)K.addEventListener("load",a,!1);else if(typeof L.addEventListener!=D)L.addEventListener("load",a,!1);else if(typeof K.attachEvent!=D)s(K,"onload",a);else if("function"==typeof K.onload){var b=K.onload;K.onload=function(){b(),a()}}else K.onload=a}function e(){N?f():g()}function f(){var a=L.getElementsByTagName("body")[0],b=r(E);b.setAttribute("style","visibility: hidden;"),b.setAttribute("type",H);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=D){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),V.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,g()}()}else g()}function g(){var a=P.length;if(a>0)for(var b=0;a>b;b++){var c=P[b].id,d=P[b].callbackFn,e={success:!1,id:c};if(V.pv[0]>0){var f=q(c);if(f)if(!t(P[b].swfVersion)||V.wk&&V.wk<312)if(P[b].expressInstall&&i()){var g={};g.data=P[b].expressInstall,g.width=f.getAttribute("width")||"0",g.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(g.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(g.align=f.getAttribute("align"));for(var l={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));j(g,l,c,d)}else k(f),d&&d(e);else v(c,!0),d&&(e.success=!0,e.ref=h(c),d(e))}else if(v(c,!0),d){var p=h(c);p&&typeof p.SetVariable!=D&&(e.success=!0,e.ref=p),d(e)}}}function h(a){var b=null,c=q(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=D)b=c;else{var d=c.getElementsByTagName(E)[0];d&&(b=d)}return b}function i(){return!T&&t("6.0.65")&&(V.win||V.mac)&&!(V.wk&&V.wk<312)}function j(a,b,c,d){T=!0,z=d||null,A={success:!1,id:c};var e=q(c);if(e){"OBJECT"==e.nodeName?(x=l(e),y=null):(x=e,y=c),a.id=I,(typeof a.width==D||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==D||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),L.title=L.title.slice(0,47)+" - Flash Player Installation";var f=V.ie&&V.win?"ActiveX":"PlugIn",g="MMredirectURL="+K.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+L.title;if(typeof b.flashvars!=D?b.flashvars+="&"+g:b.flashvars=g,V.ie&&V.win&&4!=e.readyState){var h=r("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}m(a,b,c)}}function k(a){if(V.ie&&V.win&&4!=a.readyState){var b=r("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(l(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(l(a),a)}function l(a){var b=r("div");if(V.win&&V.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(E)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function m(a,b,c){var d,e=q(c);if(V.wk&&V.wk<312)return d;if(e)if(typeof a.id==D&&(a.id=c),V.ie&&V.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",Q[Q.length]=a.id,d=q(a.id)}else{var j=r(E);j.setAttribute("type",H);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&n(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function n(a,b,c){var d=r("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function o(a){var b=q(a);b&&"OBJECT"==b.nodeName&&(V.ie&&V.win?(b.style.display="none",function(){4==b.readyState?p(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function p(a){var b=q(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function q(a){var b=null;try{b=L.getElementById(a)}catch(c){}return b}function r(a){return L.createElement(a)}function s(a,b,c){a.attachEvent(b,c),R[R.length]=[a,b,c]}function t(a){var b=V.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function u(a,b,c,d){if(!V.ie||!V.mac){var e=L.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(B=null,C=null),!B||C!=f){var g=r("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),B=e.appendChild(g),V.ie&&V.win&&typeof L.styleSheets!=D&&L.styleSheets.length>0&&(B=L.styleSheets[L.styleSheets.length-1]),C=f}V.ie&&V.win?B&&typeof B.addRule==E&&B.addRule(a,b):B&&typeof L.createTextNode!=D&&B.appendChild(L.createTextNode(a+" {"+b+"}"))}}}function v(a,b){if(U){var c=b?"visible":"hidden";S&&q(a)?q(a).style.visibility=c:u("#"+a,"visibility:"+c)}}function w(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=D?encodeURIComponent(a):a}var x,y,z,A,B,C,D="undefined",E="object",F="Shockwave Flash",G="ShockwaveFlash.ShockwaveFlash",H="application/x-shockwave-flash",I="SWFObjectExprInst",J="onreadystatechange",K=window,L=document,M=navigator,N=!1,O=[e],P=[],Q=[],R=[],S=!1,T=!1,U=!0,V=function(){var a=typeof L.getElementById!=D&&typeof L.getElementsByTagName!=D&&typeof L.createElement!=D,b=M.userAgent.toLowerCase(),c=M.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof M.plugins!=D&&typeof M.plugins[F]==E)i=M.plugins[F].description,!i||typeof M.mimeTypes!=D&&M.mimeTypes[H]&&!M.mimeTypes[H].enabledPlugin||(N=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof K.ActiveXObject!=D)try{var j=new ActiveXObject(G);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();(function(){V.w3&&((typeof L.readyState!=D&&"complete"==L.readyState||typeof L.readyState==D&&(L.getElementsByTagName("body")[0]||L.body))&&a(),S||(typeof L.addEventListener!=D&&L.addEventListener("DOMContentLoaded",a,!1),V.ie&&V.win&&(L.attachEvent(J,function(){"complete"==L.readyState&&(L.detachEvent(J,arguments.callee),a())}),K==top&&!function(){if(!S){try{L.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}()),V.wk&&!function(){return S?void 0:/loaded|complete/.test(L.readyState)?void a():void setTimeout(arguments.callee,0)}(),d(a)))})(),function(){V.ie&&V.win&&window.attachEvent("onunload",function(){for(var a=R.length,b=0;a>b;b++)R[b][0].detachEvent(R[b][1],R[b][2]);for(var c=Q.length,d=0;c>d;d++)o(Q[d]);for(var e in V)V[e]=null;V=null;for(var f in ux.swfobject)ux.swfobject[f]=null;ux.swfobject=null})}();return{registerObject:function(a,b,c,d){if(V.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,P[P.length]=e,v(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return V.w3?h(a):void 0},embedSWF:function(a,b,d,e,f,g,h,k,l,n){var o={success:!1,id:b};V.w3&&!(V.wk&&V.wk<312)&&a&&b&&d&&e&&f?(v(b,!1),c(function(){d+="",e+="";var c={};if(l&&typeof l===E)for(var p in l)c[p]=l[p];c.data=a,c.width=d,c.height=e;var q={};if(k&&typeof k===E)for(var r in k)q[r]=k[r];if(h&&typeof h===E)for(var s in h)typeof q.flashvars!=D?q.flashvars+="&"+s+"="+h[s]:q.flashvars=s+"="+h[s];if(t(f)){var u=m(c,q,b);c.id==b&&v(b,!0),o.success=!0,o.ref=u}else{if(g&&i())return c.data=g,void j(c,q,b,n);v(b,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){U=!1},ua:V,getFlashPlayerVersion:function(){return{major:V.pv[0],minor:V.pv[1],release:V.pv[2]}},hasFlashPlayerVersion:t,createSWF:function(a,c,d){return V.w3?m(a,c,d):b},showExpressInstall:function(a,b,c,d){V.w3&&i()&&j(a,b,c,d)},removeSWF:function(a){V.w3&&o(a)},createCSS:function(a,b,c,d){V.w3&&u(a,b,c,d)},addDomLoadEvent:c,addLoadEvent:d,getQueryParamValue:function(a){var b=L.location.search||L.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return w(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return w(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(T){var a=q(I);a&&x&&(a.parentNode.replaceChild(x,a),y&&(v(y,!0),V.ie&&V.win&&(x.style.display="block")),z&&z(A)),T=!1}}}}(),ux.swfobject}(jQuery),function(a,b){var c={options:{singleOpen:!0,alwaysOpen:!0},_create:function(){this._initContent()},_initContent:function(){var b=this,c=(b.options,b.element),d=c.children(".sf-accordion-content");c.addClass(this.baseClass),0!==d.length&&d.each(function(d){var e=a(this),f=b.id+"-"+d,g=e.hasClass("sf-accordion-active");e.addClass(b.baseClass+"-content").attr("data-blockid",f),e.children().wrapAll(a("<div />").addClass(b.baseClass+"-inner"));var h=a("<div/>").addClass(b.baseClass+"-hdr").insertBefore(e);e.hasClass("sf-accordion-active")?h.addClass("sf-accordion-selected"):e.hide();var i=a("<div />").appendTo(h).addClass(b.baseClass+"-section").append(a("<div/>").addClass(b.baseClass+"-toggle")).append(a("<div/>").addClass(b.baseClass+"-icn").addClass(e.attr("data-icn"))).append(a("<div/>").addClass(b.baseClass+"-product").append(a("<div/>").addClass(b.baseClass+"-title").html(e.attr("data-title"))).append(a("<div/>").addClass(b.baseClass+"-summary").html(e.attr("data-summary"))));e.attr("data-header-right")&&a("<div/>").appendTo(h).addClass(b.baseClass+"-section "+b.baseClass+"-right").html(e.attr("data-header-right")),h.bind("click."+f,function(c){a(this).find("."+b.baseClass+"-toggle").trigger("click")});var j=i.children("."+b.baseClass+"-toggle");j.bind("click."+f,function(c){var d=a(this);return b._toggle(d),c.stopPropagation(),c.preventDefault(),!1}).addClass("uxicon-"+(g?"minus":"plus")).attr("data-blockid",f).attr("data-shown",g),c.show()})},_toggle:function(b){var c=this,d="true"===b.attr("data-shown"),e=c.element.children("."+c.baseClass+"-hdr."+c.baseClass+"-selected");c.options.singleOpen&&!d&&e.length>0&&e.each(function(){c._openBlock(a(this).find("."+c.baseClass+"-toggle"),!1)}),c.options.alwaysOpen&&d&&1===e.length||c._openBlock(b)},_openBlock:function(a,b){var c=this,d=a.parents("."+c.baseClass+"-hdr");b="boolean"!=typeof b?"true"!==a.attr("data-shown"):b;var e=c.element.children("."+c.baseClass+'-content[data-blockid="'+a.attr("data-blockid")+'"]');e["slide"+(b?"Down":"Up")]("500"),a.toggleClass("uxicon-plus uxicon-minus").attr("data-shown",b),d.toggleClass(c.baseClass+"-selected"),e.toggleClass(c.baseClass+"-active")},openBlock:function(a){var b=this.element.find("."+this.baseClass+'-toggle[data-blockid="'+this.id+"-"+a+'"]');b.length>0&&"true"!==b.attr("data-shown")&&this._toggle(b)},closeBlock:function(a){var b=this.element.find("."+this.baseClass+'-toggle[data-blockid="'+this.id+"-"+a+'"]');b.length>0&&"true"===b.attr("data-shown")&&this._toggle(b)},destroy:function(a){this.element.removeClass(this.baseClass);this.id;this.element.children("."+this.baseClass+"-toggle").unbind("click."+this.id),this.element.children("."+this.baseClass+"-hdr").remove(),this.element.children("."+this.baseClass+"-content").removeClass(this.baseClass+"-active").removeAttr("data-blockid"),this._execSuper("destroy",a)}};ux.util.module("Accordion",c),ux.util.selector("sf-accordion",{root:{selector:".sf-accordion",tests:{id:function(a,b){return a.attr("id")===b}}}})}(jQuery),function(a,b){var c={options:{matches:b,listMaxHeight:b,listHeight:b,autoOpen:!1,showNonMatches:!1,matchAnywhere:!1,onOpen:b,onClose:b,onValueChanged:b,context:window,displayContext:window},_lastMatches:[],_create:function(){var b=this;b.data=b.options.matches,b.element.addClass(b.baseClass),b.context=ux.util.context(b.options.context,b.options.displayContext),b._build(),b.element.on("keyup",function(c){var d=b._keys(c.which);if(!(d.enter||d.up||d.down)){d.ctrl||d.alt||d.shft||b._clearInPlay();var e=a(this).val(),f=b.updateList(e);a.isFunction(b.options.onValueChanged)&&b.options.onValueChanged(b.element,e,f)}}).on("focus",function(){try{b.updateList()}catch(a){}}).on("keydown",function(a){return b._keydown(a)}),b._log(b.options.autoOpen),b.options.autoOpen===!0&&(this.updateList(),this._positionList()),b.element.parents().add(window).on("scroll.sfac",function(){b._isInListScroll||b.close()}),a(window).on("click.sfac",function(c){b._blur(a(c.target))})},_keys:function(a){return{tab:9===a,enter:13===a,up:38===a,down:40===a,shft:16===a,ctrl:17===a,alt:18===a}},_keydown:function(b){var c=this,d=c._keys(b.which);if(d.tab&&c.isOpen())return void c.close();if((d.up||d.down)&&!c.isOpen())return void c.open();if(c.isOpen()&&(d.enter||d.up||d.down)){var e=c.options.showNonMatches===!0?"":".match",f=c.list.find(".sf-autocomplete-matchitem"+e);f&&0!==f.length||(f=c.list.find("li"));var g=f.filter(".sf-autocomplete-inplay");if(g&&g.length>0){var h=f.index(g.eq(0));if(b.preventDefault(),d.enter)c.updateValue(g.attr("data-text"));else if(d.up){var i=h>0?f.eq(h-1):a();i.length>0&&c._putItemInPlay(i)}else if(d.down){var j=h<f.length-1?f.eq(h+1):a();j.length>0&&c._putItemInPlay(j)}}else f&&f.length>0&&!d.enter&&c._putItemInPlay(a(f[0]));return d.enter&&c.close(),!1}},_flattenData:function(){var a=this;a.matches=[];var b=function(c,d){for(var e=0;e<d.length;e++)if("string"==typeof d[e]){var f={item:d[e],key:"li-"+c+"-"+Math.round(65535*Math.random())};a.matches.push(f),d[e]=f}else b(c+1,d[e].data)};b(0,a.data)},_build:function(){this._flattenData(),this._createList(),this._createDropDown()},_createList:function(){var b=this;b.list=a("<div />").addClass("sf-autocomplete-list dropdown").css("position","relative");var c=function(b,d){for(var e=0;e<d.length;e++){var f=a("<li />").appendTo(b);d[e].hasOwnProperty("item")?f.append(a("<a />").append(a("<span />").text(d[e].item).addClass("sf-autocomplete-txt")).addClass("sf-autocomplete-item")).attr("data-text",d[e].item).attr("id",d[e].key).addClass("sf-autocomplete-matchitem"):(f.append(a("<div />").text(d[e].category).addClass("sf-autocomplete-cat dropdown-header")).addClass("sf-autocomplete-listcategory"),c(a("<ul />").appendTo(f).addClass("dropdown-menu"),d[e].data))}};if(b.data&&a.isArray(b.data)){var d=a("<ul />").appendTo(b.list).addClass("dropdown-menu");c(d,b.data),b._attachItemClickHandler(d.find("li.sf-autocomplete-matchitem"))}},_createDropDown:function(){var b=this,c=b.element.outerWidth(),d={display:"none",position:"absolute","overflow-x":"hidden",width:c+"px"};"number"==typeof b.options.listHeight?(d.height=b.options.listHeight+"px",d["overflow-y"]="auto"):"number"==typeof b.options.listMaxHeight?(d["max-height"]=b.options.listMaxHeight+"px",d["overflow-y"]="auto"):d["overflow-y"]="hidden",b.layer=ux.util.zIndex.getLayer("flyout",a(b.context.ext.body()),b.context.isSingle()?b.element:b.context.ext.iframe()),b.drop=a('<div class="sf-autocomplete-drop"></div>').appendTo(b.layer).append(b.list).attr("id",b._generateId("sf-autocomplete-drop")).css(d).on("mouseenter",function(){b._isInListScroll=!0}).on("mouseleave",function(){b._isInListScroll=!1}),b.options.showNonMatches!==!0&&b.drop.addClass("sf-autocomplete-hidennonmatches"),b.list.show()},_attachItemClickHandler:function(b){var c=this;b.click(function(){var b=a(this).attr("data-text");return c.updateValue(b),c.close(),!1})},_positionList:function(){function b(b){var f=a(window).scrollTop(),h={top:f,bottom:f+a(window).height()},i={top:b,bottom:b+c.drop.outerHeight()},j="bottom"==d?-1:1;return i[d]*j<h[d]*j?g[e]:b}var c=this,d="bottom",e="top",f=c.element.offset(),g={top:f.top-c.drop.outerHeight()+1,bottom:f.top+c.element.outerHeight()-1},h={left:f.left+"px",top:b(g[d])+"px"},i=ux.util.zIndex.maxForLayer(c.layer);i>0&&(h.zIndex=i+3),c.drop.css(h)},_blur:function(a){if(this.isOpen()){var b=ux.util.jCompat.isEl(a,this.drop);b||(b=ux.util.jCompat.isEl(a,this.element)),b||(b=ux.util.jCompat.findEl(this.drop,a).length>0),b||this.close()}},_clearInPlay:function(){this.list.find(".sf-autocomplete-inplay").removeClass("sf-autocomplete-inplay")},_putItemInPlay:function(a){if(a&&a.length>0){this.list.find(".sf-autocomplete-inplay").removeClass("sf-autocomplete-inplay"),a.addClass("sf-autocomplete-inplay");var b=a.position().top+a.height();b>this.drop.height()?this.drop.scrollTop(b-this.drop.height()):this.drop.scrollTop(0)}},_showMatches:function(b){var c=[];if(this.list.removeClass("sf-autocomplete-matching").find("li.match").removeClass("match sf-autocomplete-inplay").filter(".sf-autocomplete-matchitem").each(function(){var b=a(this),c='<a class="sf-autocomplete-item"><span class="sf-autocomplete-txt">'+b.attr("data-text")+"</span></a>";b.html(c)}),b.length>0){b=b.toLowerCase().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var d=new RegExp((this.options.matchAnywhere===!0?"":"^")+"("+b+")","i");if(c=a.grep(this.matches,function(a){return a.item.match(d)}),c.length>0){this.list.addClass("sf-autocomplete-matching");for(var e=0;e<c.length;e++){var f=c[e].item.replace(d,"<strong>$1</strong>"),g='<a class="sf-autocomplete-item"><span class="sf-autocomplete-txt">'+f+"</span></a>",h=a("#"+c[e].key);h&&h.length>0&&(0===e&&this._putItemInPlay(h),h.addClass("match").html(g).parents(".sf-autocomplete-listcategory").addClass("match"))}}}else this.list.find("li").addClass("match");return this.options.showNonMatches!==!0&&this._positionList(),this._lastMatches=c,c},_rebuild:function(){this._removeList(),this._build()},_removeList:function(){this.list.removeClass(this.baseClass+"-list").hide().insertBefore(this.element).children().off(),this.drop.remove()},destroy:function(b){this.isOpen()&&this.close(),this._removeList(),this.element.removeClass(this.baseClass).parents().off("scroll.sfac"),this.drop.off("mouseenter mouseleave"),a(window).off("scroll.sfac").off("click.sfac"),this._execSuper("destroy",b)},updateList:function(b,c){return a.isPlainObject(b)&&(c=b.suppressOpen,b=b.value),c||this.open(),"undefined"==typeof b&&(b=this.element.val()),this._showMatches(b)},updateValue:function(b){a.isPlainObject(b)&&(b=b.value),this.element.val(b);var c=this.updateList(b,!this.isOpen());return a.isFunction(this.options.onValueChanged)&&this.options.onValueChanged(this.element,b,c),c},reload:function(b){a.isPlainObject(b)?b.hasOwnProperty("matches")?this.data=b.matches:this.data=[]:a.isArray(b)?this.data=b:this.data=[],this._rebuild()},open:function(){var b=this;b.isOpen()||(b._positionList(),b.drop.show(),b.closeAllButMe(),a(window).off("resize.sfac"+b.id.replace(/-_/g,""),function(){b.isOpen()&&b._positionList()}),a.isFunction(b.options.onOpen)&&b.options.onOpen(b.element))},close:function(){var b=this;if(b.isOpen()){var c=!0;a.isFunction(b.options.onClose)&&(c=b.options.onClose(b.element)),c&&(b.drop.hide(),a(window).off("resize.sfac"+b.id.replace(/-_/g,"")))}return!1},closeAllButMe:function(){a.each(this._siblings(),function(a,b){b.isOpen()&&b.close()})},clear:function(){this.val("")},toggle:function(){this.isOpen()?this.close():this.open()},isOpen:function(){return this.drop.is(":visible")},val:function(a){return"undefined"!=typeof a&&this.updateValue(a),this.element.val()}};ux.util.module("AutoComplete",c),ux.util.selector("sf-autocomplete",{root:{selector:".sf-autocomplete",states:{open:function(a){return a.sfAutoComplete("isOpen")},closed:function(a){return!a.sfAutoComplete("isOpen")}},tests:{id:function(a,b){return a.attr("id")===b}}}})}(jQuery),function(a,b,c){var d=b["sf.colorpicker"];a.fn.sfColorPicker=function(b,d){function e(b,d,e){var f=this;return f.settings=d,f.id=e,f.element=b,f.colorId=d.colorId?d.colorId:e,f.initColor=f.color=f.lastColor=d.initColor.toLowerCase(),f.baseClass="sf-colorpicker",f.element.addClass(f.baseClass),f.picker={},f.colorPersisted=!1,f.colorHasChanged=!1,f.triggeredClose=!1,f.customAnchor=c,f.palette=a.extend(!0,{},d.palette),f.isThemeColor=a.isPlainObject(d.palette)&&!a.isEmptyObject(d.palette),f.fields=d.fields,f.layer=ux.util.zIndex.getLayer("flyout",a("body",f.settings.displayContext.document),f.element),f.create(),f}var f=(settings={},"init"),g=["open","close","isOpen","changeColor","changePalette","reposition","setZIndex","destroy","toggle","getPickerElement"],h=["color","lastColor","initColor","colorId","colorType","fields","palette"],i={colorId:c,customAnchor:c,initColor:"#ccc",xDefaultPosition:"top",xIdealPosition:"right",zIndex:c,liveUpdates:!1,palette:{},canBeSetToNone:!1,autoOpen:!1,fields:c,triggers:c,context:self,displayContext:self,onChange:c,onPaletteChange:c,onCancel:c,onPersist:c,onOpen:c,onClose:c};b.constructor==String&&(f=b,b=d);var j={isIE:function(a){return a&&a.constructor==Number?ux.util.ua.ie&&ux.util.ua.major<=a:ux.util.ua.ie},destroy:function(b){this.close(b),this.picker.element.jPicker("destroy"),this.picker.element.sfFlyout("destroynow"),this.picker.element.remove(),this.picker.wrapper.remove(),this.element.removeClass("sf-colorpicker-anchor sf-colorpicker-swatchcolor "+this.baseClass),this.element.children(".sf-colorpicker-swatch").remove(),this.settings.triggers&&this.settings.triggers.length>0&&this.settings.triggers.unbind("click.sfcp").removeClass("sf-colorpicker-trigger"),delete a.fn.sfColorPicker.instances[this.id]},create:function(){this.createAnchor(),this.loadJPicker(),this.initFlyout()},createAnchor:function(){var a=this;a.settings.customAnchor?(a.settings.customAnchor===!0&&(a.settings.customAnchor={}),a.customAnchor=a.settings.customAnchor,a.customAnchor.targets=a.element):(a.element.addClass("sf-colorpicker-swatchcolor").width(26).height(26).append('<div class="sf-colorpicker-swatch" />'),a.colorSwatch=a.element.find(".sf-colorpicker-swatch").width(26).height(26)),a.element.addClass("sf-colorpicker-anchor"),a.settings.triggers&&a.settings.triggers.length>0&&a.settings.triggers.bind("click.sfcp",function(b){return a.open(),!1}).addClass("sf-colorpicker-trigger"),a.updateControls(a.initColor)},loadJPicker:function(){var b=this;b.picker.wrapper=a("<div />").appendTo(b.layer).addClass(b.baseClass+"-wrapper").hide().append('<div style="float: left;" />').append('<div class="'+b.baseClass+'-control" />');var c=b.picker.element=b.picker.wrapper.find("."+b.baseClass+"-control"),d=k.getPaletteForPicker(b.palette);c.jPicker({window:{alphaSupport:!1,canBeSetToTransparent:b.settings.canBeSetToNone,colorModes:!1,body:a("body",b.settings.displayContext.document),document:a(b.settings.displayContext.document),layer:b.layer},color:{active:k.getjPickerColor(b.initColor),paletteList:d},images:{clientPath:k.getImagePath()},classes:{buttons:{ok:{enabled:"btn btn-primary btn-sm",disabled:"btn btn-primary btn-sm disabled"},cancel:{enabled:"sf-dialog-link",disabled:"sf-dialog-link"}}}},function(a){b.colorChanged(a,"commit"),b.close()},function(a){a=k.getHexColor(a);var c=!b.settings.canBeSetToNone&&"none"!=a||b.settings.canBeSetToNone;b.colorHasChanged=a!=b.color,b.colorHasChanged&&(b.colorHasChanged=a!=b.lastColor),b.colorHasChanged=b.colorHasChanged&&c,b.getjPickerInstance().enableOkButton(b.colorHasChanged&&c),c&&b.settings.liveUpdates&&b.colorChanged(a,"live"),c&&b.isThemeColor&&b.colorChanged(a,"theme")},function(a){b.colorChanged(a,"cancel"),b.close()},function(a){}),c.bind("showingBasic",function(){var a=b.getFlyout();a&&a.length>0&&a.addClass("sf-flyout-client-colorpicker-basic").removeClass("sf-flyout-client-colorpicker-advanced"),b.reposition()}),c.bind("showingAdvanced",function(){var a=b.getFlyout();a&&a.length>0&&a.addClass("sf-flyout-client-colorpicker-advanced").removeClass("sf-flyout-client-colorpicker-basic"),b.reposition()}),a("<button />").attr("type","button").addClass("close").html("").appendTo(c).bind("click",function(){b.getjPickerInstance().cancelChoice()})},initFlyout:function(){var b=this,c=b.picker.element,d={anchor:b.element,autoOpen:!1,destroyOnClose:!1,dialogWidthIdeal:-1,yDefaultPosition:b.settings.yDefaultPosition,xIdealPosition:b.settings.xIdealPosition,boxShadowAdjustment:b.settings.boxShadowAdjustment,zIndex:b.settings.zIndex,client:"sf-colorpicker",context:b.settings.context,displayContext:b.settings.displayContext,singleClientInstance:!0,mode:"tip",flavor:"inverse",centerAgainstAnchor:!0,onOpen:function(){b.getjPickerInstance().enableOkButton(b.color!=b.lastColor),a.isFunction(b.settings.onOpen)&&b.settings.onOpen(b.element,b.color),b.colorPersisted=!1,b.colorHasChanged=!1},onClose:function(){var c=b.triggeredClose;return b.triggeredClose=!1,b.colorHasChanged&&!b.colorPersisted?((!b.settings.liveUpdates||c)&&b.getjPickerInstance()[b.saveChoice===!0?"saveChoice":"cancelChoice"](),!1):a.isFunction(b.settings.onClose)?b.settings.onClose(b.element,b.color):!0}};b.settings.triggers&&(d.extendedElements=b.settings.triggers),c.sfFlyout(d),c.show(),c.parents(".sf-flyout").addClass("sf-flyout-client-colorpicker-basic")},open:function(a){var b=this;if(b.colorPersisted=!1,a=a?a:b.lastColor,b.getjPickerInstance().enableOkButton(a!=b.lastColor),a!==b.lastColor&&b.changeColor(a,"live"),!b.isOpen()){b.lastColor=a;var c=b.picker.element;"none"!=b.lastColor&&c.find(".picker.last").css("background-color",b.lastColor),c.is(":sf-flyout")&&c.sfFlyout("open")}},close:function(a){var b=this.picker.element;this.triggeredClose=!0,this.saveChoice=a===!0,b.is(":sf-flyout")&&b.sfFlyout("close")},toggle:function(a){this.isOpen()?this.close():this.open(a)},getFlyout:function(){var a=this,b=null;return a.picker.element.is(":sf-flyout")&&(b=a.picker.element.parents(".sf-flyout")),b},reposition:function(){var a=this;a.picker.element.is(":sf-flyout")&&a.picker.element.sfFlyout("resize")},colorChanged:function(b,c,d){var e=this,f=(e.settings,e.updateControls(b));e.color=f,"cancel"==c||d||(a(":sf-colorPicker(for="+e.colorId+")").not(this.element).sfColorPicker("changeColor",[f,c]),a.isFunction(e.settings.onChange)&&e.settings.onChange(f,c,e.getProperties(),e.element)),"palette, commit, cancel".indexOf(c)<0&&e.updatePalette(f,c),"commit"!==c||e.color==e.lastColor||d||(a.isFunction(e.settings.onPersist)&&e.settings.onPersist(f,e.getProperties(),e.element),e.colorPersisted=!0,e.lastColor=f),"cancel"!==c||d||(a.isFunction(e.settings.onCancel)&&e.settings.onCancel(f,e.getProperties(),e.element),e.colorPersisted=!0,e.lastColor=f)},updateControls:function(b){var c=this,d=c.settings,e=k.getHexColor(b),f={backgroundColor:"none"==e?"transparent":e,color:"none"==e?"#000":k.getContrastBW(e)},g={color:e,backgroundColor:k.getContrastBW(e)};return d.fields&&d.fields.length>0&&a.each(d.fields,function(a,b){c.updateField(b,e,{background:f,font:g})}),d.customAnchor?c.updateField(c.customAnchor,e,{background:f,font:g}):c.updateField({targets:c.element,cssProperty:"backgroundColor"},e,{background:f,font:g}),e},updateField:function(b,c,d){if(b.cssProperty){var e=this,f=b.targets,g={};switch(b.cssProperty){case"color":g=a.extend({},d.font),b.useContrast||delete g.backgroundColor;break;case"background-color":case"backgroundColor":g=a.extend({},d.background),b.useContrast||delete g.color,b.realTransparency||(g["background-image"]="none"==c?"url("+e.settings.transparentImageUrl+")":"none");break;default:g[b.cssProperty]=c}f.css(g),f.is("input")&&f.val(c)}},updatePalette:function(b,c){this.palette[this.colorId]&&this.palette[this.colorId]!==b&&(this.palette[this.colorId].color=b,this.getjPickerInstance().refreshPalette(k.getPaletteForPicker(this.palette)),a.isFunction(this.settings.onPaletteChange)&&this.settings.onPaletteChange({palette:this.palette,colorId:this.colorId,id:this.id}),a(":sf-colorPicker(palette-siblings="+this.colorId+")").sfColorPicker("changePalette",this.palette))},getProperties:function(){var a=this;return{colorType:a.settings.colorType,colorId:a.colorId,lastColor:a.lastColor,palette:a.palette}},isOpen:function(){var a=this.picker.element,b=!1;return a.is(":sf-flyout")&&(b=a.sfFlyout("isOpen")),b},setZIndex:function(a){var b=this.picker.element,c=!1;return b.is(":sf-flyout")&&(c=b.sfFlyout("setZIndex",a)),c},changePalette:function(b){var c=!1;if(b.hasOwnProperty(this.colorId)){var d=[],e=a.extend({},this.palette,b);for(var f in e)e.hasOwnProperty(f)&&(d.push(f),"undefined"!=typeof this.palette[f]&&"undefined"==typeof b[f]?(delete this.palette[f],c=!0):("undefined"==typeof this.palette[f]&&"undefined"!=typeof b[f]||this.palette[f].color!=b[f].color||this.palette[f].caption!=b[f].caption)&&(this.palette[f]=a.extend({},b[f]),c=!0))}if(c){if(this.palette[this.colorId]){var g=k.getjPickerColor(b[this.colorId].color).val("hex");this.changeColor(g,"palette")}this.getjPickerInstance().refreshPalette(k.getPaletteForPicker(this.palette)),a(":sf-colorPicker(for="+d.join(",")+")").not(this.element).sfColorPicker("changePalette",this.palette)}return this},changeColor:function(a,b){a.color&&a.action&&(b=a.action,a=k.getHexColor(a.color));var c="open"===b;b="open"===b?"live":b;var d=this;if(d.color!=a){d.colorChanged(a,b,!0),c&&(d.lastColor=a);var e=d.getjPickerInstance(),f="none"===a?d.settings.canBeSetToNone===!0?null:"#ffffff":a;e.color.active.val("hex",f),(!this.isOpen()||c)&&e.color.current.val("hex",f)}return this},getjPickerInstance:function(){return a.jPicker.List[this.picker.element.data("jPickerIndex")]},getPickerElement:function(){return this.picker.element}};a.extend(e.prototype,j);var k={initInstance:function(b){var c=a(b),d=c.attr("id");(null==d||0==d.length)&&(d="sfColorPicker"+Math.round(65535*Math.random()),c.attr("id",d));var e=a.fn.sfColorPicker.instances[d]={};return e.me=c,e.meId=d,d},initPlugin:function(c,d,f){if(c){var g=c.picker;g.destroy()}settings=a.extend(!0,{},i,b),a.extend(!0,settings,{boxShadowAdjustment:0,transparentImageUrl:k.getImagePath()+"bg_transparent_checker.png"}),d=k.initInstance(f);var g=a.fn.sfColorPicker.instances[d].picker=new e(a(f),settings,d);settings.autoOpen&&g.open(g.lastColor)},getImagePath:function(){if(k.imagePath)c=k.imagePath;else{var b=a('<div class="sf-colorpicker-swatch" />').appendTo(document.body),c=b.css("background-image");b.remove(),c=c.replace(/^url\(/,"").replace(/[\)"]/g,"").replace("sf-colorpicker-sprt.gif",""),k.imagePath=c}return c},getOrDo:function(c,d,e){if(d&&d.picker){var f=d.picker;if(a.inArray(c,g)>-1&&a.isFunction(f[c]))return a.isArray(b)||(b=[b]),l=f[c].apply(f,b),!1;if(a.inArray(c,h)>-1&&f[c])return l=f[c],!1;k.log("invalid command/property: "+c)}else k.log("couldn't find instance for "+e)},rgbToHex:function(b){function c(a){return isNaN(a)?"00":d[(a-a%16)/16]+d[a%16]}var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return b=b.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),a.isPopulated(b)?"#"+c(b[1])+c(b[2])+c(b[3]):""},hexToRGB:function(a){function b(a){return a="#"==a.charAt(0)?a.substring(1,7):a,3==a.length||6==a.length?3==a.length&&(a=a.substr(0,1)+a.substr(0,1)+a.substr(1,1)+a.substr(1,1)+a.substr(2,1)+a.substr(2,1)):a=(a+"ffffff").substring(0,6),a}function c(a){return parseInt(a.substring(0,2),16)}function d(a){return parseInt(a.substring(2,4),16)}function e(a){return parseInt(a.substring(4,6),16)}var f=b(a);return{R:c(f),G:d(f),B:e(f)}},rgbToHSV:function(a,b,c){a/=255,b/=255,c/=255;var d,e,f=Math.max(a,b,c),g=Math.min(a,b,c),h=f,i=f-g;if(e=0==f?0:i/f,f==g)d=0;else{switch(f){case a:d=(b-c)/i+(c>b?6:0);
break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{H:d,S:e,V:h}},getContrastBW:function(a){var b=k.hexToRGB(a),c=k.rgbToHSV(b.R,b.G,b.B);return c.V<.5?"#fff":"#000"},getBestContrast:function(a){var b=k.hexToRGB(a),c=k.rgbToHSV(b.R,b.G,b.B),d=c.V<.3?1:c.V<.5?2:c.V<.7?3:4,e=c.S<.3?1:c.S<.5?2:c.S<.7?3:4,f=4==d&&1==e?3:d>=3&&e>=2?2:d;return f},getjPickerColor:function(b){return b&&"none"!=b?(b=k.makeFullHex(b),new a.jPicker.Color({hex:b})):new a.jPicker.Color},makeFullHex:function(a){if(4===a.length&&"none"!==a){var b=a.split("");a="#"+b[1]+b[1]+b[2]+b[2]+b[3]+b[3]}return a},getHexColor:function(a){var b=a.constructor===String?k.makeFullHex(a).replace("#",""):a.val("hex");return b=b&&"none"!=b?"#"+b:"none",b.toLowerCase()},getPaletteForPicker:function(a){var b=[];for(var c in a)b[b.length]={type:a[c].caption,color:k.getjPickerColor(a[c].color)};return b},log:function(a){ux.util.logger("cp","duel").log(a)}};a.fn.sfColorPicker.instances||(a.fn.sfColorPicker.instances={});var l=this;return this.each(function(b){var c=a(this).attr("id"),d=a.fn.sfColorPicker.instances[c];"init"==f?k.initPlugin(d,c,this):k.getOrDo(f,d,c)}),l},a.extend(a.expr[":"],{"sf-colorPicker":function(b,d,e){var f=a(b),g=e[3],h=f.hasClass("sf-colorpicker-anchor");if(h&&g)switch(g){case"":h=!0;break;case"open":h=f.sfColorPicker("isOpen");break;case"closed":h=!f.sfColorPicker("isOpen");break;default:var i=g.split("=");if(i.length>1)switch(i[0]){case"for":var j=i[1].split(",");h=a.inArray(f.sfColorPicker("colorId"),j)>-1;break;case"in-palette":var k=f.sfColorPicker("palette");h=k!=c&&k[i[1]]!=c;break;case"palette-siblings":var l=i[1];if(f.sfColorPicker("colorId")!=l){var k=f.sfColorPicker("palette");h=k!=c&&k[l]!=c}}else h=!1}return h}}),function(a,b){Math.precision=function(a,b){return b===c&&(b=0),Math.round(a*Math.pow(10,b))/Math.pow(10,b)};var e=function(b,d){var e,f,g=this,h=b.find(".Arrow, .slider-handle"),i=0,j=100,k=100,l=0,m=100,n=100,o=0,p=0,q=new Array,r=function(a){for(var b=0;b<q.length;b++)q[b].call(g,g,a)},s=function(c){var h=b.offset();e={l:0|h.left,t:0|h.top},clearTimeout(f),f=setTimeout(function(){v.call(g,c)},0),a(d.document).bind("mousemove",t).bind("mouseup",u),c.preventDefault()},t=function(a){return clearTimeout(f),f=setTimeout(function(){v.call(g,a)},0),a.stopPropagation(),a.preventDefault(),!1},u=function(b){return a(d.document).unbind("mouseup",u).unbind("mousemove",t),b.stopPropagation(),b.preventDefault(),!1},v=function(a){var c=a.pageX-e.l,d=a.pageY-e.t,f=b.w,h=b.h;0>c?c=0:c>f&&(c=f),0>d?d=0:d>h&&(d=h),x.call(g,"xy",{x:c/f*k+i,y:d/h*n+l})},w=function(){var a=0,c=0,e=b.w,f=b.h,g=h.w,i=h.h;setTimeout(function(){k>0&&(a=o==j?e:o/k*e|0),n>0&&(c=p==m?f:p/n*f|0),"vbar"==d.type||"hbar"==d.type?a=g>=e?(e>>1)-(g>>1):e-g>>1:a-=g>>1,i>=f?c=(f>>1)-(i>>1):c-=i>>1,h.css({left:a+"px",top:c+"px"})},0)},x=function(a,b,d,e){var f=b!==c;if(!f)switch((a===c||null==a)&&(a="xy"),a.toLowerCase()){case"x":return o;case"y":return p;case"xy":default:return{x:o,y:p}}if(null==d||d!=g||e){var h,k,n=!1;switch(null==a&&(a="xy"),a.toLowerCase()){case"x":h=b&&(b.x&&0|b.x||0|b)||0;break;case"y":k=b&&(b.y&&0|b.y||0|b)||0;break;case"xy":default:h=b&&b.x&&0|b.x||0,k=b&&b.y&&0|b.y||0}null!=h&&(i>h?h=i:h>j&&(h=j),o!=h&&(o=h,n=!0)),null!=k&&(l>k?k=l:k>m&&(k=m),p!=k&&(p=k,n=!0)),e&&w.call(g),n&&r.call(g,d||g)}},y=function(a,b){var d=b!==c;if(!d)switch((a===c||null==a)&&(a="all"),a.toLowerCase()){case"minx":return i;case"maxx":return j;case"rangex":return{minX:i,maxX:j,rangeX:k};case"miny":return l;case"maxy":return m;case"rangey":return{minY:l,maxY:m,rangeY:n};case"all":default:return{minX:i,maxX:j,rangeX:k,minY:l,maxY:m,rangeY:n}}var e,f,g,h;switch(null==a&&(a="all"),a.toLowerCase()){case"minx":e=b&&(b.minX&&0|b.minX||0|b)||0;break;case"maxx":f=b&&(b.maxX&&0|b.maxX||0|b)||0;break;case"rangex":e=b&&b.minX&&0|b.minX||0,f=b&&b.maxX&&0|b.maxX||0;break;case"miny":g=b&&(b.minY&&0|b.minY||0|b)||0;break;case"maxy":h=b&&(b.maxY&&0|b.maxY||0|b)||0;break;case"rangey":g=b&&b.minY&&0|b.minY||0,h=b&&b.maxY&&0|b.maxY||0;break;case"all":default:e=b&&b.minX&&0|b.minX||0,f=b&&b.maxX&&0|b.maxX||0,g=b&&b.minY&&0|b.minY||0,h=b&&b.maxY&&0|b.maxY||0}null!=e&&i!=e&&(i=e,k=j-i),null!=f&&j!=f&&(j=f,k=j-i),null!=g&&l!=g&&(l=g,n=m-l),null!=h&&m!=h&&(m=h,n=m-l)},z=function(b){a.isFunction(b)&&q.push(b)},A=function(b){if(a.isFunction(b))for(var c;-1!=(c=a.inArray(b,q));)q.splice(c,1)},B=function(){a(d.document).unbind("mouseup",u).unbind("mousemove",t),b.unbind("mousedown",s),b=null,h=null,q=null};a.extend(!0,g,{val:x,range:y,bind:z,unbind:A,destroy:B,element:b}),h.src=d.arrow&&d.arrow.image,h.w=d.arrow&&d.arrow.width||h.width(),h.h=d.arrow&&d.arrow.height||h.height(),b.w=d.map&&d.map.width||b.width(),b.h=d.map&&d.map.height||b.height(),b.bind("mousedown",s),z.call(g,w)},f=function(b,c,d,e,f,g,h,i){var j=this,k=b.closest(".sf-colorpicker-main"),l=k.find("td.Text input");l=l.add(k.find("div.Hex input"));var m=l.filter(".Red"),n=l.filter(".Green"),o=l.filter(".Blue"),p=l.filter(".Alpha").length>0?l.filter(".Alpha"):null,q=l.filter(".Hue"),r=l.filter(".Saturation"),s=l.filter(".Value"),t=l.filter(".Hex"),u=l.filter(".AHex").length>0?l.filter(".AHex"):null,v=function(b){var f="";a(b.target);if(""!=b.target.value||b.target==t.get(0)||(null==d||b.target==d.get(0))&&null!=d){if(!y(b))return b;switch(b.target){case m.get(0):m.val(z.call(j,m.val(),0,255)),c.val("r",m.val(),b.target),f="rgb";break;case n.get(0):n.val(z.call(j,n.val(),0,255)),c.val("g",n.val(),b.target),f="rgb";break;case o.get(0):o.val(z.call(j,o.val(),0,255)),c.val("b",o.val(),b.target),f="rgb";break;case p&&p.get(0):p.val(z.call(j,p.val(),0,100)),c.val("a",Math.precision(255*p.val()/100,e),b.target);break;case q.get(0):q.val(z.call(j,q.val(),0,360)),c.val("h",q.val(),b.target),f="hsv";break;case r.get(0):r.val(z.call(j,r.val(),0,100)),c.val("s",r.val(),b.target),f="hsv";break;case s.get(0):s.val(z.call(j,s.val(),0,100)),c.val("v",s.val(),b.target),f="hsv";break;case t.get(0):t.val(t.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6)),d&&d.val(t.val()),c.val("hex",""!=t.val()?t.val():null,b.target);break;case d&&d.get(0):d.val(d.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6)),t.val(d.val()),c.val("hex",""!=d.val()?d.val():null,b.target);break;case u&&u.get(0):u.val(u.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,2)),c.val("a",null!=u.val()?parseInt(u.val(),16):null,b.target)}}},w=function(b){if(null!=c.val())switch(b.target){case m.get(0):m.val(c.val("r"));break;case n.get(0):n.val(c.val("g"));break;case o.get(0):o.val(c.val("b"));break;case p&&p.get(0):p.val(Math.precision(100*c.val("a")/255,e));break;case q.get(0):q.val(c.val("h"));break;case r.get(0):r.val(c.val("s"));break;case s.get(0):s.val(c.val("v"));break;case t.get(0):case d&&d.get(0):t.val(c.val("hex")),d&&d.val(c.val("hex"));break;case u&&u.get(0):u.val(c.val("ahex").substring(6))}else c.val("ahex",g.val("ahex"));setTimeout(function(){var b=a(h[0].activeElement),c=k.find(".slider-rgb").parent(),d=k.find(".slider-hsv").parent();b.is(".Red, .Green, .Blue")?d.parent().is(":visible")&&d.hide():b.is(".Hue, .Saturation, .Value")?c.parent().is(":visible")&&c.hide():b.is(".slider-handle")||b.is(".slider-rgb, .slider-hsv")||(c.hide(),d.hide())},10)},x=function(b){var c=a(b.target),d=c.attr("class"),e=c.closest(".sf-colorpicker-main"),g=e.find(".slider-rgb"),h=e.find(".slider-hsv"),i=c.is(".Red, .Green, .Blue"),j=i?g:h,k=j.parent();i?(h.parent().hide(),k.removeClass("Red Blue Green")):(g.parent().hide(),k.removeClass("Hue Saturation Value")),f(c.attr("data-type")),k.addClass(d),k.is(":visible")||k.show()},y=function(a){switch(a.keyCode){case 9:case 16:case 29:case 37:case 38:case 40:return!1;case"c".charCodeAt():case"v".charCodeAt():if(a.ctrlKey)return!1}return!0},z=function(a,b,c){return""==a||isNaN(a)?b:a>c?c:b>a?b:a},A=function(a,b){var c=a.val("all");b!=m.get(0)&&m.val(null!=c?c.r:""),b!=n.get(0)&&n.val(null!=c?c.g:""),b!=o.get(0)&&o.val(null!=c?c.b:""),p&&b!=p.get(0)&&p.val(null!=c?Math.precision(100*c.a/255,e):""),b!=q.get(0)&&q.val(null!=c?c.h:""),b!=r.get(0)&&r.val(null!=c?c.s:""),b!=s.get(0)&&s.val(null!=c?c.v:""),b!=t.get(0)&&(d&&b!=d.get(0)||!d)&&t.val(null!=c?c.hex:""),d&&b!=d.get(0)&&b!=t.get(0)&&d.val(null!=c?c.hex:""),u&&b!=u.get(0)&&u.val(null!=c?c.ahex.substring(6):"")},B=function(){m.add(n).add(o).add(p).add(q).add(r).add(s).add(t).add(d).add(u).unbind("keyup",v).unbind("blur",w).unbind("change",w),c.unbind(A),m=null,n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null};a.extend(!0,j,{destroy:B}),l.bind("keyup",v).bind("blur",w).bind("change",w).filter(".Red, .Green, .Blue, .Hue, .Saturation, .Value").bind("click",x),c.bind(A)};a.jPicker={List:[],Color:function(b){var d,e,f,g,h,i,k,l=this,m=new Array,n=function(a){for(var b=0;b<m.length;b++)m[b].call(l,l,a)},o=function(a,b,m){var p=b!==c;if(!p){if((a===c||null==a||""==a)&&(a="all"),null==d)return null;switch(a.toLowerCase()){case"ahex":return j.rgbaToHex({r:d,g:e,b:f,a:g});case"hex":return o("ahex").substring(0,6);case"all":return{r:d,g:e,b:f,a:g,h:h,s:i,v:k,hex:o.call(l,"hex"),ahex:o.call(l,"ahex")};default:for(var q={},r=0;r<a.length;r++)switch(a.charAt(r)){case"r":1==a.length?q=d:q.r=d;break;case"g":1==a.length?q=e:q.g=e;break;case"b":1==a.length?q=f:q.b=f;break;case"a":1==a.length?q=g:q.a=g;break;case"h":1==a.length?q=h:q.h=h;break;case"s":1==a.length?q=i:q.s=i;break;case"v":1==a.length?q=k:q.v=k}return q=={}?o.call(l,"all"):q}}if(null==m||m!=l){var s=!1;if(null==a&&(a=""),null==b)return null!=d&&(d=null,s=!0),null!=e&&(e=null,s=!0),null!=f&&(f=null,s=!0),null!=g&&(g=null,s=!0),null!=h&&(h=null,s=!0),null!=i&&(i=null,s=!0),null!=k&&(k=null,s=!0),void(s&&n.call(l,m||l));switch(a.toLowerCase()){case"ahex":case"hex":var q=j.hexToRgba(b&&(b.ahex||b.hex)||b||"00000000");o.call(l,"rgba",{r:q.r,g:q.g,b:q.b,a:"ahex"==a?q.a:null!=g?g:255},m);break;default:if(b&&(null!=b.ahex||null!=b.hex))return void o.call(l,"ahex",b.ahex||b.hex||"00000000",m);var t={},u=!1,v=!1;b.r!==c&&-1==!a.indexOf("r")&&(a+="r"),b.g!==c&&-1==!a.indexOf("g")&&(a+="g"),b.b!==c&&-1==!a.indexOf("b")&&(a+="b"),b.a!==c&&-1==!a.indexOf("a")&&(a+="a"),b.h!==c&&-1==!a.indexOf("h")&&(a+="h"),b.s!==c&&-1==!a.indexOf("s")&&(a+="s"),b.v!==c&&-1==!a.indexOf("v")&&(a+="v");for(var r=0;r<a.length;r++)switch(a.charAt(r)){case"r":if(v)continue;u=!0,t.r=b&&b.r&&0|b.r||b&&0|b||0,t.r<0?t.r=0:t.r>255&&(t.r=255),d!=t.r&&(d=t.r,s=!0);break;case"g":if(v)continue;u=!0,t.g=b&&b.g&&0|b.g||b&&0|b||0,t.g<0?t.g=0:t.g>255&&(t.g=255),e!=t.g&&(e=t.g,s=!0);break;case"b":if(v)continue;u=!0,t.b=b&&b.b&&0|b.b||b&&0|b||0,t.b<0?t.b=0:t.b>255&&(t.b=255),f!=t.b&&(f=t.b,s=!0);break;case"a":t.a=b&&null!=b.a?0|b.a:null!=b?0|b:255,t.a<0?t.a=0:t.a>255&&(t.a=255),g!=t.a&&(g=t.a,s=!0);break;case"h":if(u)continue;v=!0,t.h=b&&b.h&&0|b.h||b&&0|b||0,t.h<0?t.h=0:t.h>360&&(t.h=360),h!=t.h&&(h=t.h,s=!0);break;case"s":if(u)continue;v=!0,t.s=b&&null!=b.s?0|b.s:null!=b?0|b:100,t.s<0?t.s=0:t.s>100&&(t.s=100),i!=t.s&&(i=t.s,s=!0);break;case"v":if(u)continue;v=!0,t.v=b&&null!=b.v?0|b.v:null!=b?0|b:100,t.v<0?t.v=0:t.v>100&&(t.v=100),k!=t.v&&(k=t.v,s=!0)}if(s){if(u){d=d||0,e=e||0,f=f||0;var q=j.rgbToHsv({r:d,g:e,b:f});h=q.h,i=q.s,k=q.v}else if(v){h=h||0,i=null!=i?i:100,k=null!=k?k:100;var q=j.hsvToRgb({h:h,s:i,v:k});d=q.r,e=q.g,f=q.b}g=null!=g?g:255,n.call(l,m||l)}}}},p=function(b){a.isFunction(b)&&m.push(b)},q=function(b){if(a.isFunction(b))for(var c;-1!=(c=a.inArray(b,m));)m.splice(c,1)},r=function(){m=null};a.extend(!0,l,{val:o,bind:p,unbind:q,destroy:r}),b&&(null!=b.ahex?o("ahex",b):null!=b.hex?o((null!=b.a?"a":"")+"hex",null!=b.a?{ahex:b.hex+j.intToHex(b.a)}:b):null!=b.r&&null!=b.g&&null!=b.b?o("rgb"+(null!=b.a?"a":""),b):null!=b.h&&null!=b.s&&null!=b.v&&o("hsv"+(null!=b.a?"a":""),b))},ColorMethods:{hexToRgba:function(a){if(a=this.validateHex(a),""==a)return{r:null,g:null,b:null,a:null};var b="00",c="00",d="00",e="255";return 6==a.length&&(a+="ff"),a.length>6?(b=a.substring(0,2),c=a.substring(2,4),d=a.substring(4,6),e=a.substring(6,a.length)):(a.length>4&&(b=a.substring(4,a.length),a=a.substring(0,4)),a.length>2&&(c=a.substring(2,a.length),a=a.substring(0,2)),a.length>0&&(d=a.substring(0,a.length))),{r:this.hexToInt(b),g:this.hexToInt(c),b:this.hexToInt(d),a:this.hexToInt(e)}},validateHex:function(a){return a=a.toLowerCase().replace(/[^a-f0-9]/g,""),a.length>8&&(a=a.substring(0,8)),a},rgbaToHex:function(a){return this.intToHex(a.r)+this.intToHex(a.g)+this.intToHex(a.b)+this.intToHex(a.a)},intToHex:function(a){var b=(0|a).toString(16);return 1==b.length&&(b="0"+b),b.toLowerCase()},hexToInt:function(a){return parseInt(a,16)},rgbToHsv:function(a){var b,c=a.r/255,d=a.g/255,e=a.b/255,f={h:0,s:0,v:0},g=0,h=0;return c>=d&&c>=e?(h=c,g=d>e?e:d):d>=e&&d>=c?(h=d,g=c>e?e:c):(h=e,g=d>c?c:d),f.v=h,f.s=h?(h-g)/h:0,f.s?(b=h-g,c==h?f.h=(d-e)/b:d==h?f.h=2+(e-c)/b:f.h=4+(c-d)/b,f.h=parseInt(60*f.h),f.h<0&&(f.h+=360)):f.h=0,f.s=100*f.s|0,f.v=100*f.v|0,f},hsvToRgb:function(a){var b={r:0,g:0,b:0,a:100},c=a.h,d=a.s,e=a.v;if(0==d)0==e?b.r=b.g=b.b=0:b.r=b.g=b.b=255*e/100|0;else{360==c&&(c=0),c/=60,d/=100,e/=100;var f=0|c,g=c-f,h=e*(1-d),i=e*(1-d*g),j=e*(1-d*(1-g));switch(f){case 0:b.r=e,b.g=j,b.b=h;break;case 1:b.r=i,b.g=e,b.b=h;break;case 2:b.r=h,b.g=e,b.b=j;break;case 3:b.r=h,b.g=i,b.b=e;break;case 4:b.r=j,b.g=h,b.b=e;break;case 5:b.r=e,b.g=h,b.b=i}b.r=255*b.r|0,b.g=255*b.g|0,b.b=255*b.b|0}return b}},refreshPalette:function(a){}};var g=a.jPicker.Color,h=a.jPicker.List,j=a.jPicker.ColorMethods;refreshPalette=a.jPicker.refreshPalette,a.fn.jPicker=function(b){var c=arguments;return this.each(function(){var k=this,l=a.extend(!0,{},a.fn.jPicker.defaults,b);"input"==a(k).get(0).nodeName.toLowerCase()&&(a.extend(!0,l,{window:{bindToInput:!0,expandable:!0,input:a(k)}}),""==a(k).val()?(l.color.active=new g({hex:null}),l.color.current=new g({hex:null})):j.validateHex(a(k).val())&&(l.color.active=new g({hex:a(k).val(),a:l.color.active.val("a")}),l.color.current=new g({hex:a(k).val(),a:l.color.active.val("a")}))),l.window.expandable?a(k).after('<span class="sf-colorpicker-main"><span class="Icon"><span class="Color">&nbsp;</span><span class="Alpha">&nbsp;</span><span class="Image" title="Click To Open Color Picker">&nbsp;</span><span class="Container">&nbsp;</span></span></span>'):l.window.liveUpdate=!1;var m=parseFloat(navigator.appVersion.split("MSIE")[1])<7&&l.window.body.filters,n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null,z=null,A=null,B=null,C=null,D=null,E=null,F=null,G=null,H=null,I=null,J=null,K=null,L=null,M=null,N=null,O=null,P=null,Q=null,R=function(a){var b,c,d=Ha.active,e=(Ga.clientPath,d.val("hex"));switch(l.color.mode=a,a){case"h":if(setTimeout(function(){aa.call(k,o,"transparent"),ca.call(k,q,0),da.call(k,q,100),ca.call(k,r,260),da.call(k,r,100),aa.call(k,p,"transparent"),ca.call(k,t,0),da.call(k,t,100),ca.call(k,u,260),da.call(k,u,100),ca.call(k,v,260),da.call(k,v,100),ca.call(k,w,260),da.call(k,w,100),ca.call(k,y,260),da.call(k,y,100)},0),z.range("all",{minX:0,maxX:100,minY:0,maxY:100}),A.range("rangeY",{minY:0,maxY:360}),null==d.val("ahex"))break;z.val("xy",{x:d.val("s"),y:100-d.val("v")},z),A.val("y",360-d.val("h"),A);break;case"s":if(setTimeout(function(){aa.call(k,o,"transparent"),ca.call(k,q,-260),ca.call(k,r,-520),ca.call(k,t,-260),ca.call(k,u,-520),ca.call(k,y,260),da.call(k,y,100)},0),z.range("all",{minX:0,maxX:360,minY:0,maxY:100}),A.range("rangeY",{minY:0,maxY:100}),null==d.val("ahex"))break;z.val("xy",{x:d.val("h"),y:100-d.val("v")},z),A.val("y",100-d.val("s"),A);break;case"v":if(setTimeout(function(){aa.call(k,o,"000000"),ca.call(k,q,-780),ca.call(k,r,260),aa.call(k,p,e),ca.call(k,t,-520),ca.call(k,u,260),da.call(k,u,100),ca.call(k,y,260),da.call(k,y,100)},0),z.range("all",{minX:0,maxX:360,minY:0,maxY:100}),A.range("rangeY",{minY:0,maxY:100}),null==d.val("ahex"))break;z.val("xy",{x:d.val("h"),y:100-d.val("s")},z),A.val("y",100-d.val("v"),A);break;case"r":if(b=-1040,c=-780,z.range("all",{minX:0,maxX:255,minY:0,maxY:255}),A.range("rangeY",{minY:0,maxY:255}),null==d.val("ahex"))break;z.val("xy",{x:d.val("b"),y:255-d.val("g")},z),A.val("y",255-d.val("r"),A);break;case"g":if(b=-1560,c=-1820,z.range("all",{minX:0,maxX:255,minY:0,maxY:255}),A.range("rangeY",{minY:0,maxY:255}),null==d.val("ahex"))break;z.val("xy",{x:d.val("b"),y:255-d.val("r")},z),A.val("y",255-d.val("g"),A);break;case"b":if(b=-2080,c=-2860,z.range("all",{minX:0,maxX:255,minY:0,maxY:255}),A.range("rangeY",{minY:0,maxY:255}),null==d.val("ahex"))break;z.val("xy",{x:d.val("r"),y:255-d.val("g")},z),A.val("y",255-d.val("b"),A);break;case"a":if(setTimeout(function(){aa.call(k,o,"transparent"),ca.call(k,q,-260),ca.call(k,r,-520),ca.call(k,t,260),ca.call(k,u,260),da.call(k,u,100),ca.call(k,y,0),da.call(k,y,100)},0),z.range("all",{minX:0,maxX:360,minY:0,maxY:100}),A.range("rangeY",{minY:0,maxY:255}),null==d.val("ahex"))break;z.val("xy",{x:d.val("h"),y:100-d.val("v")},z),A.val("y",255-d.val("a"),A);break;default:throw"Invalid Mode"}switch(a){case"h":break;case"s":case"v":case"a":setTimeout(function(){da.call(k,q,100),da.call(k,t,100),ca.call(k,v,260),da.call(k,v,100),ca.call(k,w,260),da.call(k,w,100)},0);break;case"r":case"g":case"b":setTimeout(function(){aa.call(k,o,"transparent"),aa.call(k,p,"transparent"),da.call(k,t,100),da.call(k,q,100),ca.call(k,q,b),ca.call(k,r,b-260),ca.call(k,t,c-780),ca.call(k,u,c-520),ca.call(k,v,c),ca.call(k,w,c-260),ca.call(k,y,260),da.call(k,y,100)},0)}null!=d.val("ahex")&&T.call(k,d)},S=function(a){var b=Ha.active,c=0;switch(a){case"h":if(Q.range("rangeY",{minY:0,maxY:360}),null==b.val("ahex"))break;c=360-b.val("h"),Q.val("y",c,Q,!0);break;case"s":case"v":if(Q.range("rangeY",{minY:0,maxY:100}),null==b.val("ahex"))break;c=100-b.val(a),Q.val("y",c,Q,!0);break;case"r":case"g":case"b":if(P.range("rangeY",{minY:0,maxY:255}),null==b.val("ahex"))break;c=255-b.val(a),P.val("y",c,P,!0)}},T=function(b,c){(null==c||c!=A&&c!=z)&&X.call(k,b,c),l.window.canBeSetToTransparent||null!=Ha.active.val("a")?setTimeout(function(){Y.call(k,b),$.call(k,b),_.call(k,b),Z.call(k,b)},0):a.isFunction(wa)?wa.call(k,Ha.active):alert("This color cannot be set to transparent.")},U=function(a,b){var c=Ha.active;if(b==z||null!=c.val()){var d=a.val("all");switch(l.color.mode){case"h":c.val("sv",{s:d.x,v:100-d.y},b);break;case"s":case"a":c.val("hv",{h:d.x,v:100-d.y},b);break;case"v":c.val("hs",{h:d.x,s:100-d.y},b);break;case"r":c.val("gb",{g:255-d.y,b:d.x},b);break;case"g":c.val("rb",{r:255-d.y,b:d.x},b);break;case"b":c.val("rg",{r:d.x,g:255-d.y},b)}}},V=function(a,b){var c=Ha.active;if(b==A||null!=c.val())switch(l.color.mode){case"h":c.val("h",{h:360-a.val("y")},b);break;case"s":c.val("s",{s:100-a.val("y")},b);break;case"v":c.val("v",{v:100-a.val("y")},b);break;case"r":c.val("r",{r:255-a.val("y")},b);break;case"g":c.val("g",{g:255-a.val("y")},b);break;case"b":c.val("b",{b:255-a.val("y")},b);break;case"a":c.val("a",255-a.val("y"),b)}},W=function(a,b){var c=Ha.active;if(b==Q&&b==P||null!=c.val()){var d=a.element.parent();switch(!0){case d.is(".Hue"):c.val("h",{h:360-a.val("y")},b);break;case d.is(".Saturation"):c.val("s",{s:100-a.val("y")},b);break;case d.is(".Value"):c.val("v",{v:100-a.val("y")},b);break;case d.is(".Red"):c.val("r",{r:255-a.val("y")},b);break;case d.is(".Green"):c.val("g",{g:255-a.val("y")},b);break;case d.is(".Blue"):c.val("b",{b:255-a.val("y")},b)}}},X=function(a,b){if(b!=z)switch(l.color.mode){case"h":var c=a.val("sv");z.val("xy",{x:null!=c?c.s:100,y:100-(null!=c?c.v:100)},b);break;case"s":case"a":var d=a.val("hv");z.val("xy",{x:d&&d.h||0,y:100-(null!=d?d.v:100)},b);break;case"v":var e=a.val("hs");z.val("xy",{x:e&&e.h||0,y:100-(null!=e?e.s:100)},b);break;case"r":var f=a.val("bg");z.val("xy",{x:f&&f.b||0,y:255-(f&&f.g||0)},b);break;case"g":var g=a.val("br");z.val("xy",{x:g&&g.b||0,y:255-(g&&g.r||0)},b);break;case"b":var h=a.val("rg");z.val("xy",{x:h&&h.r||0,y:255-(h&&h.g||0)},b)}if(b!=A)switch(l.color.mode){case"h":A.val("y",360-(a.val("h")||0),b);break;case"s":var i=a.val("s");A.val("y",100-(null!=i?i:100),b);break;case"v":var j=a.val("v");A.val("y",100-(null!=j?j:100),b);break;case"r":A.val("y",255-(a.val("r")||0),b);break;case"g":A.val("y",255-(a.val("g")||0),b);break;case"b":A.val("y",255-(a.val("b")||0),b);break;case"a":var k=a.val("a");A.val("y",255-(null!=k?k:255),b)}},Y=function(a){try{var b=a.val("all");G.css({backgroundColor:b&&"#"+b.hex||"transparent"}),da.call(k,G,b&&Math.precision(100*b.a/255,4)||0)}catch(c){}},Z=function(b){var c=a(this),d=c.find(".slider-rgb"),e=c.find(".slider-hsv"),f=d.is(":visible")?d:e.is(":visible")?e:null,g="h";f&&(g=f.parents(".SliderContainer").attr("class").replace("SliderContainer","").replace(" ","").substr(0,1).toLowerCase()),S.call(k,g)},$=function(a){switch(l.color.mode){case"h":aa.call(k,o,new g({h:a.val("h")||0,s:100,v:100}).val("hex"));break;case"s":case"a":var b=a.val("s");da.call(k,r,100-(null!=b?b:100));break;case"v":var c=a.val("v");da.call(k,q,null!=c?c:100);break;case"r":da.call(k,r,Math.precision((a.val("r")||0)/255*100,4));break;case"g":da.call(k,r,Math.precision((a.val("g")||0)/255*100,4));break;case"b":da.call(k,r,Math.precision((a.val("b")||0)/255*100))}var d=a.val("a");da.call(k,s,Math.precision(100*(255-(d||0))/255,4))},_=function(a){switch(l.color.mode){case"h":var b=a.val("a");da.call(k,x,Math.precision(100*(255-(b||0))/255,4));break;case"s":var c=a.val("hva"),d=new g({h:c&&c.h||0,s:100,v:null!=c?c.v:100});aa.call(k,p,d.val("hex")),da.call(k,u,100-(null!=c?c.v:100)),da.call(k,x,Math.precision(100*(255-(c&&c.a||0))/255,4));break;case"v":var e=a.val("hsa"),f=new g({h:e&&e.h||0,s:null!=e?e.s:100,v:100});aa.call(k,p,f.val("hex")),da.call(k,x,Math.precision(100*(255-(e&&e.a||0))/255,4));break;case"r":case"g":case"b":var h=0,i=0,j=a.val("rgba");"r"==l.color.mode?(h=j&&j.b||0,i=j&&j.g||0):"g"==l.color.mode?(h=j&&j.b||0,i=j&&j.r||0):"b"==l.color.mode&&(h=j&&j.r||0,i=j&&j.g||0);var m=i>h?h:i;da.call(k,u,h>i?Math.precision((h-i)/(255-i)*100,4):0),da.call(k,v,i>h?Math.precision((i-h)/(255-h)*100,4):0),da.call(k,w,Math.precision(m/255*100,4)),da.call(k,x,Math.precision(100*(255-(j&&j.a||0))/255,4));break;case"a":var b=a.val("a");aa.call(k,p,a.val("hex")||"000000"),da.call(k,x,null!=b?0:100),da.call(k,y,null!=b?100:0)}},aa=function(a,b){a.css({backgroundColor:b&&6==b.length&&"#"+b||"transparent"})},ba=function(a,b){!m||-1==b.indexOf("AlphaBar.png")&&-1==b.indexOf("Bars.png")&&-1==b.indexOf("Maps.png")?a.css({backgroundImage:"url("+b+")"}):(a.attr("pngSrc",b),a.css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b+"', sizingMethod='scale')"}))},ca=function(a,b){a.css({top:b+"px"})},da=function(a,b){if(a.css({visibility:b>0?"visible":"hidden"}),b>0&&100>b)if(m){var c=a.attr("pngSrc");null==c||-1==c.indexOf("AlphaBar.png")&&-1==c.indexOf("Bars.png")&&-1==c.indexOf("Maps.png")?a.css({opacity:Math.precision(b/100,4)}):a.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c+"', sizingMethod='scale') progid:DXImageTransform.Microsoft.Alpha(opacity="+b+")"})}else a.css({opacity:Math.precision(b/100,4)});else if(0==b||100==b)if(m){var c=a.attr("pngSrc");null==c||-1==c.indexOf("AlphaBar.png")&&-1==c.indexOf("Bars.png")&&-1==c.indexOf("Maps.png")?a.css({opacity:""}):a.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c+"', sizingMethod='scale')"})}else a.css({opacity:""})},ea=function(){Ha.active.val("ahex",Ha.current.val("ahex"))},fa=function(){Ha.current.val("ahex",Ha.active.val("ahex"))},ga=function(b){return a(this).parents("tbody:first").find('input:radio[value!="'+b.target.value+'"]'),R.call(k,b.target.value),S.call(k,b.target.value),!1},ha=function(){return ea.call(k),!1},ia=function(){var b=a(this).parents(".sf-colorpicker-main").find(".advanced tbody:first"),c=b.find(".colorValuesPanel"),d=a(this).hasClass("hsvTab")?"hsv":"rgb",e="hsv"==d?"rgb":"hsv";return c.find("."+d+"Panel").show(),c.find("."+e+"Panel").hide(),b.find("."+d+"Tab").addClass("hsvrgbTabSelected"),b.find("."+e+"Tab").removeClass("hsvrgbTabSelected"),!1},ja=function(){var b=a(this).parents(".sf-colorpicker-main"),c=b.find("div.sf-colorpicker-main-container tbody:first"),e=a(this);return e.data("open")?(c.find(".advanced").hide(),e.removeData("open"),e.find(".skillToggleArrow").removeClass("open").addClass("closed"),e.find("a span").text(d.advanced),b.removeClass("expanded"),b.trigger("showingBasic")):(c.find(".advanced").show(),e.data("open",!0),e.find(".skillToggleArrow").addClass("open").removeClass("closed"),e.find("a span").text(d.basic),b.addClass("expanded"),b.trigger("showingAdvanced")),!1},ka=function(){return ea.call(k),l.window.expandable&&ya.call(k),a.isFunction(va)&&va.call(k,Ha.active,J),!1},la=function(){return fa.call(k),l.window.expandable&&ya.call(k),a.isFunction(ta)&&ta.call(k,Ha.active,I),!1},ma=function(){return xa.call(k),!1},na=function(a,b){var c=a.val("hex");H.css({backgroundColor:c&&"#"+c||"transparent"}),da.call(k,H,Math.precision(100*(a.val("a")||0)/255,4)),H.css("visibility","visible")},oa=function(a,b){var c=a.val("hex"),d=a.val("va");L.css({backgroundColor:c&&"#"+c||"transparent"}),da.call(k,M,Math.precision(100*(255-(d&&d.a||0))/255,4)),l.window.bindToInput&&l.window.updateInputColor&&l.window.input.css({backgroundColor:c&&"#"+c||"transparent",color:null==d||d.v>75?"#000000":"#ffffff"})},pa=function(b){l.window.element,l.window.page;C=parseInt(n.css("left")),D=parseInt(n.css("top")),E=b.pageX,F=b.pageY,a(l.window.document).bind("mousemove",qa).bind("mouseup",ra),b.preventDefault()},qa=function(b){return n.css({left:C-(E-b.pageX)+"px",top:D-(F-b.pageY)+"px"}),l.window.expandable&&!a.support.boxModel&&n.prev().css({left:n.css("left"),top:n.css("top")}),b.stopPropagation(),b.preventDefault(),!1},ra=function(b){return a(l.window.document).unbind("mousemove",qa).unbind("mouseup",ra),b.stopPropagation(),b.preventDefault(),!1},sa=function(b){return b.preventDefault(),b.stopPropagation(),l.window.canBeSetToTransparent||a(this).attr("hex")?Ha.active.val("ahex",a(this).attr("hex")||null,b.target):a.isFunction(wa)?wa.call(k,Ha.active):alert("This color cannot be set to transparent."),!1},ta=a.isFunction(c[1])&&c[1]||null,ua=a.isFunction(c[2])&&c[2]||null,va=a.isFunction(c[3])&&c[3]||null,wa=a.isFunction(c[4])&&c[4]||null,xa=function(){Ha.current.val("ahex",Ha.active.val("ahex"));var b=function(){if(l.window.expandable&&!a.support.boxModel){var b=n.find("table:first");n.before("<iframe/>"),n.prev().css({width:b.width(),height:n.height(),opacity:0,position:"absolute",left:n.css("left"),top:n.css("top")})}};switch(l.window.expandable&&(l.window.layer.children("div.sf-colorpicker-main.Container").css({zIndex:10}),n.css({zIndex:20})),l.window.effects.type){case"fade":n.fadeIn(l.window.effects.speed.show,b);break;case"slide":n.slideDown(l.window.effects.speed.show,b);break;case"show":default:n.show(l.window.effects.speed.show,b)}},ya=function(){var b=function(){l.window.expandable&&n.css({zIndex:10}),l.window.expandable&&!a.support.boxModel&&n.prev().remove()};switch(l.window.effects.type){case"fade":n.fadeOut(l.window.effects.speed.hide,b);break;case"slide":n.slideUp(l.window.effects.speed.hide,b);break;case"show":default:n.hide(l.window.effects.speed.hide,b)}},za=function(b,c){if(b.paletteList&&b.paletteList.length>0){var d="",e=n.find(".Grid:first");for(i=0;i<b.paletteList.length;i++){var f=b.paletteList[i].color,h=b.paletteList[i].type;"string"==(typeof f).toString().toLowerCase()&&(f=new g({hex:f}));var j=f.val("a"),k=f.val("ahex"),l="none";k&&(l="#"+k.substring(0,6)),!c.alphaSupport&&k&&(k=l+"ff");var m=f.val("hex");d+='<span class="QuickColor"'+(h&&' title="'+h+" - "+l+'"'||"")+(k&&' hex="'+k+'"'||"")+' style="background-color:'+(m&&"#"+m||"")+";"+(m?"":"background-image:url("+Ga.clientPath+"NoColor.png)")+(c.alphaSupport&&j&&255>j?";opacity:"+Math.precision(j/255,4)+";filter:Alpha(opacity="+Math.precision(j/2.55,4)+")":"")+'"'+gd.getCIAttribute("picker")+">&nbsp;</span>"}var o=n.find(".GridPalette").length>0?n.find(".GridPalette"):a('<div><div class="GridPaletteTitle">Theme Colors</div><div class="Grid GridPalette" /></div>').insertBefore(e).find(".GridPalette");o.html(d),o.find(".QuickColor").click(sa)}},Aa=function(){var b=l.window,c=b.expandable?a(k).next().find(".Container:first"):null;n=a(b.expandable?"<div/>":k),n.addClass("sf-colorpicker-main Container"),b.expandable&&n.hide(),n.get(0).onselectstart=function(){return!1};var j=Ha.active.val("all");b.alphaPrecision<0?b.alphaPrecision=0:b.alphaPrecision>2&&(b.alphaPrecision=2);var m='<div class="sf-colorpicker-main-container"><table class="sf-colorpicker-main-table" cellpadding="0" cellspacing="0"><tbody><tr><td class="basic"><table><tbody><tr><td><div class="Preview"><span class="CurrentTitle">'+d.currentColor+'</span><span class="ActiveTitle">'+d.newColor+'</span><div class="PreviewColors"><span class="Current" title="'+d.tooltipCurrentColor+'"'+gd.getCIAttribute("picker")+'>&nbsp;</span><span class="Active" title="'+d.tooltipNewColor+'"'+gd.getCIAttribute("picker")+'>&nbsp;</span></div></div><div class="Hex"><label title="'+d.tooltipHexTextbox+'">#<input type="text" maxlength="7" class="Hex" value="'+(null!=j?j.hex:"")+'"/></label>'+(b.alphaSupport?'<input type="text" maxlength="2" class="AHex" value="'+(null!=j?j.ahex.substring(6):"")+'" title="'+d.tooltipHexAlpha+'"/>':"&nbsp;")+'</div></td></tr><tr><td><div class="Grid">&nbsp;</div></td></tr></tbody></table></td><td class="advanced" style="display:none;" rowspan="2"><table><tbody>'+(b.expandable?'<tr><td class="Move" colspan="5">&nbsp;</td></tr>':"")+'<tr class="colorValuesPanel"><td valign="top" colspan="2"><div class="colorValuesPanelContainer"><table class="rgbPanel"><tbody><tr class="Red"><td class="Radio"><label title="'+d.tooltipRedRadio+'">'+(l.window.colorModes?'<input type="radio" name="ophsvrgb" value="r"'+("r"==l.color.mode?' checked="checked"':"")+"/>":"")+'R</label></td><td class="Text"><input type="text" class="Red" maxlength="3" data-type="r" value="'+(null!=j?j.r:"")+'" title="'+d.tooltipRedTextbox+'"/></td><td class="Slider" rowspan="3"><div class="SliderContainer"><div style="background-image: url('+Ga.clientPath+'sf-colorpicker-sprt.gif)" class="slider-arrow"></div><div class="slider-rgb Slider"><div class="slider-handle" /><div class="bar" /></div></div></td></tr><tr class="Green"><td class="Radio"><label title="'+d.tooltipGreenRadio+'">'+(l.window.colorModes?'<input type="radio" name="ophsvrgb" value="g"'+("g"==l.color.mode?' checked="checked"':"")+"/>":"")+'G</label></td><td class="Text"><input type="text" class="Green" maxlength="3" data-type="g" value="'+(null!=j?j.g:"")+'" title="'+d.tooltipGreenTextbox+'"/></td></tr><tr class="Blue"><td class="Radio"><label title="'+d.tooltipBlueRadio+'">'+(l.window.colorModes?'<input type="radio" name="ophsvrgb" value="b"'+("b"==l.color.mode?' checked="checked"':"")+"/>":"")+'B</label></td><td class="Text"><input type="text" class="Blue" maxlength="3" data-type="b" value="'+(null!=j?j.b:"")+'" title="'+d.tooltipBlueTextbox+'"/></td></tr></tbody></table><table class="hsvPanel"><tbody><tr class="Hue"><td class="Radio"><label title="'+d.tooltipHueRadio+'">'+(l.window.colorModes?'<input type="radio" name="ophsvrgb" value="h"'+("h"==l.color.mode?' checked="checked"':"")+"/>":"")+'H</label></td><td class="Text"><input type="text" class="Hue" maxlength="3" data-type="h" value="'+(null!=j?j.h:"")+'" title="'+d.tooltipHueTextbox+'"/>&nbsp;&deg;</td><td class="Slider" rowspan="3"><div class="SliderContainer"><div style="background-image: url('+Ga.clientPath+'sf-colorpicker-sprt.gif)" class="slider-arrow"></div><div class="Slider slider-hsv"><div class="slider-handle" /><div class="bar" /></div></div></td></tr><tr class="Saturation"><td class="Radio"><label title="'+d.tooltipSaturationRadio+'">'+(l.window.colorModes?'<input type="radio" name="ophsvrgb" value="s"'+("s"==l.color.mode?' checked="checked"':"")+"/>":"")+'S</label></td><td class="Text"><input type="text" class="Saturation" data-type="s" maxlength="3" value="'+(null!=j?j.s:"")+'" title="'+d.tooltipSaturationTextbox+'"/>&nbsp;%</td></tr><tr class="Value"><td class="Radio"><label title="'+d.tooltipValueRadio+'">'+(l.window.colorModes?'<input type="radio" class="Value" name="ophsvrgb" value="v"'+("v"==l.color.mode?' checked="checked"':"")+"/>":"")+'V</label></td><td class="Text"><input type="text" class="Value" data-type="v" maxlength="3" value="'+(null!=j?j.v:"")+'" title="'+d.tooltipValueTextbox+'"/>&nbsp;%</td></tr></tbody></table>'+(b.alphaSupport?'<table><tbody><tr class="Alpha"><td class="Radio">'+(b.alphaSupport?'<label title="'+d.tooltipAlphaRadio+'"><input type="radio" name="ophsvrgb" value="a"'+("a"==l.color.mode?' checked="checked"':"")+"/>A:</label>":"&nbsp;")+'</td><td class="Text">'+(b.alphaSupport?'<input type="text" class="Alpha" maxlength="'+(3+b.alphaPrecision)+'" value="'+(null!=j?Math.precision(100*j.a/255,b.alphaPrecision):"")+'" title="'+d.tooltipAlphaTextbox+'"/>&nbsp;%':"&nbsp;")+"</td></tr></tbody></table>":"")+'</div></td></tr><tr><td><div class="MapContainer"><div class="Map"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><div class="Arrow" /></div></div></td><td><div class="BarContainer"><div class="Bar"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><span class="Map4">&nbsp;</span><span class="Map5">&nbsp;</span><span class="Map6">&nbsp;</span><div class="Arrow" /></div></div></td></tr></tbody></table></td></tr><tr class="button-strip"><td class="Button"><div class="ButtonContainer"><button class="Ok '+l.classes.buttons.ok.enabled+'" title="'+d.tooltipButtonOk+'" onclick="return false;"'+gd.getCIAttribute("ok")+">"+d.ok+'</button><a class="Cancel '+l.classes.buttons.cancel.enabled+'" title="'+d.tooltipButtonCancel+'" href="javascript:void(0);"'+gd.getCIAttribute("cancel")+">"+d.cancel+'</a><div class="skillToggle"><a><span>'+d.advanced+'</span><div class="skillToggleArrow closed"></div></a></div></div></td><tr/></tbody></table></div>';
b.expandable?(n.html(m),0==l.window.layer.children("div.sf-colorpicker-main.Container").length?l.window.layer.prepend(n):l.window.layer.children("div.sf-colorpicker-main.Container:last").after(n),n.mousedown(function(){l.window.layer.children("div.sf-colorpicker-main.Container").css({zIndex:10}),n.css({zIndex:20})}),n.css({left:"left"==b.position.x?c.offset().left-530-("center"==b.position.y?25:0)+"px":"center"==b.position.x?c.offset().left-260+"px":"right"==b.position.x?c.offset().left-10+("center"==b.position.y?25:0)+"px":"screenCenter"==b.position.x?(a(b.document).width()>>1)-260+"px":c.offset().left+parseInt(b.position.x)+"px",position:"absolute",top:"top"==b.position.y?c.offset().top-312+"px":"center"==b.position.y?c.offset().top-156+"px":"bottom"==b.position.y?c.offset().top+25+"px":c.offset().top+parseInt(b.position.y)+"px"}),n.data("jPickerIndex",h.length-1)):(n=a(k),n.html(m),n.data("jPickerIndex",h.length-1));var C=n.find(".advanced tbody:first");o=C.find("div.Map:first"),p=C.find("div.Bar:first");var D=o.find("span"),E=p.find("span");q=D.filter(".Map1:first"),r=D.filter(".Map2:first"),s=D.filter(".Map3:first"),t=E.filter(".Map1:first"),u=E.filter(".Map2:first"),v=E.filter(".Map3:first"),w=E.filter(".Map4:first"),x=E.filter(".Map5:first"),y=E.filter(".Map6:first"),z=new e(o,{type:"grid",map:{width:Ga.colorMap.width,height:Ga.colorMap.height},arrow:{width:Ga.colorMap.arrow.width,height:Ga.colorMap.arrow.height},document:l.window.document,body:l.window.body}),z.bind(U),A=new e(p,{type:"vbar",map:{width:Ga.colorBar.width,height:Ga.colorBar.height},arrow:{width:Ga.colorBar.arrow.width,height:Ga.colorBar.arrow.height},document:l.window.document,body:l.window.body}),A.bind(V),B=new f(C,Ha.active,b.expandable&&b.bindToInput?b.input:null,b.alphaPrecision,S,Ha.current,l.window.document,l.window.body);var F=null!=j?j.hex:null,X=n.find(".Preview"),Y=n.find(".Button");if(G=X.find(".Active:first").css({backgroundColor:F&&"#"+F||"transparent"}),H=X.find(".Current:first").css({backgroundColor:F&&"#"+F||"transparent"}).bind("click",ha),da.call(k,H,Math.precision(100*Ha.current.val("a"))/255,4),H.css("visibility","visible"),n.find(".hsvrgbTab").bind("click",ia),I=Y.find(".Ok:first").bind("click",la),J=Y.find(".Cancel:first").bind("click",ka),n.find(".skillToggle").bind("click",ja),K=n.find(".Grid:first"),P=new e(n.find(".slider-rgb"),{type:"vbar",map:{width:Ga.sliders.width,height:Ga.sliders.height},arrow:{image:Ga.clientPath+Ga.sliders.arrow.file,width:Ga.sliders.arrow.width,height:Ga.sliders.arrow.height},document:l.window.document,body:l.window.body}),P.bind(W),Q=new e(n.find(".slider-hsv"),{type:"vbar",map:{width:Ga.sliders.width,height:Ga.sliders.height},arrow:{image:Ga.clientPath+Ga.sliders.arrow.file,width:Ga.sliders.arrow.width,height:Ga.sliders.arrow.height},document:l.window.document,body:l.window.body}),Q.bind(W),setTimeout(function(){ba.call(k,q,Ga.clientPath+"Maps.png"),ba.call(k,r,Ga.clientPath+"Maps.png"),ba.call(k,s,Ga.clientPath+"map-opacity.png"),ba.call(k,t,Ga.clientPath+"Bars.png"),ba.call(k,u,Ga.clientPath+"Bars.png"),ba.call(k,v,Ga.clientPath+"Bars.png"),ba.call(k,w,Ga.clientPath+"Bars.png"),ba.call(k,x,Ga.clientPath+"bar-opacity.png"),ba.call(k,y,Ga.clientPath+"AlphaBar.png"),ba.call(k,X.find("div.PreviewColors"),Ga.clientPath+"preview-opacity.png")},0),C.find("td.Radio input").bind("click",ga),Ha.quickList&&Ha.quickList.length>0||Ha.paletteList&&Ha.paletteList.length>0){var Z="";if(za(Ha,b),Ha.quickList&&Ha.quickList.length>0){for(l.window.canBeSetToTransparent||(Ha.quickList[Ha.quickList.length-1]=new g({h:180,s:0,v:100})),i=0;i<Ha.quickList.length;i++){"string"==(typeof Ha.quickList[i]).toString().toLowerCase()&&(Ha.quickList[i]=new g({hex:Ha.quickList[i]}));var $=Ha.quickList[i].val("a"),_=Ha.quickList[i].val("ahex"),aa=_;!b.alphaSupport&&_&&(aa=_.substring(0,6),_=aa+"ff");var ca=Ha.quickList[i].val("hex");Z+='<span class="QuickColor"'+(_&&' title="#'+aa+'" hex="'+_+'"'||"")+' style="background-color:'+(ca&&"#"+ca||"")+";"+(ca?"":"background-image:url("+Ga.clientPath+"NoColor.png)")+(b.alphaSupport&&$&&255>$?";opacity:"+Math.precision($/255,4)+";filter:Alpha(opacity="+Math.precision($/2.55,4)+")":"")+'"'+gd.getCIAttribute("picker")+">&nbsp;</span>"}K.html(Z),K.find(".QuickColor").click(sa)}}R.call(k,l.color.mode),S.call(k,l.color.mode),C.find(".slider-rgb, .slider-hsv").parent().hide(),Ha.active.bind(T),a.isFunction(ua)&&Ha.active.bind(ua),Ha.current.bind(na),b.expandable?(k.icon=c.parents(".Icon:first"),L=k.icon.find(".Color:first").css({backgroundColor:F&&"#"+F||"transparent"}),M=k.icon.find(".Alpha:first"),ba.call(k,M,Ga.clientPath+"bar-opacity.png"),da.call(k,M,Math.precision(100*(255-(null!=j?j.a:0))/255,4)),N=k.icon.find(".Image:first").css({backgroundImage:"url("+Ga.clientPath+Ga.picker.file+")"}).bind("click",ma),b.bindToInput&&b.updateInputColor&&b.input.css({backgroundColor:F&&"#"+F||"transparent",color:null==j||j.v>75?"#000000":"#ffffff"}),O=C.find(".Move:first").bind("mousedown",pa),Ha.active.bind(oa)):xa.call(k)},Ba=function(){for(n.find("td.Radio input").unbind("click",ga),H.unbind("click",ha),J.unbind("click",ka),I.unbind("click",la),l.window.expandable&&(N.unbind("click",ma),O.unbind("mousedown",pa),k.icon=null),n.find(".QuickColor").unbind("click",sa),o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null,z.destroy(),z=null,A.destroy(),A=null,B.destroy(),B=null,G=null,H=null,I=null,J=null,K=null,ta=null,va=null,wa=null,ua=null,n.html(""),i=0;i<h.length;i++)h[i]==k&&h.splice(i,1)},Ca=function(a){Ha.paletteList=a,za(Ha,l.window)},Da=function(){ka()},Ea=function(){la()},Fa=function(a){var b=n.find(".Ok");b.length>0&&b.removeClass(l.classes.buttons.ok[a?"disabled":"enabled"]).addClass(l.classes.buttons.ok[a?"enabled":"disabled"])},Ga=l.images,Ha=(l.localization,{active:new g("string"==(typeof l.color.active).toString().toLowerCase()?{ahex:!l.window.alphaSupport&&l.color.active?l.color.active.substring(0,6)+"ff":l.color.active}:{ahex:!l.window.alphaSupport&&l.color.active.val("ahex")?l.color.active.val("ahex").substring(0,6)+"ff":l.color.active.val("ahex")}),current:new g("string"==(typeof l.color.active).toString().toLowerCase()?{ahex:!l.window.alphaSupport&&l.color.active?l.color.active.substring(0,6)+"ff":l.color.active}:{ahex:!l.window.alphaSupport&&l.color.active.val("ahex")?l.color.active.val("ahex").substring(0,6)+"ff":l.color.active.val("ahex")}),quickList:l.color.quickList,paletteList:l.color.paletteList});window.gd||(gd={}),gd.getCIAttribute=function(a){return""},a.extend(!0,k,{commitCallback:ta,liveCallback:ua,cancelCallback:va,invalidColorChoiceCallback:wa,color:Ha,show:xa,hide:ya,destroy:Ba,refreshPalette:Ca,cancelChoice:Da,saveChoice:Ea,enableOkButton:Fa}),h.push(k),Aa.call(k)})},a.fn.jPicker.defaults={window:{title:null,effects:{type:"slide",speed:{show:"slow",hide:"fast"}},position:{x:"screenCenter",y:"top"},expandable:!1,liveUpdate:!0,alphaSupport:!1,alphaPrecision:0,updateInputColor:!0,showHSVFirst:!0,canBeSetToTransparent:!1,colorModes:!0},color:{mode:"h",active:new g({ahex:"#ffcc00ff"}),paletteList:[],quickList:[new g({h:360,s:33,v:100}),new g({h:30,s:33,v:100}),new g({h:60,s:33,v:100}),new g({h:90,s:33,v:100}),new g({h:120,s:33,v:100}),new g({h:150,s:33,v:100}),new g({h:180,s:33,v:100}),new g({h:210,s:33,v:100}),new g({h:240,s:33,v:100}),new g({h:270,s:33,v:100}),new g({h:300,s:33,v:100}),new g({h:330,s:33,v:100}),new g({h:360,s:66,v:100}),new g({h:30,s:66,v:100}),new g({h:60,s:66,v:100}),new g({h:90,s:66,v:100}),new g({h:120,s:66,v:100}),new g({h:150,s:66,v:100}),new g({h:180,s:66,v:100}),new g({h:210,s:66,v:100}),new g({h:240,s:66,v:100}),new g({h:270,s:66,v:100}),new g({h:300,s:66,v:100}),new g({h:330,s:66,v:100}),new g({h:360,s:100,v:100}),new g({h:30,s:100,v:100}),new g({h:60,s:100,v:100}),new g({h:90,s:100,v:100}),new g({h:120,s:100,v:100}),new g({h:150,s:100,v:100}),new g({h:180,s:100,v:100}),new g({h:210,s:100,v:100}),new g({h:240,s:100,v:100}),new g({h:270,s:100,v:100}),new g({h:300,s:100,v:100}),new g({h:330,s:100,v:100}),new g({h:360,s:100,v:75}),new g({h:30,s:100,v:75}),new g({h:60,s:100,v:75}),new g({h:90,s:100,v:75}),new g({h:120,s:100,v:75}),new g({h:150,s:100,v:75}),new g({h:180,s:100,v:75}),new g({h:210,s:100,v:75}),new g({h:240,s:100,v:75}),new g({h:270,s:100,v:75}),new g({h:300,s:100,v:75}),new g({h:330,s:100,v:75}),new g({h:360,s:100,v:50}),new g({h:30,s:100,v:50}),new g({h:60,s:100,v:50}),new g({h:90,s:100,v:50}),new g({h:120,s:100,v:50}),new g({h:150,s:100,v:50}),new g({h:180,s:100,v:50}),new g({h:210,s:100,v:50}),new g({h:240,s:100,v:50}),new g({h:270,s:100,v:50}),new g({h:300,s:100,v:50}),new g({h:330,s:100,v:50}),new g({h:180,s:0,v:100}),new g({h:180,s:0,v:90}),new g({h:180,s:0,v:80}),new g({h:180,s:0,v:70}),new g({h:180,s:0,v:60}),new g({h:180,s:0,v:50}),new g({h:180,s:0,v:40}),new g({h:180,s:0,v:30}),new g({h:180,s:0,v:20}),new g({h:180,s:0,v:10}),new g({h:180,s:0,v:0}),new g]},images:{clientPath:"/images/",colorMap:{width:256,height:256,arrow:{file:"mappoint.gif",width:21,height:21}},colorBar:{width:22,height:256,arrow:{file:"rangearrows.gif",width:22,height:7}},picker:{file:"picker.gif",width:25,height:24},sliders:{width:23,height:69,arrow:{file:"slider-handle.png",width:17,height:15}}},classes:{buttons:{ok:{enabled:"enabled",disabled:"disabled"},cancel:{enabled:"enabled",disabled:"disabled"}}}}}(a,"1.1.5")}(jQuery,ux.i18n);var uxContext=null;!function(a,b){var c={options:{anchor:b,mode:"custom",flavor:"inverse",width:200,positionIdeal:"tl",sticky:!1,fallbackOnFailPosition:"auto",zIndex:b,autoOpen:!1,destroyOnClose:!1,closeTimeoutInterval:b,closeOnBlur:!0,blurTrigger:"click",singleInstanceOnly:!0,ignoreWindowChanges:!1,centerAgainstAnchor:!1,onOpen:b,onClose:b,onItemClick:b,onTabSelected:b,onTabDeselected:b,onContextMenu:b,context:self,displayContext:self},_create:function(){this._mode=this._deriveMode(),this._width=this.options.width>200?this.options.width:200,this._initParent=this.element.parent(),this._initHasParent=this._initParent.length>0,this._ctxt=ux.util.context(this.options.context,this.options.displayContext),this._setUpAnchor(),this._formatContent(),this._initFlyout()},_formatContent:function(){var b=this,c=b.element;c.addClass(b.baseClass);var d={tabsFormat:function(){},listFormat:function(){var b=c.find("ul").addClass("dropdown-menu").attr("role","menu").find("li").each(function(){var b=a(this);if(d.fixLIs(b),b.attr("data-icon")&&""!==b.attr("data-icon")){var c=b.attr("data-icon").indexOf("glyphicon")>-1?"glyphicon ":"",e=b.children("a");0===e.length&&(e=b),e.prepend(a("<span />").addClass("sf-menu-icn "+c+b.attr("data-icon")))}}).end();b.children("li[data-icon]").length>0&&b.addClass("sf-menu-icns"),b.parent().is(".dropdown")||b.wrap(a("<div />").addClass("dropdown fade in"))},searchFormat:function(){c.find("li").each(function(){d.fixLIs(a(this))});var e=c.find("input:not([data-configured])");if(e.length>0){e.addClass("sf-search");var f=e.outerWidth(!0)-e.width();e.width(b._width-f).attr("data-configured",!0)}},customFormat:function(){},fixLIs:function(d){d.attr("data-configured")||(d.addClass("sf-menu-li").attr,d.attr("id",b._generateId("sfcontextitem")).attr("role","presentation"),"title"===d.attr("data-type")?d.addClass("dropdown-header"):d.children("a").length<=0&&d.wrapInner('<a class="sf-menu-a"></a>'),d.children("a").attr("role","menuitem").attr("href","javascript: void(0);").attr("onClick","return false;"),d.bind("click",function(){var e=!0;a.isFunction(b.options.onItemClick)&&(e=b.options.onItemClick(c,d.index(),d),"undefined"==typeof e&&(e=!0)),e!==!1&&b.close()}).attr("data-configured",!0))}};d[b._mode+"Format"]()},_setUpAnchor:function(){function b(b){c._anchor.css({top:b.pageY+"px",left:b.pageX+"px"});var e=a.isFunction(d.onContextMenu)?d.onContextMenu(c.element,b):!0;return"undefined"==typeof e&&(proceed=!0),e&&(c.isOpen()?c.reposition():c.open()),b.returnValue=!e,!e}var c=this,d=c.options;"cursor"===d.anchor?(c._anchor=a("<div />").css({width:"1px",height:"1px",position:"absolute"}).appendTo(this._ctxt.ext.body()),c._anchorIsCursor=!0,a(this._ctxt.intr.body()).bind("contextmenu.sfctxt",b),this._ctxt.isSingle()||a(this._ctxt.ext.body()).bind("contextmenu.sfctxt",b)):c._anchor=a(d.anchor).eq(0),c._anchor.addClass(c.baseClass+"-anchor")},_initFlyout:function(){var b=this,c=b.options,d=b.element,e={mode:"tip",flavor:c.flavor,anchor:b._anchor,autoOpen:c.autoOpen,dialogWidthIdeal:b._width,destroyOnClose:!1,tipPosition:c.positionIdeal,sticky:c.sticky,fallbackOnFailPosition:c.fallbackOnFailPosition,boxShadowAdjustment:5,dialogBoxShadowAdjustment:5,closeOnBlur:c.closeOnBlur,blurTrigger:c.blurTrigger,zIndex:c.zIndex,client:"sf-context",className:"tooltip-"+b._mode,singleClientInstance:c.singleInstanceOnly,ignoreWindowChanges:c.ignoreWindowChanges,closeTimeoutInterval:c.closeTimeoutInterval,centerAgainstAnchor:c.centerAgainstAnchor,onOpen:function(){a.isFunction(c.onOpen)&&c.onOpen(d)},onClose:function(){var e=!0;return a.isFunction(c.onClose)&&(e=c.onClose(d)),e&&c.destroyOnClose&&setTimeout(function(){b.destroy()},10),e},onTabSelected:c.onTabSelected,onTabDeselected:c.onTabDeselected};"tabs"===b._mode&&(e.tabMode="toggle"),d.sfFlyout(e)},_deriveMode:function(){var a=this.element,c=""===a.attr("data-mode")?b:a.attr("data-mode");return c=c?c:this.options.mode,"tabs"!==c&&this.element.find(".tab-pane").length>0&&(c="tabs"),"list"!==c&&this.element.find("li[data-icon]").length>0&&(c="list"),c===b&&(c="custom"),c},destroy:function(b){this.isOpen()&&this.close(!0),this.element.sfFlyout&&(this._initHasParent&&this.element.hide().appendTo(this._initParent),this.element.sfFlyout("destroynow")),this.element.removeClass(this.baseClass),this._anchor.removeClass(this.baseClass+"-anchor"),this._anchorIsCursor&&(this._anchor.remove(),a(this._ctxt.intr.body()).unbind("contextmenu.sfctxt"),this._ctxt.isSingle()||a(this._ctxt.ext.body()).unbind("contextmenu.sfctxt"));var c=this;this._initHasParent?this._execSuper("destroy",b):setTimeout(function(){c.element.appendTo(a(c._ctxt.intr.body())),c.element.remove(),c._execSuper("destroy",b)},100)},reformatContent:function(){this._formatContent()},open:function(){var a=this;if(!a.isOpen()){var b=a.element;b.is(":sf-flyout")&&b.sfFlyout("open")}},close:function(a){var b=this,c=this.element;c.is(":sf-flyout")&&c.sfFlyout(b.options.destroyOnClose===!0||a===!0?"closeNow":"close")},enable:function(){var a=this.element;a.is(":sf-flyout")&&a.sfFlyout("enable")},disable:function(){var a=this.element;a.is(":sf-flyout")&&a.sfFlyout("diable")},toggle:function(){this.isOpen()?this.close():this.open()},getFlyout:function(){var a=this,b=null;return a.element.is(":sf-flyout")&&(b=a.element.parents(".sf-flyout")),b},reposition:function(){var a=this;a.element.is(":sf-flyout")&&a.element.sfFlyout("resize")},selectTab:function(a){var b=this;b.element.is(":sf-flyout")&&(ret=b.element.sfFlyout("selectTab",a))},setCloseOnBlur:function(b){a.isPlainObject(b)&&(b=b.close),$m.element.is(":sf-flyout")&&$m.element.sfFlyout("setCloseOnBlur",b)},isOpen:function(){var a=this.element,b=!1;return a.is(":sf-flyout")&&(b=a.sfFlyout("isOpen")),b},content:function(){return this.element},anchor:function(){return this._anchor}};ux.util.module("Context",c),ux.util.selector("sf-context",{root:{selector:".sf-context",tests:{id:function(a,b){return a.attr("id")===b}},states:{open:function(a){return a.sfContext("isOpen")},closed:function(a){return!a.sfContext("isOpen")}}},anchor:{selector:".sf-context-anchor",tests:{id:function(a,b){return a.attr("data-flyout")===b}}}})}(jQuery),function(a,b,c){var d=b["sf.datagrid"],e={options:{width:400,tableHeight:c,actionColWidth:c,showPaging:"both",togglePagingOnNeed:!1,showItemsPerPage:!0,showFiltering:!1,showHover:!0,showSearch:!1,showSelectionStatus:!0,data:{baseUri:c,source:c,requestType:"GET",extraRequestData:c,onRequestSuccess:c,params:{page:"page=[page]",itemsPerPage:"ipp=[ipp]",sortColumn:"sortcol=[sortcol]",sortDirection:"sortdir=[sortdir]"},filters:{},map:c},compares:{},renders:{},rowActions:[],actionStates:c,renderStates:c,statusStates:c,cellEditActionOnClick:c,itemsPerPage:-1,itemsPerPageOptions:c,allowDisplayAllItems:!0,currentPageIndex:1,defaultSortColumn:-1,selectMode:"multi",itemDisplayName:d.items,actionsHeading:d.actions,texts:d,onOpen:c,onRendered:c,onRowSelectChange:c,onMultiSelectChange:c,onRowMetaDataChange:c},_paging:c,_sorting:c,_filtering:c,_formatting:c,_dataIsRemote:!1,_cellEditsEnabled:!1,columns:[],_itemsPerPageOptions:[10,20,50,100],_compares:{string:function(a,b,c){var d=a.toString()===b.toString()?0:a.toString()>b.toString()?1:-1,e=c?1:-1;return d*e},number:function(a,b,c){var a=Number(a),b=Number(b);isNaN(a)&&(a=0),isNaN(b)&&(b=0);var d=a===b?0:a>b?1:-1,e=c?1:-1;return d*e},bool:function(a,b,c){a="true"===a?!0:a===!0?!0:!1,b="true"===b?!0:b===!0?!0:!1,a=a===!0?c?-1:1:0,b=b===!0?c?-1:1:0;var d=a===b?0:a>b?1:-1,e=c?1:-1;return d*e},date:function(a,b,c){function d(a){return"[object Date]"!==Object.prototype.toString.call(a)?!1:!isNaN(a.getTime())}var a=new Date(a),b=new Date(b);a=d(a)?a:new Date(0),b=d(b)?b:new Date(0);var e=a.getTime()===b.getTime()?0:a.getTime()>b.getTime()?1:-1,f=c?1:-1;return e*f}},_actionStates:["display","edit","delete"],_statusStates:["selected","error"],_selectionStates:["display"],_renderStates:["display","edit"],_renderBaseTypes:{string:"text",checkbox:"text",date:"text",placeholdertext:"text",yesnoradio:"text",html:"html"},_renderOptions:{},_renders:{string:function(b,c,d,e){var f={display:function(a){var b=a.attr("data-raw");a.children(".display").empty().text(b).show()},edit:function(b,c){var d=b.attr("data-raw"),e=b.outerWidth(!0)-(0===c?2:c),f=b.children(".edit"),g=f.find("input"),h=b.height();b.css("text-align");if(0===g.length){var i='<input type="text" class="form-control input-sm"></input>';f.append(a(i).val(d).width(e).height(h).css({"text-align":b.css("text-align")}).bind("change",function(){b.attr("data-raw",a(this).val())}))}else g.val(d).outerWidth(e).outerHeight(h);f.show()}};return b&&b.length>0&&f[c]&&f[c](b,e),f},checkbox:function(b,c,d,e){var f={display:function(b){var c=b.attr("data-raw"),d="true"===c?!0:c===!0?!0:!1,e='<input type="checkbox"'+(d?' checked="true"':"")+"></input>",f=b.find("input:checkbox"),g=b.children(".display");0===f.length?g.append(a(e).bind("click",function(){return"edit"===b.parent().attr("data-rowstate")||"edit"===b.attr("data-cellstate")?(b.attr("data-raw",a(this).is(":checked")),!0):!1})):(f.attr("checked",d),g.append(f)),g.show()},edit:function(b,c){c=0===c?0:c;var d=b.attr("data-raw"),e="true"===d?!0:d===!0?!0:!1,f=b.find("input:checkbox").attr("checked",e),g=b.children(".edit"),h=g.children(".box");0===h.length&&(h=a('<span class="box form-control input-sm"></span>').appendTo(g).outerWidth(b.width()).outerHeight(b.height())),h.append(f),g.show()}};return b&&b.length>0&&f[c]&&f[c](b,e),f},html:function(b,c,d,e){var f=this.options.html?this.options.html:{},g={display:function(b,c,d){d=a.extend({},f,d);var e=b.attr("data-raw"),g=b.children(".display");g.empty().html(e),a.isFunction(d.binder)&&d.binder(g),g.show()},edit:function(a,b,c){d.string().edit(a,b)}};return b&&b.length>0&&g[c]&&g[c](b,e,f),g},styled:function(a,b,c,d){var e=this.options.styled?this.options.styled:null,f={display:function(a,b,c){c=c?c:e;var d=a.attr("data-raw"),f=a.children(".display");f.empty().text(d),c&&f.css(c),f.show()},edit:function(a,b,d){c.string().edit(a,b)}};return a&&a.length>0&&f[b]&&f[b](a,d,e),f},placeholdertext:function(b,c,d,e){var f=this.options.placeholdertext?this.options.placeholdertext:{emptyText:"Not specified"},g={display:function(b,c,d){d=a.extend({},f,d);var e=b.attr("data-raw"),g=b.children(".display"),h=d.emptyText;g.empty(),e.length>0&&e!==h?(g.text(e).css({"font-style":"normal",color:"#000"}),b.removeAttr("data-isempty")):(g.text(h).css({"font-style":"italic",color:"#666"}),b.attr("data-isempty",!0)),g.show()},edit:function(a,b){a.attr("data-isempty")&&a.attr("data-raw",""),d.string().edit(a,b)}};return b&&b.length>0&&g[c]&&g[c](b,e,f),g},yesnoradio:function(b,c,d,e){var f=this.options.yesnoradio?this.options.yesnoradio:{yesCaption:"Yes",noCaption:"No"},g={display:function(b,c,d){d=a.extend({},f,d);var e=b.attr("data-raw"),g=b.children(".display"),h=b.find(".ctrls");if(h.length>0)g.append(h),h.find("input").removeAttr("data-enabled"),h.find(".yesno-"+("true"===e?"yes":"no"))[0].checked=!0,h.find(".yesno-"+("true"===e?"no":"yes"))[0].checked=!1;else{h=a('<div class="ctrls"></div>').css({display:"inline-block"}).appendTo(g);var i=function(){if("true"!==a(this).attr("data-enabled"))return!1;var c=a(this).parents(".ctrls");b.attr("data-raw",c.find(".yesno-yes:checked").length>0)},j=b.parent().attr("id");a('<span><input type="radio" class="yesno yesno-yes" name="shared-'+j+'" '+("true"===e?'checked="true"':"")+" />"+d.yesCaption+"</span>").appendTo(h).css("margin-right","10px").children("input").css("margin","-3px 5px 0 0").bind("click",i),a('<span><input type="radio" class="yesno yesno-no" name="shared-'+j+'" '+("true"!==e?'checked="true"':"")+" />"+d.noCaption+"</span>").appendTo(h).children("input").css("margin","-3px 5px 0 0").bind("click",i)}g.show()},edit:function(b,c){c=0===c?0:c;var d=b.attr("data-raw"),e=b.find(".ctrls");e.find("input").attr("data-enabled",!0),e.find(".yesno-"+("true"===d?"yes":"no"))[0].checked=!0,e.find(".yesno-"+("true"===d?"no":"yes"))[0].checked=!1;var f=b.children(".edit"),g=f.children(".box");0===g.length&&(g=a('<span class="box form-control input-sm"></span>').appendTo(f).outerWidth(b.width()).outerHeight(b.height())),g.append(e),f.show()}};return b&&b.length>0&&g[c]&&g[c](b,e,f),g},date:function(b,c,d,e){var f={display:function(a,b){var c=a.attr("data-raw");a.children(".display").empty().text(c).show()},edit:function(b,c){var d=b.attr("data-raw"),e=b.children(".edit");if(e.show(),0===e.children(".dgdatepicker").length){a('<input type="text" class="form-control input-sm" />').appendTo(a('<div class="dgdatepicker" />').appendTo(e)).outerWidth(b.width()).outerHeight(b.height()).bind("change",function(){b.attr("data-raw",a(this).val())}).sfDatePicker({dateOverride:d,onSelect:function(a,c){b.attr("data-raw",c)}})}else e.find("input").sfDataGrid("setDate",d);b.css("overflow","visible")}};return b&&b.length>0&&f[c]&&f[c](b,e),f}},__paging:function(a,b){function d(a){a||(s.currentIndex=1),s.pageCount=c,s.itemCount=c,s.itemCountChanged=!0}function e(a,b){a=a&&a>0?a:1,b=b?b:0,s.itemCountChanged=s.itemCount!==b;var c=Math.floor(b/s.itemsPerPage);c+=b%s.itemsPerPage>0?1:0,a>c&&(a=c),f(a,c,b)}function f(a,b,c){s.currentIndex=a,s.pageCount=b,s.itemCountChanged=s.itemCount!==c,s.itemCount=c}function g(){var a=s.currentIndex-1;return a>0?a:c}function h(){var a=s.currentIndex+1;return a<=s.pageCount?a:c}function i(a){return a=a?a:s.currentIndex,s.currentIndex<=1}function j(a){return a=a?a:s.currentIndex,s.currentIndex>=s.pageCount}function k(a){a="undefined"!=typeof a?a:s.currentIndex;var b=s.itemsPerPage*(a-1);b=0>b?0:b;var c=b+s.itemsPerPage;return c=c>s.itemCount?s.itemCount:c,{start:b,end:c}}function l(a){return a=m(a),"undefined"!=typeof a&&a>0&&a<=s.pageCount}function m(a){return"number"==typeof a?a:"next"===a?h():"prev"===a?g():"first"===a?1:"last"===a?s.pageCount:c}function n(a,b){var c=m(a);if(l(c)||b){s.currentIndex=c;var d={boundaries:k(),page:c};s.itemCountChanged&&(d.itemCountChanged=!0),s.itemsPerPageCountChanged&&(d.itemsPerPageCountChanged=!0),b===!0&&(d.forceReload=!0),s.itemCountChanged=!1,s.itemsPerPageCountChanged=!1,r.element.trigger("pageChanged",d)}}function o(a){n(s.currentIndex,a)}function p(a){"number"==typeof a&&a!==s.itemCount&&e(s.currentIndex,a),q(),o()}function q(a){b(a)}var r=a,s=this;return this.itemsPerPage=r.options.itemsPerPage,this.currentIndex=r.options.currentPageIndex,this.itemCount=-1,this.pageCount=-1,this.itemsPerPageCountChanged=!1,this.itemCountChanged=!1,{currentIndex:function(a){return a&&(s.currentIndex=m(a)),s.currentIndex},pageCount:function(a){return s.pageCount},itemsPerPage:function(a){if("undefined"!=typeof a&&a!==s.itemsPerPage){s.itemsPerPageCountChanged=!0;var b=s.currentIndex;s.itemsPerPage=a,e(1,s.itemCount),b=l(b)?b:1,q(),n(b)}return s.itemsPerPage},itemCount:function(a){return a&&a!==s.itemCount&&(s.itemCount=a,s.itemCountChanged=!0),s.itemCount},derive:e,rePage:p,load:f,clear:d,prevIndex:g,nextIndex:h,isFirstPage:i,isLastPage:j,isValidPage:l,changePage:n,boundaries:k,refreshPage:o,redecorate:q}},__rendering:function(b,c,d,e,f){function g(a,b,d){var f=b.attr("data-raw");"undefined"==typeof f&&(f=b["text html".indexOf(e[a])<0?"text":e[a]](),b.attr("data-raw",f).empty()),b.css("overflow","hidden"),d=h(b,d),0===b.children("div."+d).length&&b.append('<div class="sf-datagrid-dg-render '+d+'" />');var g="edit"===d&&"edit"===b.attr("data-cellstate"),j="edit"===d?i(b,g,g?67:0):0;b.children(".sf-datagrid-dg-render").hide();var m=c[a](b,d,c,j);return"display"===d&&k(b),g&&l(b,j),m}function h(b,c){c=a.inArray(c,d)>-1?c:"display";var e="edit"===c&&"edit"===b.attr("data-cellstate");return"edit"===c&&(e&&"true,cell".indexOf(b.attr("data-editable"))<0||!e&&"true,row".indexOf(b.attr("data-editable"))<0)&&(c="display"),c}function i(a,b,c){return a.attr("data-preedit",a.attr("data-raw")),a.is(":sf-tipper(target)")&&a.sfTipper({suppress:!0}),b&&("center"===a.css("text-align").toLowerCase()?c=0:a.outerWidth()<j(a)+c&&(c=0)),c}function j(a){var b=a.children(".display"),c=b.css("display");b.css("display","inline"),b.show();var d=b.outerWidth(!0);return b.css("display",c&&c.length>0?c:""),d}function k(a){var b="true,cell".indexOf(a.attr("data-editable"))>-1;a.removeAttr("title"),b?a.is(":sf-tipper(target)")?a.sfTipper({resume:!0}):(a.addClass("sf-tip").attr({"data-style":"qt","data-content":"Double-click to edit"}),a.parent().sfTipper({wireup:!0})):j(a)>a.width()&&a.attr("title",a.attr("data-raw"))}function l(b,c){var d=b.children(".edit"),e=b.css("text-align").toLowerCase(),g="center"!==e&&b.outerWidth(!0)<=d.width()+c,h=function(){var b=a(this),c=b.attr("data-colindex"),d=m.tbody.children("tr:eq("+b.attr("data-rowindex")+")"),e=d.children("td:eq("+c+")"),g=m._getRowData(d),h=m._data.parseRowForServer(g),i=m._getDataColumnIndexOffset(),j=f(m.element,b.attr("data-action"),c,h,m._data.getServerColumn(c-i));("undefined"==typeof j||j===!0)&&(b.sfTipper({close:!0}),"cancel"===b.attr("data-action")&&m._restoreCell(e),m._changeCellState(e,"display"),b.parent().remove())},i={onclick:"return false;",href:"javascript: void(0);","data-style":"qt","data-colindex":b.index(),"data-rowindex":b.parent().index()},j=a('<div data-tableid="'+m.id+'" class="sf-datagrid-celleditbtns"/>').append(a("<a>").addClass("uxicon uxicon-save sf-tip").attr(i).attr("data-content","Save").attr("data-action","save").bind("click",h)).append(a("<a>").addClass("uxicon uxicon-no sf-tip").attr(i).attr("data-content","Cancel").attr("data-action","cancel").bind("click",h));g?j.addClass("sf-datagrid-celleditbtns-int").prependTo(d).css({"float":"right"===e?"left":"right","line-height":b.height()+"px"}):j.addClass("sf-datagrid-celleditbtns-ext").css({top:b.offset().top+b.innerHeight(),left:b.offset().left+b.outerWidth(),zIndex:1}).appendTo(document.body),a('div[data-tableid="'+m.id+'"]').sfTipper({wireup:!0})}var m=b;a.isFunction(f)||(f=function(){return!0});var n={};for(var o in c)c.hasOwnProperty(o)&&(n[o]=function(a){return function(b,c){return g(a,b,c)}}(o));return n},__formatting:function(b){function e(a,b,c){if(x.events[a])for(var d=x.events[a].listeners,e=0;e<d.length;e++)x.events[a][d[e]](b,c)}function f(a,b,c){var d=x.events[a];d||(d=x.events[a]={}),d[b]||(d[b]=c,d.listeners.push(b))}function g(){w.element.addClass("sf-datagrid-element"),w.element.addClass("datagrid"+(w.options.showHover===!1?"-no-hover":"")),w.element.is("table")?(w.table=w.element,w.table.wrap('<div class="'+w.baseClass+'-main"></div>').wrap('<div class="'+w.baseClass+'-tablewrap"></div>')):(w.table=w.element.find("table"),w.element.is("."+w.baseClass+"-main")?w.main=w.element:(w.main=w.element.find("."+w.baseClass+"-main"),0===w.main.length&&w.table.wrap('<div class="'+w.baseClass+'-main"></div>').wrap('<div class="'+w.baseClass+'-tablewrap"></div>'),w.origin=w.element),w.element=w.table),w.main=w.table.parents("."+w.baseClass+"-main"),w.main.width(w.options.width),w.tableWrap=w.main.find("."+w.baseClass+"-tablewrap"),w.table.show().css("visibility",""),w._showWaiter(),w.element.bind("pageChanged filtered dataChanged sorted",function(a,b){w.cancelEdits(),e(a.type,a,b)}),h()}function h(){w.table&&0!==w.table.length||(w.table=a("<table><thead></thead><tbody></tbody></table>").appendTo(w.element)),w.table.addClass(w.baseClass),w.table.attr("id")||w.table.attr("id",w.id+"-table"),0===w.table.children("thead").length&&w.table.prepend("<thead></thead>"),w.thead=w.table.children("thead"),w.table.find("tr:has(th)").appendTo(w.thead),0===w.table.children("tbody").length&&w.table.find(":not(thead) tr").wrapAll("<tbody></tbody>"),0===w.table.children("tbody").length&&w.table.append("<tbody />"),w.tbody=w.table.children("tbody");var b=!0;if(0===w.tbody.children("tr").length)if(w._dataIsRemote){var c=w._queries.getLastQueryInfo("results"),d="undefined"!=typeof c;if(!(d&&c.data.rows.length<=0)){var e={process:function(){w._formatting.table()}};return w.options.defaultSortColumn>-1&&(e.sortDirection="asc",e.sortColumn=w.options.defaultSortColumn),void w._queries.run(e)}w._showMessage(w.options.texts.noDataToDisplay,!0),b=!1}else w._showMessage(w.options.texts.noDataToDisplay,!0);if(j(),w.table.css("table-layout","fixed"),n(),w.dataColumns=w.table.find('colgroup[data-coltype="data"]'),-1===w._paging.itemCount()){var f=w.tbody.children("tr").length;w._showPaging||w._paging.itemsPerPage(f),w._paging.derive(1,f),w._paging.redecorate()}if(w._paging.changePage(1),r(),t(),u(),i(),w.options.defaultSortColumn>-1){var g=w.table.find('colgroup[data-coltype="data"]').prevAll("colgroup").children("col").length;w.sortColumn(w.options.defaultSortColumn+g)}b&&w._hideWaiter()}function i(){if("undefined"!=typeof w.options.tableHeight){w.table.find("tr").each(function(){a(this).children().last().css("width","")}),w.table.find("colgroup").last().children("col").last().css("width",""),w.extra=a('<div class="'+w.baseClass+'-xhead"><table class="sf-datagrid datagrid '+w.baseClass+'-xtable"></table></div>').insertBefore(w.tableWrap).find("."+w.baseClass+"-xtable").append(w.table.find("colgroup").clone(!0,!0)).append(w.thead.clone(!0,!0)),w.thead.hide();var b=a('<div class="'+w.baseClass+'-xbody"></div>').css({"overflow-x":"hidden","overflow-y":"auto",height:w.options.tableHeight+"px"});w.tableWrap.wrap(b),w.xbody=b;var c=a('<div><div style="height:70px; width:100%;"><div /></div></div>').css({"overflow-x":"scroll","overflow-y":"scroll",height:"50px",width:"50px",background:"#d99"}).appendTo(document.body),d=c.width()-c.children().eq(0).children().eq(0).width();c.remove(),w.bodyScrollW=d,w.extra.parent().css("padding-right",d),a.isFunction(w.options.onRendered)&&w.options.onRendered(w.element,w.actionBar)}w.extra&&w.extra.css("table-layout","fixed")}function j(){var b=w.columns?w.columns:w.options.columns;if(k(),0===w.thead.children().length){var c=a("<tr></tr>").appendTo(w.thead),d=w.tbody.children("tr").eq(0);if(0===b.length){var e=d.children();e.each(function(){var d=a(this),e=d.attr("data-width");e=e?e:d.width(),e&&d.width(e),w._isIE(7)&&(e-=21);var f={heading:d.text(),width:e,align:"left,right,center".indexOf(d.attr("data-align"))>-1?d.attr("data-align"):"left"};b.push(f),d.remove();var g=a("<th>"+f.heading+"</th>").appendTo(c).attr("data-width",f.width).attr("data-align",f.align).css("width",f.width+"px");"left"!==f.align&&g.css("text-align",f.align)}),d.remove()}}w.columns=b,l(),m()}function k(){var a=w.options.rowActions;a.length>0&&(0===w.thead.find("."+w.baseClass+"-action").length&&w.thead.children("tr").append('<th class="'+w.baseClass+'-action" data-controlcol="action">'+w.options.actionsHeading+"</th>"),
"number"==typeof w.options.actionColWidth&&"string"==typeof w.options.width&&w.options.width.indexOf("%")>-1&&w.thead.find("tr th."+w.baseClass+"-action").width(w.options.actionColWidth+"px"),0===w.table.find('colgroup[data-coltype="action"]').length&&w.table.children("colgroup:last").after('<colgroup class="'+w.baseClass+'-action" data-coltype="action"><col /></colgroup>'))}function l(b){var c=function(a){var b=a.children("tr:eq(0)");b.find('th[data-sort="asc"] a.sf-datagrid-action-sort').addClass("sf-datagrid-action-sort-active").children("span.uxicon").removeClass("sf-datagrid-sort-desc uxicon-chevron-down sf-datagrid-sort-inactive").addClass("sf-datagrid-sort-asc uxicon-chevron-up"),b.find('th[data-sort="desc"] a.sf-datagrid-action-sort').addClass("sf-datagrid-action-sort-active").children("span.uxicon").removeClass("sf-datagrid-sort-asc uxicon-chevron-up sf-datagrid-sort-inactive").addClass("sf-datagrid-sort-desc uxicon-chevron-down"),b.find('th[data-sort="inactive"] a.sf-datagrid-action-sort').removeClass("sf-datagrid-action-sort-active").children("span.uxicon").removeClass("sf-datagrid-sort-asc uxicon-chevron-up sf-datagrid-sort-desc uxicon-chevron-down").addClass("sf-datagrid-sort-inactive")};b?(c(w.thead),w.extra&&w.extra.length>0&&c(w.extra.find("thead"))):(w.thead.find("th:not([data-controlcol])").each(function(b){var c=a(this);c.attr("data-sourcedata","true");var d=c.attr("data-sort");if(d&&d.length>0){d="asc"===d?"asc":"desc"===d?"desc":"inactive",c.attr("data-sort",d);var e="asc"===d?"uxicon-chevron-up":"desc"===d?"uxicon-chevron-down":"";0===c.children("."+w.baseClass+"-action-sort").length&&c.contents().wrap('<a href="javascript: void(0);" onclick="return false;" class="'+w.baseClass+'-action-sort"></a>');var f=c.find(".uxicon");0===f.length&&(f=a("<span></span>").appendTo(c.children("a"))),f.attr("class","").addClass("uxicon "+e+" "+w.baseClass+"-sort-"+d),c.children("."+w.baseClass+"-action-sort").bind("click",function(){w.sortColumn(a(this).parent().index())})}var g=c.attr("data-width");g=g?g:c.width(),w._isIE(7)&&(g-=21),c.width(g),w.columns[b]={heading:c.text(),width:g,align:"left,right,center".indexOf(c.attr("data-align"))>-1?c.attr("data-align"):"left"}}),w.thead.find("th[data-sort]").length>0&&f("sorted","colHeaders",function(a,b){var c=b.asc?"asc":"desc",d=function(a){var d=a.children("tr:eq(0)").children("th:eq("+b.column+")").attr("data-sort",c);a.children("tr:eq(0)").children("th").not(d).attr("data-sort","inactive")};d(w.thead),w.extra&&w.extra.length>0&&d(w.extra.find("thead")),l(!0)}))}function m(){if(0===w.table.find("colgroup").length)for(var b=a('<colgroup span="'+w.columns.length+'" data-coltype="data"></colgroup>').insertBefore(w.thead),c=0;c<w.columns.length;c++){var d=w.columns[c],e=a("<col />").appendTo(b).width(d.width).attr("data-width",d.width).attr("data-heading",d.heading).attr("data-align",d.align);"left"!==d.align&&e.css({"text-align":d.align})}else if(w._isIE(7))for(var f=w.main.find('colgroup[data-coltype="data"]').children("col"),c=0;c<w.columns.length;c++){var d=w.columns[c],e=f.eq(c),g=e.attr("data-width");"undefined"==typeof g&&(e.width(d.width),e.attr("data-width",d.width))}}function n(b){if(b){var c=w._getDataColumnIndexOffset();w.tbody.children("tr").children('td[data-sourcedata="true"]:not([data-colid])').each(function(){var b=a(this).index()-c;a(this).attr("data-colid",b)});var d=w.tbody.children("tr:visible");d.filter(":even").addClass("stripe"),d.filter(":odd").removeClass("stripe"),d.filter("[data-meta-error]").addClass("sf-datagrid-error danger"),d.filter("[data-meta-selected]").addClass("sf-datagrid-selected active"),w._setStateClass(d.eq(0),"row"),s();var e=w.columns;w.thead.children("tr").eq(0).children("th").css("text-align",function(){var b=a(this),c=b.attr("data-colid")?parseInt(b.attr("data-colid")):-1;return e[c]&&e[c].align?e[c].align:"left"});d.children("td[data-colid]").each(function(){var b=a(this),c=a.extend(!0,{align:"left",renderType:"string"},e[parseInt(b.attr("data-colid"))]);"left"!==c.align&&b.css("text-align",c.align),"true,cell,row".indexOf(c.editable)>-1&&!b.is("[data-editable]")&&(b.attr("data-editable",c.editable),"true,cell".indexOf(c.editable)>-1&&b.bind("dblclick",function(b){var c=a(this);c.parent('[data-rowstate="display"]').length>0&&(c.attr("data-indblclick",!0),w.changeCellState({td:c,state:"edit"}),setTimeout(function(){c.removeAttr("data-indblclick")},1e3))})),b.is("[data-raw]")||w._rendering[c.renderType](b)}),setTimeout(function(){d.filter('[data-rowstate != "display"]').each(function(){var b=a(this);w.changeRowState({row:b,state:b.attr("data-rowstate"),forceRefresh:!0})}),w.extra&&(w.table.height()>w.xbody.height()?(w.extra.parent().css("padding-right",w.bodyScrollW),w.extra.addClass("sf-datagrid-xhead-fix").removeClass("sf-datagrid-xhead-fix2")):(w.extra.parent().css("padding-right",""),w.extra.addClass("sf-datagrid-xhead-fix2").removeClass("sf-datagrid-xhead-fix"))),a.isFunction(w.options.onRendered)&&w.options.onRendered(w.element,w.actionBar)},10)}else{var d=w.tbody.children("tr").filter(":not([data-rowinit])");d.each(function(b){var c=a(this);w._initElementId(c,w.baseClass+"-tr");var d=c.attr("data-rowstate");d="undefined"!=typeof d?d:"display",c.attr({"data-rowstate":d,"data-rowinit":"true"}),c.attr("data-page")||c.attr("data-page",w._paging.currentIndex())});for(var g=w.table.find('colgroup[data-coltype="data"]'),h=g.children("col"),i=h.length,e=w.columns,j=d.eq(0).children("td"),k=g.prevAll("colgroup").children("col").length,l=j.length===i?0:k,m=w.thead.children("tr").eq(0).children("th"),r=m.length===i?0:k,t=function(a){var b=j.eq(a),c=b.attr("data-type");if(c&&c.length>0)return c;if(c=m.eq(a+r).attr("data-type"),c&&c.length>0)return c;for(var e=b.text(),f=0;0===e.length&&d.length<f;)f++,b=d.eq(f).children("td:eq("+a+")"),e=b.text();return isNaN(e)?"string":"number"},u=function(a){var b=m.eq(a+r).attr("data-render");return b&&b.length>0?b:"string"},v=function(a){return m.eq(a+r).attr("data-editable")},x=0;i>x;x++){var y=e[x]=e[x]?e[x]:{},z=x+l;y.dataType||(y.dataType=t(x),y.renderType=u(x),y.editable=v(x));var A={"data-type":y.dataType,"data-colid":x,"data-render":y.renderType};m.eq(x+r).attr(A),A["data-editable"]=y.editable,h.eq(x).attr(A),d.children("td:nth-child("+(z+1)+")").attr("data-sourcedata","true").attr("data-colid",x)}o(),p(),q(),f("pageChanged","tbody",function(a,b){var c=w._getActiveRows(),d=c.filter('[data-page="'+w._paging.currentIndex()+'"]');(0===d.length||b.itemsPerPageCountChanged||b.forceReload)&&w._dataIsRemote?w._queries.run({page:b.page,forceReload:b.forceReload,process:function(){w._formatting.tableBody(),w._paging.refreshPage()}}):0===d.length?w._showMessage(w.options.texts.noDataForPage,!0):(d.show(),c.not(d).hide(),n(!0))});var B=function(a,b){w._canSortLocal(b.type)&&w._paging.redecorate(),w._paging.refreshPage(),n(!b.build)};f("sorted","tbody",B),f("filtered","tbody",function(a,b){b.itemCountChanged=!0,B(a,b)}),n(!0)}}function o(){var b=w.tbody.children("tr");w.options.showHover&&b.hover(function(){"display"===a(this).attr("data-rowstate")&&a(this).addClass("sf-datagrid-hover")},function(){a(this).removeClass("sf-datagrid-hover")})}function p(){var b=w.options.selectMode;if("multi"===b){var c=w.thead.find("."+w.baseClass+"-check");0===c.length&&(c=a('<th class="'+w.baseClass+'-check" data-controlcol="selection"><div data-meta-selected="false" class="uxicon-checkmark  uxicon"></div></th>').prependTo(w.thead.children("tr"))),w.thead.children("tr").find(".uxicon-checkmark:not([data-chkbound])").bind("click",function(){var b="true"!==a(this).attr("data-selected"),c=w._getDisplayedRows(),d=c.length,e=function(){return b?":not(.sf-datagrid-selected)":".sf-datagrid-selected"},f=c.filter(e());0===f.length&&(b=!b,f=c.filter(e())),f.each(function(){w.selectRow({row:a(this),stateOverride:b})}),a(this).attr("data-selected",b),w.pagingBar&&w.pagingBar.find("."+w.baseClass+"-pagn-selectedcount").text(b?d:0),a.isFunction(w.options.onMultiSelectChange)&&w.options.onMultiSelectChange(w.element,b)}).attr("data-chkbound",!0);var d=w.table.find('colgroup[data-coltype="check"] col');0===d.length&&(d=a('<colgroup class="'+w.baseClass+'-check" data-coltype="check"><col /></colgroup>').insertBefore(w.table.children("colgroup:first")).find("col")),w.tbody.children("tr:not(:has(td."+w.baseClass+"-batchselect))").each(function(){var b=a(this);b.prepend('<td class="'+w.baseClass+'-batchselect"><input type="checkbox" /></td>')})}if("off"!==b){var e=w.tbody.children("tr:not([data-selconfigured])"),f="sf-datagrid-selected",g=function(b){var c=a(this);if(!(a.inArray(c.attr("data-rowstate"),w._selectionStates)<=-1||a(b.target).is("[data-action]"))){if("multi"===w.options.selectMode){var d=c.prevAll("tr");if(b.shiftKey){w.selectRow({row:c,stateOverride:!0}),d=c.parent().children("tr");var e=d.filter(".sf-datagrid-selected");e.length>1&&d.slice(e.first().index(),e.last().index()).each(function(){w.selectRow({row:a(this),stateOverride:!0})})}else w.selectRow({row:c})}else w.selectRow({row:c});if("multi"===w.options.selectMode&&w.options.showSelectionStatus){var f=w.tbody.find("tr.sf-datagrid-selected").length;w.pagingBar.find("."+w.baseClass+"-pagn-selectedcount").text(f)}}};if(e.bind("click",function(b){var c=this,d=a(this),e=a(b.target),f='[data-editable="true"],[data-editable="cell"]',h=e.is(f)||e.parentsUntil(d,f).length>0;h?(d.attr("data-inclick")||setTimeout(function(){0===d.find("[data-indblclick]").length&&(d.attr("data-inclick",!0),g.call(c,b))},300),setTimeout(function(){d.removeAttr("data-inclick")},700)):g.call(c,b)}).attr("data-selconfigured","true").filter('[data-meta-selected="true"]').addClass(f).find("td."+w.baseClass+"-batchselect input").attr("checked",!0),"multi"===b){var h=function(){return!1};a(window).bind("keydown",function(b){0!==a(b.target).parents(w.tbody).length&&(b.shiftKey||b.ctrlKey)&&(w.tbody.attr("data-selectdisabled")||(ux.util.ua.ff?w.tbody.css("MozUserSelect","none"):ux.util.ua.ie?w.tbody.bind("selectstart:sfdg",h):w.tbody.bind("mousedown:sfdg",h),w.tbody.attr("data-selectdisabled",!0)))}).bind("keyup",function(b){0!==a(b.target).parents(w.tbody).length&&w.tbody.attr("data-selectdisabled")&&(ux.util.ua.ff?w.tbody.css("MozUserSelect",""):ux.util.ua.ie?w.tbody.unbind("selectstart:sfdg"):w.tbody.unbind("mousedown:sfdg"),w.tbody.removeAttr("data-selectdisabled"))})}}}function q(){var b=w.options.rowActions;b.length>0&&w.tbody.children("tr:not([data-actionconfigured])").each(function(){var c=function(b){w.doAction(a(this).parents("tr"),parseInt(a(this).attr("data-actionindex")))},d=a(this).attr("data-rowstate");d="undefined"!=typeof d?d:"display";var e=a(this).attr({"data-actionconfigured":!0,"data-rowstate":d}),f=e.find("a[data-action]").parents("td");0===f.length&&(f=a('<td data-controlcol="action"><div class="sf-datagrid-actions" /></td>').appendTo(e));for(var g=f.children(".sf-datagrid-actions"),h=0;h<b.length;h++){for(var i=b[h],j=i.showOnState&&i.showOnState.length>0?i.showOnState.split(" "):["display"],k=!1,l=!1,m=!1,n=0;n<j.length;n++){var o=j[n],p=o.substr(0,1);if("!"===p||"+"===p){var q=o.split("="),r=q[0].substr(1),s=q.length>1?q[1]:"";if(m=!0,j[n]=a.inArray(r,w._statusStates)>-1?o:"display",!l){var t=e.is("[data-meta-"+r+"]");t=t&&(""===s||""!==s&&e.attr("data-meta-"+r)===s),l=t&&"+"===p||!t&&"!"===p}}else j[n]=a.inArray(o,w._actionStates)>-1?o:"display",k||"display"!==j[n]||(k=!0)}var u=g.find('a[data-action="'+i.action+'"]');0===u.length&&(u=a("<a>").appendTo(g)),u.addClass(i.iconClasses+" sf-tip").attr("onclick","return false;").attr("href","javascript: void(0);").attr("data-action",i.action).attr("data-actionindex",h).attr("data-showonstate",j.join(" ")).attr("data-content",i.tooltip).attr("data-style","qt").append("").bind("click",c),(!k||m&&!l)&&u.css("display","none")}f.sfTipper({wireup:!0})})}function r(){var b="top both".indexOf(w.options.showPaging)>-1,c="bottom both".indexOf(w.options.showPaging)>-1,e=b||"multi"===w.options.selectMode&&w.options.showSelectionStatus,g=c;if(e||g){var h=w.baseClass+"-pagn",i=w.main.children("."+h);if(0===i.length){var j='<div class="'+h+'"></div>';e&&a(j).insertBefore(w.tableWrap).addClass(h+"-top"),g&&a(j).insertAfter(w.tableWrap).addClass(h+"-bottom"),i=w.main.children("."+h)}var k=i.filter("."+h+"-top"),l=i.filter("."+h+"-bottom");if(w._showPaging){var m="top"===w.options.showPaging?k:"bottom"===w.options.showPaging?l:i;0===m.find("."+h+"-controls").length&&m.append(a('<div class="'+h+'-controls sf-datagrid-pagn-right"></div>').append(a("<ul />").addClass("pagination pagination-sm").append(a("<li />").append('<a href="javascript: void(0);" onClick="return false;" class="'+h+'-prev"><span class="uxicon uxicon-chevron-left"></span></a>')).append(a("<li />").append('<span class="'+h+'-pager"><label>{0}:</label> <select class="{1}-page form-control input-sm"></select> <span>{2}</span> <span class="{1}-pagecount"></span></span>'.sfFormat(d.page,h,d.of))).append(a("<li />").append('<a href="javascript: void(0);" onClick="return false;" class="'+h+'-next "><span class="uxicon uxicon-chevron-right"></span></a>'))));var n=m.find("a."+w.baseClass+"-pagn-prev").bind("click",function(){w._paging.changePage("prev")});w._paging.isFirstPage()&&n.addClass("disabled");var o=m.find("a."+w.baseClass+"-pagn-next").bind("click",function(){w._paging.changePage("next")});w._paging.isLastPage()&&o.addClass("disabled");for(var p=m.find("select"),q=1;q<=w._paging.pageCount();q++){var r=a('<option value="'+q+'">'+q+"</option>").appendTo(p);q===w._paging.currentIndex()&&r.attr("selected",!0)}p.bind("click keyup",function(){w._paging.changePage(parseInt(a(this).val()))}),m.find("."+h+"-pagecount").text(w._paging.pageCount())}if(c&&w.options.showItemsPerPage&&w._itemsPerPageOptions.length>0){0===l.find("."+h+"-displaycount").length&&l.find("div."+h+"-controls").after('<div class="'+h+'-displaycount sf-datagrid-pagn-left"><span class=""><label>{0}:</label> <select class="{1}-itemsperpage form-control input-sm"></select></span></div>'.sfFormat(d.display,h)),p=l.find("select."+h+"-itemsperpage"),p.empty();for(var q=0;q<w._itemsPerPageOptions.length;q++){var t=w._itemsPerPageOptions[q],r=a('<option value="'+t+'">'+t+"</option>").appendTo(p);t===w._paging.itemsPerPage()&&r.attr("selected",!0)}w.options.allowDisplayAllItems&&a('<option value="all">{0}</option>'.sfFormat(d.all)).appendTo(p),p.bind("change",function(){w.changeItemsPerPage(a(this).val())})}if(e&&0===k.find("."+h+"-status").length&&k.prepend('<div class="'+h+'-status sf-datagrid-pagn-left"></div>'),"off"!==w.options.selectMode){var u=k.find("."+h+"-statuswrapper");0===u.length&&(u=a('<span class=" '+h+'-statuswrapper"></span>').append('<span class="'+h+'-itemcount">'+w._paging.itemCount()+'</span>&nbsp;<span class="'+h+'-itemname">'+w.options.itemDisplayName+"</span>&nbsp;").appendTo(k.find("div."+h+"-status"))),s()}var v=k.find("."+h+"-refreshwrap");if(e&&w._dataIsRemote&&!w._dataIsLocalJson?(0===v.length&&(v=a('<span class="'+h+'-refreshwrap"><a href="javascript:void(0);" onclick="return false;" class="'+h+'-refresh uxicon-refresh uxicon"></a></span>').prependTo(k.find("div."+h+"-status"))),v.find("."+h+"-refresh").bind("click",function(){w._clearData({clearPaging:!1}),w._paging.refreshPage(!0)})):v.length>0&&v.remove(),e||g){var x=function(b,c){var d=w.pagingBar.find("select."+h+"-page").val(c.page);if(c.itemsPerPageCountChanged||c.itemCountChanged){d.empty();for(var e=1;e<=w._paging.pageCount();e++){var f=a('<option value="'+e+'">'+e+"</option>").appendTo(d);e===w._paging.currentIndex()&&f.attr("selected",!0)}w.pagingBar.find("."+h+"-pagecount").text(w._paging.pageCount());var g=!w._dataIsRemote||w._dataIsLocalJson?w.tbody.find('tr[data-meta-selected="true"]').length:0;w.pagingBar.find("."+h+"-selectedcount").text(g),w.pagingBar.find("."+h+"-itemcount").text(w._paging.itemCount())}var i=w._paging.isValidPage("prev");w.pagingBar.find("."+h+"-prev")[i?"removeClass":"addClass"]("disabled"),i=w._paging.isValidPage("next"),w.pagingBar.find("."+h+"-next")[i?"removeClass":"addClass"]("disabled"),w.pagingBar[w._togglePaging&&w._paging.itemCount()<=w._paging.itemsPerPage()?"hide":"show"]()};f("pageChanged","pagingBar",x),f("filtered","pagingBar",function(a,b){var c=w._getActiveRows();c.filter('[data-page="'+w._paging.currentIndex()+'"]');(!w._dataIsRemote||w._dataIsLocalJson)&&(w._paging.derive(1,c.length),w._paging.redecorate()),b.itemCountChanged=!0,x(a,b)})}w.pagingBar=i}}function s(){var b=w.baseClass+"-pagn",c=w.main.find("."+b+"-top ."+b+"-statuswrapper");if("multi"===w.options.selectMode){var e=c.find("."+b+"-selectedstatus");0===e.length&&(e=a('<span class="'+b+'-selectedstatus">(<span class="'+b+'-selectedcount"></span>&nbsp;{0})</span>'.sfFormat(d.selected)).appendTo(c)),e.find("."+b+"-selectedcount").text(w.tbody.find('tr[data-meta-selected="true"]'+(!w._dataIsRemote||w._dataIsLocalJson?"":":visible")).length)}}function t(){if(w.options.showFiltering||w.options.showSearch){var b=w.main.find("."+w.baseClass+"-filterbar");if(0===b.length&&(b=a('<div class="'+w.baseClass+'-filterbar"></div>').prependTo(w.main)),w.filterBar=b,w.options.showSearch&&(b.append('<div class="'+w.baseClass+'-filterbar-search-col"><div class="input-icon input-icon-left"><input type="text" placeholder="Search" class="'+w.baseClass+'-search form-control" /><span class="uxicon uxicon-magnifying-glass"></span></div></div>'),b.find("input").bind("keydown",function(b){13==b.which&&w.search(a(this).val())})),w.options.showFiltering){var e=b.find("."+w.baseClass+"-filterbar-select");0===e.length&&(e=a('<select class="'+w.baseClass+'-filterbar-select form-control input-sm"></select>').appendTo(a('<div class="'+w.baseClass+'-filterbar-select-col"><label>{0}:</label> </div>'.sfFormat(d.filter)).appendTo(b))),e.empty().append('<option value="" data-col="-1">{0}</option>'.sfFormat(d.none));var g=w.options.data.filters;for(var h in g)if(g.hasOwnProperty(h)&&g[h].options)for(var i=g[h].options,j=0;j<i.length;j++)e.append('<option value="'+i[j].value+'" data-col="'+g[h].column+'" data-fname="'+h+'" data-findex="'+j+'">'+i[j].displayName+"</option>");e.bind("change",function(){var b=a(this).find("option:selected"),d=b.attr("data-fname"),e=w.options.data.filters[d]&&w.options.data.filters[d].options?w.options.data.filters[d].options[parseInt(b.attr("data-findex"))]:c;w.filter({filterType:parseInt(b.attr("data-col")),filterText:b.attr("value"),comparer:"undefined"!=typeof e?e.comparer:c})}),f("filtered","filterBar",function(a,b){var c=w.filterBar.find("."+w.baseClass+"-filterbar-select");c.children('option[value="'+b.text+'"][data-fname="'+b.type+'"]').attr("selected",!0)})}}}function u(){if("undefined"!=typeof w.options.actionBar){var b=w.main.find("."+w.baseClass+"-filterbar"),c=w.main.find("."+w.baseClass+"-actionbar"),d=a(w.options.actionBar).children();0===c.length&&(c=a('<div class="'+w.baseClass+'-actionbar"></div>'),0===b.length?c.prependTo(w.main):c.insertAfter(b)),d.length>0&&c.empty().append(a("<div />").addClass("btn-toolbar").append(d)),w.actionBar=c}}function v(b,c,d){var e=parseInt(b.paging.page);if(e=0==e?1:e,0===c.length)w._showMessage(w.options.texts.noDataToDisplay,!0);else for(var f=0;f<c.length;f++){var g=a("<tr />").appendTo(w.tbody).attr("data-page",e),h=c[f];if(a.isEmptyObject(h.attributes)||g.attr(h.attributes),!a.isEmptyObject(h.metaData))for(var i in h.metaData)h.metaData.hasOwnProperty(i)&&("rowstate"===i?g.attr("data-rowstate",h.metaData[i]):g.attr("data-meta-"+i,h.metaData[i]));if(h.cellData.length>0)for(var j=0;j<h.cellData.length;j++)g.append("<td>"+h.cellData[j]+"</td>");w._setStateClass(g,"row")}return a.isFunction(d)&&d(),!0}var w=b,x=this;return this.events={pageChanged:{listeners:[]},sorted:{listeners:[]},dataChanged:{listeners:[]},filtered:{listeners:[]}},{init:g,table:h,tableBody:n,buildTable:v}},_manipulating:function(b,c,d,e,f,g,h,i,j){function k(a,b,c){var d=g();if(!d||0===d.length)return!1;var e,f=0,h=d.length,k=p.compares[b];do{e=!1;for(var l=0;h-1>l;l++){var m=k(i(d,l,a,b),i(d,l+1,a,b),c)>0;m&&(j(d,l),e=!0)}if(f++,f>1e3)break;d=g()}while(e);return!0}function l(b,c){if(!("undefined"==typeof b||0>b)&&a.isFunction(g)&&a.isFunction(i)&&a.isFunction(j)&&a.isFunction(h)){var d=h(b);if(o._showWaiter("Sorting..."),p.last.column=b,p.last.dataColumn=b-o._getDataColumnIndexOffset(),p.last.direction=c?"asc":"desc",f(d))k(b,d,c),o.element.trigger("sorted",{type:d,column:b,asc:c}),o._hideWaiter();else if(e){var l=b-o._getDataColumnIndexOffset();o._clearData({preservePageIndex:!0}),o._queries.run({sortColumn:l,sortDirection:c?"asc":"desc",process:function(){o.element.trigger("sorted",{type:d,column:b,asc:c,build:!0}),o._hideWaiter()}})}}}function m(b,c,d,e){var f=g();if(!f||0===f.length)return!1;if(j(f,-1,!0),0===d.length)return!0;for(var h=f.length,k=a.isFunction(e)?function(a,b){return e(a,b)}:function(a,b){return 0===p.compares[c](a,b,!0)},l=0;h>l;l++)j(f,l,k(i(f,l,b,c),d));return!0}function n(b,c,d,k){var l=-1===b&&""===d,n=-1===b&&"search"===c;if(!("undefined"==typeof b||0>b&&!l&&!n||"string"!=typeof d)&&a.isFunction(g)&&a.isFunction(i)&&a.isFunction(j)&&a.isFunction(h)){var q=b,b=q+o._getDataColumnIndexOffset();if(o._showWaiter("Filtering..."),p.last.column=b,p.last.dataColumn=q,p.last.searchDataType=r,p.last.serverSearchType=c,p.last.searchValue=d,f(c)){var r=n?"string":h(b);if(!a.isFunction(p.compares[r])&&!l)return;m(b,r,d,k),o.element.trigger("filtered",{type:c}),o._hideWaiter()}else if(e&&(c||l)){var s=q;o._clearData({preservePageIndex:!0}),o._queries.run({searchType:l?null:c,searchText:l?null:d,columnIndex:s,process:function(){o.element.trigger("filtered",{type:c,text:d,build:!0}),o._hideWaiter()}})}}}var o=c,p=this;return p.last={column:-1,dataColumn:-1},"sort"===b?a.extend(p.last,{direction:"asc"}):a.extend(p.last,{searchDataType:null,serverSearchType:null,searchValue:null}),p.compares=d,"sort"===b?{asc:function(a){l(a,!0)},desc:function(a){l(a,!1)},lastSort:function(){return p.last}}:{filter:function(a,b,c,d){n(a,b,c,d)},search:function(a,b){n(a,"search",b)},lastFilter:function(){return p.last}}},_querying:function(b,d,e,f,g,h,i,j,k,l){function m(a,b){var c=e[a]?e[a]:e.base;if(a){var d=c.indexOf("?")>-1?"&":"?";c+=d+h.searchVal(a,b)}return c}function n(a,b){var c=a.indexOf("?")>-1?"&":"?";return a+c+h.page(b)+"&"+h.itemsPerPage()}function o(a,b,c){if("undefined"==typeof b||"undefined"==typeof c)return a;var d=a.indexOf("?")>-1?"&":"?";return a+d+h.sortColumn(b)+"&"+h.sortDirection(c)}function p(b,c){var d=b.indexOf("?")>-1?"&":"?";if(a.isArray(c))for(var e=0;e<c.length;e++){var f=c[e];("GET"===t.requestType||"querystring"===f.paramDestination.toLowerCase())&&(b+=d+f.paramName+"="+encodeURIComponent(f.paramValue),d="&")}return b}function q(){t.cacheTimeout&&clearInterval(t.cacheTimeout),t.cacheTimeout=c;do{var a=t.cache.pop();a&&a.uri!=t.lastQuery.uri&&(s({queryInfo:a}),t.cache=[])}while(t.cache.length>0);t.processing=!1}function r(b){if(b=b?b:{},b.uri)return b;"undefined"==typeof b.localSortColumn&&"undefined"!=typeof b.sortColumn&&(b.localSortColumn=b.sortColumn,b.sortColumn=u._data.getServerColumn(b.localSortColumn));var c=a.extend({page:v.currentIndex(),itemsPerPage:v.itemsPerPage(),searchText:t.lastQuery&&t.lastQuery.searchText?t.lastQuery.searchText:null,searchType:t.lastQuery&&t.lastQuery.searchType?t.lastQuery.searchType:null,localSortColumn:u._sorting.lastSort().dataColumn,sortColumn:u._data.getServerColumn(u._sorting.lastSort().dataColumn),sortDirection:u._sorting.lastSort().direction,injectedData:a.isFunction(i)?i():{}},b);return 1===c.page||!t.lastQuery||t.lastQuery.searchText===c.searchText&&t.lastQuery.searchType===c.searchType||(c.page=1),c.baseUri=1===c.page?m(c.searchType,c.searchText):t.lastQuery.baseUri,c.uri=p(o(n(c.baseUri,c.page),c.sortColumn,c.sortDirection),c.injectedData),"POST"===t.requestType&&(c.postUri=p(c.baseUri,c.injectedData)),c.uri===t.lastQuery.uri?t.lastQuery:(t.lastQuery=a.extend(!0,{},c),t.processing?(t.cache.push(c),t.cacheTimeout=setTimeout(function(){q()},1100),null):(t.processing=!0,c))}function s(b){var c=b.queryInfo?b.queryInfo:r(b);if(c){u._hideMessage("all"),u._showWaiter(),v.clear(),b.forceReload&&delete c.results,t.lastOptions=b;var d={error:function(a,b,d){u._log("error!"),delete t.lastQuery.results,t.lastQuery.errored=!0,t.error("retrival "+b+"\n"+d,c)},success:function(d,e,f){var g;a.isFunction(t.onRequestSuccess)&&(g=t.onRequestSuccess(d)),"undefined"!=typeof g&&(d=g),"undefined"==typeof d.meta.code||200==d.meta.code?(t.lastQuery.results=d,delete t.lastQuery.errored,t.success(d,c.searchType,b.process)):(t.error("server",c,d.meta),delete t.lastQuery.results,t.lastQuery.errored=!0)},complete:function(a,b){t.lastQuery.errored||u._hideWaiter(),clearInterval(t.timeoutCheck),q()}};if(c.results)d.success(c.results),d.complete();else{if("undefined"!=typeof f&&"undefined"!=typeof f.data&&"undefined"!=typeof f.dataParser){var e=f.dataParser(f.data.rows)(c);d.success(e),d.complete()}else{var g=c.baseUri.split("?")[0];if(g.toLowerCase().lastIndexOf(".js")===g.length-3){g.substr(0,g.length-3);a.ajax(a.extend(!0,{},d,{url:c.uri,dataType:"jsonp",jsonpCallback:"define",success:function(b){var e=null;e=a.isFunction(b.dataParser)&&b.data?b.dataParser(b.data.rows)(c):b,d.success(e),d.complete()}}))}else{var h="GET"===t.requestType?{url:c.uri,data:{}}:{url:c.postUri,data:function(b){var c=b.injectedData,d={page:b.page,itemsPerPage:b.itemsPerPage,searchText:b.searchText,searchType:b.searchType,sortColumn:b.sortColumn,sortDirection:b.sortDirection};if(a.isArray(c))for(var e=0;e<c.length;e++){var f=c[e],g=f.paramDestination;g="undefined"==typeof g?"postdata":g.toLowerCase(),"postdata"===g&&(d[f.paramName]=f.paramValue)}return d}(c)};a.ajax(a.extend(!0,d,{type:t.requestType,dataType:"json"},h))}}t.timeoutCheck=setTimeout(function(){t.processing&&(u._hideWaiter(),t.error("timeout",c))},4e3)}}}var t=this,u=b,v=g;return t.lastQuery={},t.lastOptions={},t.cache=[],t.cacheTimeout=c,t.requestType=d.toUpperCase(),t.processing=!1,t.error=k,t.success=j,t.onRequestSuccess=l,e&&h?{getLastQueryInfo:function(a){return t.lastQuery[a]},build:r,run:s,sourceData:function(a){"undefined"!=typeof f&&"undefined"!=typeof a&&(f.data=a)}}:void 0},__data:function(b,d){function e(a){for(var b=[],c=0;c<a.rows.length;c++)b[c]=f(a.rows[c]);return b}function f(b){var c={},d=[],e={};if(m.local&&m.local.cellData.length>0){for(var f=0;f<m.local.cellData.length;f++){var g=m.local.cellData[f];d[f]=b[g]}for(var f=0;f<m.local.attributes.length;f++){var g=m.local.attributes[f];c[g.name]=b[g.serverIndex]}l>-1&&(e=b[l])}else{for(var f=0;f<b.length;f++){var e=b[f];if(a.isPlainObject(e)){e=e,b.splice(f,1);break}}d=b}return{cellData:d,attributes:c,metaData:e}}function g(a){for(var b=[],c=0;c<a.length;c++)b.push(h(a[c]));return b}function h(b){var c=[];if(m.local&&m.local.cellData.length>0){for(var d=0;d<m.local.cellData.length;d++){var e=m.local.cellData[d];c[e]=b.cellData[d]}for(var d=0;d<m.local.attributes.length;d++){var e=m.local.attributes[d];c[e.serverIndex]=b.attributes[e.name]}l>-1&&(c[l]=b.metaData)}else{if(c=b.cellData,!a.isEmptyObject(b.attributes))for(var f in b.attributes)b.attributes.hasOwnProperty(f)&&c.push(b.attributes[f]);b.metaData&&c.push(b.metaData)}return c}function i(a){return"undefined"==typeof a||0>a?-1:m.local&&m.local.cellData.length>0?m.local.cellData[a]:a}function j(a){if("undefined"==typeof a||0>a)return-1;if(!(m.local&&m.local.length>0))return a;for(var b=0;b<m.local.cellData.length;b++)return m.local.cellData[b]===a,b}var k=[],l=-1,m={server:d,local:c};if(d&&d.length>0)for(var n=0;n<d.length;n++){var o=d[n];o.hasOwnProperty("dataAttr")&&k.push("data-data-"+o.dataAttr)}return function(){var a=[],b=[],c=[];if(m.server&&m.server.length>0){for(var d=0;d<m.server.length;d++){var e=m.server[d];e.hasOwnProperty("dataAttr")?c.push({name:"data-data-"+e.dataAttr,serverIndex:d}):e.hasOwnProperty("meta")?l=d:e.hasOwnProperty("tableCol")?a[e.tableCol]=d:b.push(d)}for(var d=0;d<a.length;d++){a[d];"undefined"==typeof a[d]&&d!==l&&(a[d]=b.shift())}b.length>0&&(a=a.concat(b))}m.local={attributes:c,cellData:a}}(),{attrNames:k,parseForLocal:e,parseRowForLocal:f,parseForServer:g,parseRowForServer:h,getLocalColumn:j,getServerColumn:i}},_create:function(){var b=this;this.element.addClass(this.baseClass),b.element.show().css("visibility",""),b._showWaiter(),this._dataIsRemote="string"==typeof this.options.data.baseUri,this._dataIsLocalJson=a.isPlainObject(this.options.data.source),this._compares=a.extend(!0,this._compares,this.options.compares),this._itemsPerPageOptions=a.isArray(this.options.itemsPerPageOptions)?this.options.itemsPerPageOptions:this._itemsPerPageOptions,this.options.showPaging===!0&&(this.options.showPaging="both"),this._showPaging="undefined"!=typeof this.options.showPaging&&"both top bottom".indexOf(this.options.showPaging)>-1,this._showPaging||(this.options.showPaging="none"),this._togglePaging=this.options.togglePagingOnNeed===!0,-1===this.options.itemsPerPage&&(this.options.itemsPerPage=this._itemsPerPageOptions[0]),this._paging=this.__paging(this,function(a){var c=b._getActiveRows(),d=a?a:b._paging.pageCount();a=a?a:1;for(var e=a;d>=e;e++){var f=b._paging.boundaries(e);c.slice(f.start,f.end).attr("data-page",e)}}),this._sorting=this._manipulating("sort",this,this._compares,this._dataIsRemote,function(a){return b._canSortLocal(a)},function(){return b._getActiveRows()},function(a){return b._getColumnDataType(a)},function(a,c,d,e){return b._getCellValue(a,c,d,e)},function(a,c){return b._flipRows(a,c)}),this._filtering=this._manipulating("filter",this,this._compares,this._dataIsRemote,function(a){return b._canFilterLocal(a)},function(){return b._getAllRows()},function(a){return b._getColumnDataType(a)},function(a,c,d,e){return b._getCellValue(a,c,d,e)},function(a,c,d){return b._activateRow(a,c,d)});var c=this.options.data;if(this._dataIsRemote){var d={page:function(a){return c.params.page.replace("[page]",a?a:b._paging.currentIndex())},itemsPerPage:function(){return c.params.itemsPerPage.replace("[ipp]",b._paging.itemsPerPage())},sortDirection:function(a){return c.params.sortDirection.replace("[sortdir]",a?a:b._sorting.lastSort().direction)},sortColumn:function(a){return c.params.sortColumn.replace("[sortcol]","number"==typeof a?a:b._data.getServerColumn(b._sorting.lastSort().column))},searchVal:function(a,b){return c.filters[a].param.replace("[searchVal]",b)}},e={base:c.baseUri};for(var f in c.filters)c.filters.hasOwnProperty(f)&&(e[f]=c.filters[f].uri);this._queries=this._querying(this,"POST"===c.requestType?"POST":"GET",e,c.source,this._paging,d,c.extraRequestData,function(a,c,d){var e=a.meta.paging.page,f=a.meta.paging.totalItemCount,g=(a.meta.paging.itemsPerPage,b._data.parseForLocal(a.data));b._paging.derive(e,f),b._formatting.buildTable(a.meta,g,d)},function(a,c,d){b._showMessage(null,!1,a,c)},c.onRequestSuccess)}this._data=new this.__data(this,c.map),a.isArray(this.options.actionStates)&&(this._actionStates=this._actionStates.concat(this.options.actionStates)),a.isArray(this.options.statusStates)&&(this._statusStates=this._statusStates.concat(this.options.statusStates)),a.isArray(this.options.renderStates)&&(this._renderStates=this._renderStates.concat(this.options.renderStates)),a.isArray(this.options.selectionStates)&&(this._selectionStates=this._selectionStates.concat(this.options.selectionStates)),this._renders=a.extend(!0,{},this._renders,this.options.renders),this._renderBaseTypes=a.extend(!0,{},this._renderBaseTypes,this.options.renderBaseTypes),this._renders.options=a.extend(!0,{},this._renderOptions,this.options.renderOptions);for(var g in this._renders)this._renders.hasOwnProperty(g)&&(this._renderBaseTypes.hasOwnProperty(g)||(this._renderBaseTypes[g]="text"));this._rendering=new this.__rendering(this,this._renders,this._renderStates,this._renderBaseTypes,this.options.cellEditActionOnClick),b._hideWaiter(),this._formatting=this.__formatting(this),
this._formatting.init(),a.isFunction(this.options.onOpen)&&this.options.onOpen(this.element)},_isIE:function(a){return a&&a.constructor==Number?ux.util.ua.ie&&ux.util.ua.major<=a:ux.util.ua.ie},_getDataColumnIndexOffset:function(){return this.tbody.children("tr:eq(0)").children('td[data-sourcedata="true"]').eq(0).index()},_getAllRows:function(){return this.tbody.children("tr")},_getActiveRows:function(){return this.tbody.children('tr:not([data-inactive="true"])')},_getDisplayedRows:function(){return this.tbody.children("tr:visible")},_getColumnDataType:function(a){return this.thead.children("tr:eq(0)").children("th:eq("+a+")").attr("data-type")},_getCellValue:function(a,b,c,d){d||(d=this._getColumnDataType(c));var e=a.eq(b).children("td:eq("+c+")");return e.attr("data-raw")},_getRowData:function(b){var c={attributes:{},cellData:[],metaData:{}},d=this._getRow(b);if(!d||0===d.length)return c;var e=function(a,b){for(var c,e=d.get(0),f={},g=0,h=e.attributes,i=h.length;i>g;g++)c=h.item(g),0===c.nodeName.indexOf(a)&&(f[b?c.nodeName.replace(a,""):c.nodeName]=c.nodeValue);return f};if(this._data.attrNames.length>0)for(var f=0;f<this._data.attrNames.length;f++){var g=this._data.attrNames[f];d.attr(g)&&(c.attributes[g]=d.attr(g))}else c.attributes=e("data-data-");return d.children("td[data-sourcedata]").each(function(b){c.cellData.push(a(this).attr("data-raw"))}),c.metaData=e("data-meta-",!0),c},_getGridRowsFilter:function(b){function d(b,c){for(var d="",e=0;e<b.length;e++){var g=b[e],i=g.name.indexOf(c)>-1?g.name:c+g.name;if("undefined"!=typeof g.compare){var j="string"==typeof g.compare&&"undefined"!=typeof h._compares[g.compare]?h._compares[g.compare]:a.isFunction(g.compare)?g.compare:h._compares.string;f.push(function(a,b,c){return function(d){var e=0===b(d.attr(c),a.value,!0);return a.exists===!1?!e:e}}(g,j,i))}else{var k="[";k+=i,g.value&&(k+=(g.operator?g.operator:"=")+'"'+g.value+'"'),k+="]",g.exists===!1&&(k=":not("+k+")"),d+=k}}return d}var e=c,f=[],g=c,h=this;if(b){if(e="",b.hasOwnProperty("metaData")&&(e+=d(b.metaData,"data-meta-")),b.hasOwnProperty("attributes")&&(e+=d(b.attributes,"data-data-")),b.hasOwnProperty("cellData"))for(var i=0;i<b.cellData.length;i++){var j=b.cellData[i];if(null!==j){j=j.hasOwnProperty("column")?j:{value:j,column:i};var k=this._data.getLocalColumn(j.column)+this._getDataColumnIndexOffset();if("undefined"!=typeof j.compare){var l=h._getColumnDataType(k),m=j.compare===!0&&"undefined"!=typeof h._compares[l]?h._compares[l]:"string"==typeof j.compare&&"undefined"!=typeof h._compares[j.compare]?h._compares[j.compare]:a.isFunction(j.compare)?j.compare:h._compares.string;f.push(function(a,b,c){return function(d){var e=d.children(":eq("+c+")"),f=0===b(e.attr("data-raw"),a.value,!0);return a.exists===!1?!f:f}}(j,m,k))}else k+=1,e+=":has(td:nth-of-type("+k+")[data-raw"+(j.operator?j.operator:"=")+'"'+j.value+'"])'}}""===e&&(e=c)}return f.length>0&&(g=function(b){for(var c=!0,d=0;d<f.length;d++)if(!f[d](a(this))){c=!1;break}return c}),{selector:e,func:g}},_getGridRows:function(b,c){var d=c?this._getAllRows():this._getActiveRows();return"undefined"!=typeof b&&("undefined"!=typeof b.selector&&(d=d.filter(b.selector)),a.isFunction(b.func)&&(d=d.filter(b.func))),d},_getTableData:function(a,b){var c=this._getGridRows(a,b);return this._getGridRowsData(c)},_getGridRowsData:function(b){var c=[],d=this;return b.length>0&&b.each(function(){c.push(d._getRowData(a(this)))}),c},_getRow:function(a){var b;if("number"==typeof a)b=this.tbody.find("tr:eq("+a+")");else{if(0===a.length)return b;b=a}return b},_flipRows:function(a,b){var c=a.eq(b),d=a.eq(b+1);c.insertAfter(d)},_activateRow:function(a,b,c){"undefined"==typeof c&&(c=!0);var d=b>-1?a.eq(b):a;c?d.removeAttr("data-inactive").show():d.attr("data-inactive","true").hide()},_changeCellState:function(a,b){if(a&&0!==a.length){a.attr("data-cellstate",b),this._setStateClass(a,"cell");var c=this.thead.find("th").eq(a.index()).attr("data-render");this._rendering[c](a,b)}},_setStateClass:function(b,c){if(b="row"===c?this._getRow(b):b,!b||0===b.length)return!1;b.attr("data-"+c+"state")||b.attr("data-"+c+"state","display");var d=this._allRenderRowClasses;if(!d){d="";for(var e=0;e<this._renderStates.length;e++)d+="sf-datagrid-"+c+"state-"+this._renderStates[e]+" ";d=a.trim(d),this._allRenderRowClasses=d}"cell"===c&&(d=d.replace(/row/gi,"cell")),b.removeClass(d),b.addClass("sf-datagrid-"+c+"state-"+b.attr("data-"+c+"state"))},_restoreRow:function(b){var c=this,d=this._getRow(b);return d&&0!==d.length?void d.children('td[data-sourcedata="true"]').each(function(){c._restoreCell(a(this))}):!1},_restoreCell:function(a){if(!a||0===a.length)return!1;var b=a.attr("data-preedit");b&&a.attr("data-raw")!==b&&a.attr("data-raw",b).removeAttr("data-preedit")},_showWaiter:function(a){var b=this,c=b.main&&b.main.length>0?b.main:b.element;a=a?a:b.options.texts.loading,b._fixZForOverlay(c),c.sfMsgOverlay({message:a})},_hideWaiter:function(){var a=this,b=a.main&&a.main.length>0?a.main:a.element;b.sfMsgOverlay("destroy"),a._fixZForOverlay(b,!1)},_fixZForOverlay:function(a,b){var c=this;b!==!1?0===ux.util.zIndex.getAssigned(a)&&(a.css("zIndex",1),c.fixedZ=!0):c.fixedZ===!0&&(a.css("zIndex",""),c.fixedZ=!1)},_showMessage:function(a,b,c,d){var e=this,f=b===!0?e.tableWrap:e.main&&e.main.length>0?e.main:e.element;a="string"==typeof a?a:e.options.texts.dataRetrivalError,b&&(f.css({"min-height":"100px",height:"100%",overflow:"hidden"}),f.width(e.table.width())),e._fixZForOverlay(f),f.sfMsgOverlay({message:a,style:null})},_hideMessage:function(a){a="all,table,main".indexOf(a)>-1?a:"all";var b,c=this;"all,main".indexOf(a)>-1&&(b=c.main&&c.main.length>0?c.main:c.element,b.sfMsgOverlay({message:null})),"all,table".indexOf(a)>-1&&(c.tableWrap.sfMsgOverlay({message:null}),c.tableWrap.css({"min-height":"",height:"",width:"",overflow:""}),c.table.css("height","")),c._fixZForOverlay(b,!1)},_canSortLocal:function(b){var c=!this._dataIsRemote;return c||(c=this._dataIsRemote&&this._paging.itemCount()<=this._getActiveRows().length),c&&(c=a.isFunction(this._compares[b])),c},_canFilterLocal:function(){return!this._dataIsRemote},_clearData:function(b){b=a.extend({},{clearPaging:!0,preservePageIndex:!1},b),this.tbody.children("tr").remove(),b.clearPaging&&this._paging.clear(b.preservePageIndex)},destroy:function(a){this.main.remove(),this._execSuper("destroy",a)},sortColumn:function(a){var b=this.thead.children("tr:eq(0)").children("th:eq("+a+")"),c=b.attr("data-sort");c=c&&"desc"!==c&&"inactive"!==c?"desc":"asc",this._sorting[c](a)},updateRow:function(b){var c=this,d=this._getRow(b.row),e=b.rowData;if(d&&0!==d.length){var f=this._data.parseRowForLocal(e);if(f.attributes)for(var g in f.attributes)f.attributes.hasOwnProperty(g)&&d.attr(g,f.attributes[g]);c._setStateClass(d,"row"),d.children("td[data-sourcedata]").each(function(b){if(f.cellData[b]){var d=a(this);d.attr("data-raw",f.cellData[b]);var e=c.thead.find("th").eq(d.index()).attr("data-render");c._rendering[e](d)}}),c.updateRowStatus({row:d,metaData:f.metaData})}},updateRowStatus:function(b){var c=this._getRow(b.row);if(!c||0===c.length)return!1;var d=b.removeIfEmpty===!0?!0:!1,e=[];if(this._dir(b.metaData),b.metaData)for(var f in b.metaData)if(b.metaData.hasOwnProperty(f))if(d&&0===b.metaData[f].length)c.removeAttr("data-meta-"+f),e.push({name:f,action:"removed",value:null});else{var g=c.attr("data-meta-"+f);g!==b.metaData[f]&&(c.attr("data-meta-"+f,b.metaData[f]),e.push({name:f,action:"changed",value:b.metaData[f]}))}a.isFunction(this.options.onRowMetaDataChange)&&this.options.onRowMetaDataChange(e,c,this._getRowData(c)),this.selectRow({row:c,stateOverride:c.is('[data-meta-selected="true"]'),suppressOnRowMetaDataChange:!0}),this.updateRowErrorStatus({row:c})},changeRowState:function(b){var c=this,d=this._getRow(b.row);if(!d||0===d.length)return!1;var e=a.inArray(b.state,c._actionStates)>-1?b.state:"display",f=a.inArray(b.state,c._renderStates)>-1?b.state:"display";(d.attr("data-rowstate")!==e||b.forceRefresh)&&(d.attr("data-rowstate",e).removeClass("sf-datagrid-hover"),c._setStateClass(d,"row"),c._setActionButtonsForRow(d,e),d.children().filter('[data-sourcedata="true"]').each(function(b){var d=a(this),e=c.thead.find('th[data-sourcedata="true"]').eq(b).attr("data-render");c._rendering[e](d,f)}))},_setActionButtonsForRow:function(b,c){"undefined"==typeof c&&(c=b.attr("data-rowstate"));var d=b.children('[data-controlcol="action"]').find("a").hide().filter('[data-showonstate~="'+c+'"]');d=d.filter(function(){var b=a(this),c=b.parents("tr"),d=b.attr("data-showonstate");if(0===d.length)return!0;var e=d.split(" ");e=a.grep(e,function(a){return a.length>0?"+!".indexOf(a.substr(0,1))>-1:!1});for(var f=!0,g=0;g<e.length;g++){var h=e[g].split("="),i=h[0].substr(1),j=h[0].substr(0,1),k=h.length>1?h[1]:"",l=c.is("[data-meta-"+i+"]");l=l&&(""===k||""!==k&&c.attr("data-meta-"+i)===k),f&&(f=l&&"+"===j||!l&&"!"===j)}return f}),d.show()},cancelEdits:function(b){b=a.extend({type:"both",callbacks:!0},b);var c="cell,both".indexOf(b.type)>-1,d="row,both".indexOf(b.type)>-1;if(c)if(b.callbacks)a('[data-tableid="'+this.id+'"].sf-datagrid-celleditbtns a.uxicon-no').trigger("click");else{var e=this.tbody.find('td[data-cellstate="edit"]');this._restoreCell(e),this._changeCellState(e,"display"),a('[data-tableid="'+this.id+'"].sf-datagrid-celleditbtns').remove()}if(d)if(b.callbacks)this.tbody.find('tr[data-rowstate="edit"] a[data-action="cancel"]').trigger("click");else{var d=this.tbody.find('tr[data-rowstate="edit"]');this._restoreRow(d),this.changeRowState({row:d,state:"display",forceRefresh:!0})}},changeCellState:function(a){this.cancelEdits({type:"cell",callbacks:!1}),this._changeCellState(a.td,a.state?a.state:"display")},selectRow:function(b){var c=this,d=this._getRow(b.row);if(!d||0===d.length)return!1;var e=c.options.selectMode,f="sf-datagrid-selected active",g="true"===d.attr("data-meta-selected"),h=b.stateOverride===!0||"undefined"==typeof b.stateOverride&&!("true"===d.attr("data-meta-selected"));"multi"===e?d.find("td."+c.baseClass+"-batchselect input").attr("checked",h):"single"===e&&h&&c.tbody.children("tr.sf-datagrid-selected").removeClass(f).attr("data-meta-selected","false"),d[h?"addClass":"removeClass"](f).attr("data-meta-selected",h),c._setActionButtonsForRow(d),h!==g&&(a.isFunction(c.options.onRowSelectChange)&&c.options.onRowSelectChange(d,h),!b.suppressOnRowMetaDataChange&&a.isFunction(c.options.onRowMetaDataChange)&&c.options.onRowMetaDataChange([{name:"selected",action:"changed",value:h}],d,c._getRowData(d)))},deleteRow:function(b){var c=this._getRow(b.row);if(!c||0===c.length)return!1;var d=c.find(":sf-tipper(target)");d.each(function(){a(this).sfTipper({destroy:!0})}),c.remove(),this._dataIsRemote&&!this._dataIsLocalJson?(this._clearData({clearPaging:!1}),this._paging.refreshPage(!0)):this._paging.rePage(this._paging.itemCount()-1)},updateRowErrorStatus:function(a){var b=this,c=this._getRow(a.row);return c&&0!==c.length?("undefined"!=typeof a.error&&(a.error===!1||"false"===a.error?c.removeAttr("data-meta-error"):c.attr("data-meta-error",a.error)),"false"===c.attr("data-meta-error")&&c.removeAttr("data-meta-error"),c[c.is("[data-meta-error]")?"addClass":"removeClass"]("sf-datagrid-error danger"),void b._setActionButtonsForRow(c)):!1},filter:function(a){var b=a.filterType,d=a.filterText,e=c,f=this.options.data.filters;if("string"==typeof b&&f&&f[b])e=f[b].column;else if("number"==typeof b&&(e=b,b=c,f))for(var g in f)if(f.hasOwnProperty(g)&&f[g].column===e){b=g;break}"undefined"!=typeof e&&this._filtering.filter(e,b,d,a.comparer)},search:function(a){this._filtering.filter(-1,"search",a)},changeItemsPerPage:function(a){a="all"===a?this._paging.itemCount():parseInt(a),this._dataIsRemote&&this._clearData({clearPaging:!1}),this._paging.itemsPerPage(isNaN(a)?this._itemsPerPageOptions[0]:a)},changePage:function(a){this._paging.changePage(a)},updateDataSource:function(a){this._dataIsLocalJson&&this._queries.sourceData(a)},refreshPage:function(a,b){"undefined"!=typeof a&&(a.clearData||a.forceReload)&&(b=a.clearData,a=a.forceReload),a="undefined"==typeof a?!0:a,b="undefined"==typeof b?!0:b,this._dataIsRemote&&!this._dataIsLocalJson&&b===!0?this._clearData({clearPaging:!1}):this._dataIsRemote&&this._dataIsLocalJson&&b===!0&&this._clearData({clearPaging:!0,preservePageIndex:!0}),this._paging.refreshPage(a)},getGridRows:function(b){b=a.extend(!0,{includeInactive:!0,filter:null},b);var c=this._getGridRowsFilter(b.filter);return this._getGridRows(c,b.includeInactive)},getGridData:function(b){if(b&&b.rows&&b.rows.length>0)return this._getGridRowsData(b.rows);b=a.extend(!0,{includeInactive:!0,filter:null},b);var c=this._getGridRowsFilter(b.filter);return this._getTableData(c,b.includeInactive)},doAction:function(b,c){var d=this;if("undefined"==typeof b)return!1;b.hasOwnProperty("row")&&(c=b.actionIndex,b=this._getRow(b.row));var e=typeof c;if(-1==="number,string".indexOf(e))return!1;var f;if("number"===e){if(-1>c||c>d.options.rowActions.length-1)return!1;f=d.options.rowActions[c]}else if("string"===e){if(c.length<1)return!1;for(var g=0;g<d.options.rowActions.length;g++)if(d.options.rowActions[g].action===c){f=d.options.rowActions[g];break}}if("undefined"==typeof f)return!1;if(!b||0===b.length)return!1;var h=b.attr("data-rowstate");"!same!"!==f.onClickRowState&&("cancel"!==f.action&&d.cancelEdits({type:"cell",callbacks:!1}),d.changeRowState({row:b,state:f.onClickRowState?f.onClickRowState:f.action}));var i=function(c,e,f,g){c===!0?f?d.deleteRow({row:b}):d.updateRow({row:b,rowData:e}):d._restoreRow(b),"!same!"!==g&&(g=a.inArray(g,d._actionStates)>0?g:"display",d.changeRowState({row:b,state:g,forceRefresh:!0}))};if(a.isFunction(f.onClick)){var j=d._getRowData(b),k=d._data.parseRowForServer(j);f.onClick(d.element,k,f.action,i,h)}},doBatch:function(b){var c=this;if("undefined"!=typeof b&&(-1!=="number,string".indexOf(typeof b.actionIndex)||"undefined"!=typeof b.action)){var d="undefined"!=typeof b.rows?b.rows:c.getGridRows(b);if("undefined"!=typeof d&&0!==d.length){var e=a.isFunction(b.action)?b.action:function(a){c.doAction(a,b.actionIndex)};d.each(function(){e(a(this),c.element)})}}},selectedRows:function(){return this.tbody.find('tr[data-meta-selected="true"]')},currentPage:function(){return this._paging.currentIndex()},currentItemsPerPage:function(){return this._paging.itemsPerPage()}};ux.util.module("DataGrid",e)}(jQuery,ux.i18n),function(a,b){function c(a,b,c,d,e){this.i={},this.uid=function(){return this.uidd||(this.uidd=(new Date).getTime()),this.uidd++};var f=null;if("string"==typeof a)var g=d.ext.document().getElementById(a);else var g=a;g&&"object"==typeof g&&g.tagName&&"input"!=String(g.tagName).toLowerCase()&&(f=g),g=null,"object"==typeof a&&a.length||(a=[a]);for(var h=0;h<a.length;h++)"string"==typeof a[h]&&(a[h]=d.intr.document().getElementById(a[h])||null),null!=a[h]&&a[h].tagName&&"input"==String(a[h].tagName).toLowerCase()&&(this.i[this.uid()]=a[h]),a[h]=null;this.skin=b||"dhx_skyblue",this.setSkin=function(a){this.skin=a,this.base.className="dhtmlxcalendar_container dhtmlxcalendar_skin_"+this.skin},this.base=d.ext.document().createElement("DIV"),this.base.className="dhtmlxcalendar_container",this.base.style.display="none",null!=f?(this._hasParent=!0,f.appendChild(this.base),f=null):d.ext.body().appendChild(this.base),this.setParent=function(a){this._hasParent&&("object"==typeof a?a.appendChild(this.base):"string"==typeof a&&d.ext.document().getElementById(a).appendChild(this.base))},this.setSkin(this.skin),this.base.onclick=function(a){a=a||event,a.cancelBubble=!0},this.loadUserLanguage=function(a){if(this.langData[a]&&(this.lang=a,this.setWeekStartDay(this.langData[this.lang].weekstart),this.msCont))for(var b=0,c=0;c<this.msCont.childNodes.length;c++)for(var d=0;d<this.msCont.childNodes[c].childNodes.length;d++)this.msCont.childNodes[c].childNodes[d].innerHTML=this.langData[this.lang].monthesSNames[b++]},this.contMonth=d.ext.document().createElement("DIV"),this.contMonth.className="dhtmlxcalendar_month_cont",this.contMonth.onselectstart=function(a){return a=a||event,a.cancelBubble=!0,a.returnValue=!1,!1},this.base.appendChild(this.contMonth);var i=d.ext.document().createElement("UL");i.className="dhtmlxcalendar_line",this.contMonth.appendChild(i);var j=d.ext.document().createElement("LI");j.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr",j.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span class='dhtmlxcalendar_month_label_month'>Month</span><span class='dhtmlxcalendar_month_label_year'>Year</span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>",i.appendChild(j);var k=this;j.onclick=function(a){a=a||event;var b=a.target||a.srcElement;if(b.className&&"arrow"==b.className&&(b=b.parentNode),b.className&&0===b.className.indexOf("dhtmlxcalendar_month_arrow")){k._hideSelector();var c=b.parentNode.firstChild==b?-1:1;return void k._drawMonth(new Date(k._activeMonth.getFullYear(),k._activeMonth.getMonth()+c,1,0,0,0,0))}return b.className&&"dhtmlxcalendar_month_label_month"==b.className?(a.cancelBubble=!0,k._showSelector("month",68,38,"selector_month",!0),void k.callEvent("onShowMonthSelector",[b])):b.className&&"dhtmlxcalendar_month_label_year"==b.className?(a.cancelBubble=!0,k._showSelector("year",100,38,"selector_year",!0),void k.callEvent("onShowYearSelector",[b])):void k._hideSelector()},this.contDays=d.ext.document().createElement("DIV"),this.contDays.className="dhtmlxcalendar_days_cont",this.base.appendChild(this.contDays),this.setWeekStartDay=function(a){0==a&&(a=7),this._wStart=Math.min(Math.max(isNaN(a)?1:a,1),7),this._drawDaysOfWeek()},this._drawDaysOfWeek=function(){if(0==this.contDays.childNodes.length){var a=d.ext.document().createElement("UL");a.className="dhtmlxcalendar_line",this.contDays.appendChild(a)}else var a=this.contDays.firstChild;var b=this._wStart,c=this.langData[this.lang].daysSNames;c.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var e=0;7>e;e++){if(null==a.childNodes[e]){var f=d.ext.document().createElement("LI");a.appendChild(f)}else var f=a.childNodes[e];f.className="dhtmlxcalendar_cell"+(b>=6?" dhtmlxcalendar_day_weekday_cell":"")+(0==e?"_first":""),f.innerHTML=c[b],++b>7&&(b=1)}null!=this._activeMonth&&this._drawMonth(this._activeMonth)},this._wStart=this.langData[this.lang].weekstart,this.setWeekStartDay(this._wStart),this.contDates=d.ext.document().createElement("DIV"),this.contDates.className="dhtmlxcalendar_dates_cont",this.base.appendChild(this.contDates),this.contDates.onclick=function(a){a=a||event;var b=a.target||a.srcElement;if(null!=b._date&&!b._css_dis){var c=k._activeDate.getHours(),d=k._activeDate.getMinutes();if(k.checkEvent("onBeforeChange")&&!k.callEvent("onBeforeChange",[new Date(b._date.getFullYear(),b._date.getMonth(),b._date.getDate(),c,d)]))return;null!=k._activeDateCell&&(k._activeDateCell._css_date=!1,k._updateCellStyle(k._activeDateCell._q,k._activeDateCell._w));var e=k._hasParent&&k._activeDate.getFullYear()+"_"+k._activeDate.getMonth()!=b._date.getFullYear()+"_"+b._date.getMonth();k._activeDate=new Date(b._date.getFullYear(),b._date.getMonth(),b._date.getDate(),c,d),k._activeDateCell=b,k._activeDateCell._css_date=!0,k._activeDateCell._css_hover=!1,k._lastHover=null,k._updateCellStyle(k._activeDateCell._q,k._activeDateCell._w),e&&k._drawMonth(k._activeDate),k._activeInp&&k.i[k._activeInp]&&(k.i[k._activeInp].value=k._dateToStr(new Date(k._activeDate.getTime()))),k._hasParent||k._hide(),k.callEvent("onClick",[new Date(k._activeDate.getTime())])}},this.contDates.onmouseover=function(a){a=a||event;var b=a.target||a.srcElement;null!=b._date&&(b._css_hover=!0,k._updateCellStyle(b._q,b._w),k._lastHover=b)},this.contDates.onmouseout=function(){k._clearDayHover()},this._lastHover=null,this._clearDayHover=function(){this._lastHover&&(this._lastHover._css_hover=!1,this._updateCellStyle(this._lastHover._q,this._lastHover._w),this._lastHover=null)};for(var h=0;6>h;h++){var i=d.ext.document().createElement("UL");i.className="dhtmlxcalendar_line",this.contDates.appendChild(i);for(var l=0;7>l;l++){var j=d.ext.document().createElement("LI");j.className="dhtmlxcalendar_cell",i.appendChild(j)}}this.contTime=d.ext.document().createElement("DIV"),this.contTime.className="dhtmlxcalendar_time_cont",this.base.appendChild(this.contTime),this.showTime=function(){String(this.base.className).search("dhtmlxcalendar_time_hidden")>0&&(this.base.className=String(this.base.className).replace(/dhtmlxcalendar_time_hidden/gi,""))},this.hideTime=function(){String(this.base.className).search("dhtmlxcalendar_time_hidden")<0&&(this.base.className+=" dhtmlxcalendar_time_hidden")};var i=d.ext.document().createElement("UL");i.className="dhtmlxcalendar_line",this.contTime.appendChild(i);var j=d.ext.document().createElement("LI");j.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr",j.innerHTML="<div class='dhtmlxcalendar_time_label'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'>:</span><span class='dhtmlxcalendar_label_minutes'></span>",i.appendChild(j),j.onclick=function(a){a=a||event;var b=a.target||a.srcElement;return b.className&&"dhtmlxcalendar_label_hours"==b.className?(a.cancelBubble=!0,void k._showSelector("hours",3,115,"selector_hours",!0)):b.className&&"dhtmlxcalendar_label_minutes"==b.className?(a.cancelBubble=!0,void k._showSelector("minutes",59,115,"selector_minutes",!0)):void k._hideSelector()},this._activeMonth=null,this._activeDate=new Date,this._activeDateCell=null,this.setDate=function(a){""===a&&(a=new Date),a instanceof Date||(a=this._strToDate(a,!1)),"Invalid Date"===a&&(a=new Date);var b=a.getTime();this._isOutOfRange(b)||(this._activeDate=new Date(b),this._drawMonth(this._activeDate),this._updateVisibleHours(),this._updateVisibleMinutes())},this.getDate=function(a){var b=new Date(this._activeDate.getTime());return a?this._dateToStr(b):b},this._drawMonth=function(a){if(a instanceof Date){isNaN(a.getFullYear())&&(a=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0)),this._activeMonth=new Date(a.getFullYear(),a.getMonth(),1,0,0,0,0),this._activeDateCell=null;var b=new Date(this._activeMonth.getTime()),c=b.getDay(),d=c-this._wStart;0>d&&(d+=7),b.setDate(b.getDate()-d);for(var e=a.getMonth(),f=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime(),g=0,h=0;6>h;h++)for(var i=this._wStart,j=0;7>j;j++){var k=new Date(b.getFullYear(),b.getMonth(),b.getDate()+g++,0,0,0,0);this.contDates.childNodes[h].childNodes[j].innerHTML=k.getDate();var l=(k.getDay(),k.getTime());this.contDates.childNodes[h].childNodes[j]._date=new Date(l),this.contDates.childNodes[h].childNodes[j]._q=h,this.contDates.childNodes[h].childNodes[j]._w=j,this.contDates.childNodes[h].childNodes[j]._css_month=k.getMonth()==e,this.contDates.childNodes[h].childNodes[j]._css_date=l==f,this.contDates.childNodes[h].childNodes[j]._css_weekend=i>=6,this.contDates.childNodes[h].childNodes[j]._css_dis=this._isOutOfRange(l),this.contDates.childNodes[h].childNodes[j]._css_holiday=1==this._holidays[l],this._updateCellStyle(h,j),l==f&&(this._activeDateCell=this.contDates.childNodes[h].childNodes[j]),++i>7&&(i=1)}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this.langData[this.lang].monthesFNames[a.getMonth()],this.contMonth.firstChild.firstChild.childNodes[2].innerHTML=a.getFullYear()}},this._updateCellStyle=function(a,b){var c=this.contDates.childNodes[a].childNodes[b],d="dhtmlxcalendar_cell dhtmlxcalendar_cell";d+=c._css_month?"_month":"",d+=c._css_date?"_date":"",d+=c._css_weekend?"_weekend":"",d+=c._css_holiday?"_holiday":"",d+=c._css_dis?"_dis":"",d+=c._css_hover&&!c._css_dis?"_hover":"",c.className=d,c=null},this._initSelector=function(a,b){if(this._selCover||(this._selCover=d.ext.document().createElement("DIV"),this._selCover.className="dhtmlxcalendar_selector_cover",this.base.appendChild(this._selCover)),this._sel||(this._sel=d.ext.document().createElement("DIV"),this._sel.className="dhtmlxcalendar_selector_obj",this.base.appendChild(this._sel),this._sel.appendChild(d.ext.document().createElement("TABLE")),this._sel.firstChild.className="dhtmlxcalendar_selector_table",this._sel.firstChild.cellSpacing=0,this._sel.firstChild.cellPadding=0,this._sel.firstChild.border=0,this._sel.firstChild.appendChild(d.ext.document().createElement("TBODY")),this._sel.firstChild.firstChild.appendChild(d.ext.document().createElement("TR")),this._sel.firstChild.firstChild.firstChild.appendChild(d.ext.document().createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(d.ext.document().createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(d.ext.document().createElement("TD")),this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left",this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle",this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right",this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="",this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="",this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(a){a=a||event,a.cancelBubble=!0,k._scrollYears(-1)},this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(a){a=a||event,a.cancelBubble=!0,k._scrollYears(1)},this._sel._ta={},this._selHover=null,this._sel.onmouseover=function(a){a=a||event;var b=a.target||a.srcElement;b._cell===!0&&(k._selHover!=b&&k._clearSelHover(),null!=String(b.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)&&(b.className+=" dhtmlxcalendar_selector_cell_hover",k._selHover=b))},this._sel.onmouseout=function(){k._clearSelHover()},this._sel.appendChild(d.ext.document().createElement("DIV")),this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"),1!=this._sel._ta[a]){if("month"==a){this._msCells={},this.msCont=d.ext.document().createElement("DIV"),this.msCont.className="dhtmlxcalendar_area_"+b,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);for(var c=0,e=0;4>e;e++){var f=d.ext.document().createElement("UL");f.className="dhtmlxcalendar_selector_line",this.msCont.appendChild(f);for(var g=0;3>g;g++){var h=d.ext.document().createElement("LI");h.innerHTML=this.langData[this.lang].monthesSNames[c],h.className="dhtmlxcalendar_selector_cell",f.appendChild(h),h._month=c,h._cell=!0,this._msCells[c++]=h}}this.msCont.onclick=function(a){a=a||event,a.cancelBubble=!0;var b=a.target||a.srcElement;null!=b._month&&(k._hideSelector(),k._updateActiveMonth(),k._drawMonth(new Date(k._activeMonth.getFullYear(),b._month,1,0,0,0,0)),k._doOnSelectorChange())}}if("year"==a){this._ysCells={},this.ysCont=d.ext.document().createElement("DIV"),this.ysCont.className="dhtmlxcalendar_area_"+b,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(var e=0;4>e;e++){var f=d.ext.document().createElement("UL");f.className="dhtmlxcalendar_selector_line",this.ysCont.appendChild(f);for(var g=0;3>g;g++){var h=d.ext.document().createElement("LI");h.className="dhtmlxcalendar_selector_cell",h._cell=!0,f.appendChild(h)}}this.ysCont.onclick=function(a){a=a||event,a.cancelBubble=!0;var b=a.target||a.srcElement;null!=b._year&&(k._hideSelector(),k._drawMonth(new Date(b._year,k._activeMonth.getMonth(),1,0,0,0,0)),k._doOnSelectorChange(),k.callEvent("onYearSelected",[b]))}}if("hours"==a){this._hsCells={},this.hsCont=d.ext.document().createElement("DIV"),this.hsCont.className="dhtmlxcalendar_area_"+b,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);for(var c=0,e=0;4>e;e++){var f=d.ext.document().createElement("UL");f.className="dhtmlxcalendar_selector_line",this.hsCont.appendChild(f);for(var g=0;6>g;g++){var h=d.ext.document().createElement("LI");h.innerHTML=this._fixLength(c,2),h.className="dhtmlxcalendar_selector_cell",f.appendChild(h),h._hours=c,h._cell=!0,this._hsCells[c++]=h}}this.hsCont.onclick=function(a){a=a||event,a.cancelBubble=!0;var b=a.target||a.srcElement;null!=b._hours&&(k._hideSelector(),k._activeDate.setHours(b._hours),k._updateActiveHours(),k._updateVisibleHours(),k._doOnSelectorChange())}}if("minutes"==a){this._rsCells={},this.rsCont=d.ext.document().createElement("DIV"),this.rsCont.className="dhtmlxcalendar_area_"+b,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);for(var c=0,e=0;4>e;e++){var f=d.ext.document().createElement("UL");f.className="dhtmlxcalendar_selector_line",this.rsCont.appendChild(f);for(var g=0;3>g;g++){var h=d.ext.document().createElement("LI");h.innerHTML=this._fixLength(c,2),h.className="dhtmlxcalendar_selector_cell",f.appendChild(h),h._minutes=c,h._cell=!0,this._rsCells[c]=h,c+=5}}this.rsCont.onclick=function(a){a=a||event,a.cancelBubble=!0;var b=a.target||a.srcElement;null!=b._minutes&&(k._hideSelector(),k._activeDate.setMinutes(b._minutes),k._updateActiveMinutes(),k._updateVisibleMinutes(),k._doOnSelectorChange())}}this._sel._ta[a]=!0}},this._showSelector=function(a,b,c,d,e){return e===!0&&null!=this._sel&&this._isSelectorVisible()&&a==this._sel._t?void this._hideSelector():(this._sel&&this._sel._ta[a]||this._initSelector(a,d),this._selCover.style.display="",this._sel._t=a,this._sel.style.left=b+"px",this._sel.style.top=c+"px",this._sel.style.display="",this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+d,void this._doOnSelectorShow(a))},this._doOnSelectorShow=function(a){"month"==a&&this._updateActiveMonth(),"year"==a&&this._updateYearsList(this._activeMonth),"hours"==a&&this._updateActiveHours(),"minutes"==a&&this._updateActiveMinutes()},this._hideSelector=function(){this._sel&&(this._sel.style.display="none",this._selCover.style.display="none",this.callEvent("onSelectorHide",[]))},this._isSelectorVisible=function(){return this._sel?"none"!=this._sel.style.display:!1},this._doOnSelectorChange=function(a){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),a])},this._clearSelHover=function(){this._selHover&&(this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,"")),this._selHover=null)},this._updateActiveMonth=function(){"undefined"!=typeof this._msActive&&"undefined"!=typeof this._msCells[this._msActive]&&(this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell"),this._msActive=this._activeMonth.getMonth(),this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"},this._updateActiveYear=function(){var a=this._activeMonth.getFullYear();this._ysCells[a]&&(this._ysCells[a].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active");
},this._updateYearsList=function(a){for(var b in this._ysCells)this._ysCells[b]=null,delete this._ysCells[b];for(var c=12*Math.floor(a.getFullYear()/12),d=0;4>d;d++)for(var e=0;3>e;e++)this.ysCont.childNodes[d].childNodes[e].innerHTML=c,this.ysCont.childNodes[d].childNodes[e]._year=c,this.ysCont.childNodes[d].childNodes[e].className="dhtmlxcalendar_selector_cell",this._ysCells[c++]=this.ysCont.childNodes[d].childNodes[e];this._updateActiveYear()},this._scrollYears=function(a){var b=(0>a?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+a,c=new Date(b,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(c)},this._updateActiveHours=function(){"undefined"!=typeof this._hsActive&&"undefined"!=typeof this._hsCells[this._hsActive]&&(this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell"),this._hsActive=this._activeDate.getHours(),this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"},this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)},this._updateActiveMinutes=function(){"undefined"!=typeof this._rsActive&&"undefined"!=typeof this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell"),this._rsActive=this._activeDate.getMinutes(),"undefined"!=typeof this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")},this._updateVisibleMinutes=function(){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this._fixLength(this._activeDate.getMinutes(),2)},this._fixLength=function(a,b){for(;String(a).length<b;)a="0"+String(a);return a},this._dateFormat="",this._dateFormatRE=null,this.setDateFormat=function(a){this._dateFormat=a,this._dateFormatRE=new RegExp(String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(a){var b=a.replace(/%/,"");switch(b){case"m":case"d":case"H":case"i":case"s":return"\\d{2}";case"Y":return"\\d{4}"}return a}))},this._strToDate=function(a,b,c){var d={Y:!1,m:!1,d:!1,H:!1,i:!1,s:!1},e=String(a).match(/[0-9]{1,}/g),f=(c||this._dateFormat).match(/%[a-zA-Z]/g);if(!e)return"Invalid Date";for(var g=0;g<f.length;g++){var h=f[g].replace(/%/g,"");"undefined"!=typeof d[h]&&(d[h]=Number(e[g]))}if(b)return d;for(var e in d)d[e]===!1&&(d[e]=0);return new Date(d.Y,d.m-1,d.d,d.H,d.i,d.s,0)},this._dateToStr=function(a,b){if(a instanceof Date)var c=function(a){return 1==String(a).length?"0"+String(a):a},d=function(b){switch(b){case"%d":return c(a.getDate());case"%j":return a.getDate();case"%D":return k.langData[k.lang].daysSNames[a.getDay()];case"%l":return k.langData[k.lang].daysFNames[a.getDay()];case"%m":return c(a.getMonth()+1);case"%n":return a.getMonth()+1;case"%M":return k.langData[k.lang].monthesSNames[a.getMonth()];case"%F":return k.langData[k.lang].monthesFNames[a.getMonth()];case"%y":return c(a.getYear()%100);case"%Y":return a.getFullYear();case"%g":return(a.getHours()+11)%12+1;case"%h":return c((a.getHours()+11)%12+1);case"%G":return a.getHours();case"%H":return c(a.getHours());case"%i":return c(a.getMinutes());case"%s":return c(a.getSeconds());case"%a":return a.getHours()>11?"pm":"am";case"%A":return a.getHours()>11?"PM":"AM";case"%%":return"%";default:return b}},e=String(b||this._dateFormat).replace(/%[%a-zA-Z]/g,d);return e||String(a)},this._updateDateStr=function(a){if(""==a)return this.setDate(new Date),void this.callEvent("onChange",[null,!0]);if(this._dateFormatRE&&a.match(this._dateFormatRE)){var b=this._strToDate(a,!0),c=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds());b.Y!==!1&&b.Y!=c.getFullYear()&&this._activeDate.setFullYear(b.Y),b.m!==!1&&(b.m--,b.m!=c.getMonth()&&this._activeDate.setMonth(b.m)),b.d!==!1&&b.d!=c.getDate()&&this._activeDate.setDate(b.d),b.H!==!1&&b.H!=c.getHours()&&this._activeDate.setHours(b.H),b.i!==!1&&b.i!=c.getMinutes()&&this._activeDate.setMinutes(b.i),b.s!==!1&&b.s!=c.getSeconds()&&this._activeDate.setSeconds(b.s),this._drawMonth(this._activeDate),this._updateVisibleMinutes(),this._updateVisibleHours(),this._sel&&this._isSelectorVisible()&&this._doOnSelectorShow(this._sel._t),this._doOnSelectorChange(!0)}},this.setFormatedDate=function(a,b,c,d){var e=this._strToDate(b,!1,a);return d?e:void this.setDate(e)},this.getFormatedDate=function(a,b){return b&&b instanceof Date||(b=new Date(this._activeDate)),this._dateToStr(b,a)},this.show=function(a){if(!a&&this._hasParent)return void this._show();if("object"==typeof a&&"undefined"!=typeof a._dhtmlxcalendar_uid&&this.i[a._dhtmlxcalendar_uid]==a)return void this._show(a._dhtmlxcalendar_uid);if("undefined"==typeof a)for(var b in this.i)a||(a=b);a&&this._show(a)},this.hide=function(){this._isVisible()&&this._hide()},this.isVisible=function(){return this._isVisible()},this.draw=function(){this.show()},this.close=function(){this.hide()},this._activeInp=null,this.pos="bottom",this.setPosition=function(a,b){return"right"==a||"bottom"==a?void(this.pos=a):void(this._hasParent||("undefined"==typeof a||isNaN(a)||(this.base.style.left=a+"px"),"undefined"==typeof b||isNaN(b)||(this.base.style.top=b+"px")))},this._show=function(a,b){return b===!0&&this._activeInp==a&&this._isVisible()?void this._hide():(a?("right"==this.pos?(this.base.style.left=this._getLeft(this.i[a])+this.i[a].offsetWidth-1+"px",this.base.style.top=this._getTop(this.i[a])+"px"):(this.base.style.left=this._getLeft(this.i[a])+"px",this.base.style.top=this._getTop(this.i[a])+this.i[a].offsetHeight-1+"px"),this._activeInp=a):(this.base.style.left="0px",this.base.style.top="0px"),this._hideSelector(),void(this.base.style.display=""))},this._hide=function(){this._hideSelector(),this.base.style.display="none",this._activeInp=null},this._isVisible=function(){return"none"!=this.base.style.display},this._getLeft=function(a){return this._posGetOffset(a).left},this._getTop=function(a){return this._posGetOffset(a).top},this._posGetOffsetSum=function(a){for(var b=0,c=0;a;)b+=parseInt(a.offsetTop),c+=parseInt(a.offsetLeft),a=a.offsetParent;return{top:b,left:c}},this._posGetOffsetRect=function(a){var b=a.getBoundingClientRect(),c=d.ext.body(),e=d.ext.document().documentElement,f={left:0,top:0};d.isSingle()||(f=d.ext.iframe().offset());var g=d.ext.window().pageYOffset||e.scrollTop||c.scrollTop,h=d.ext.window().pageXOffset||e.scrollLeft||c.scrollLeft,i=e.clientTop||c.clientTop||0,j=e.clientLeft||c.clientLeft||0,k=b.top+f.top+g-i,l=b.left+f.left+h-j;return{top:Math.round(k),left:Math.round(l)}},this._posGetOffset=function(a){return this[a.getBoundingClientRect?"_posGetOffsetRect":"_posGetOffsetSum"](a)},this._rangeActive=!1,this._rangeFrom=null,this._rangeTo=null,this._rangeSet={},this.setInsensitiveDays=function(a){for(var b=this._extractDates(a),c=0;c<b.length;c++)this._rangeSet[new Date(b[c].getFullYear(),b[c].getMonth(),b[c].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeDate)},this.clearInsensitiveDays=function(){this._clearRangeSet(),this._drawMonth(this._activeDate)},this._holidays={},this.setHolidays=function(a){if(null==a)this._clearHolidays();else if(null!=a)for(var b=this._extractDates(a),c=0;c<b.length;c++)this._holidays[new Date(b[c].getFullYear(),b[c].getMonth(),b[c].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeDate)},this._extractDates=function(a){("string"==typeof a||a instanceof Date)&&(a=[a]);for(var b=[],c=0;c<a.length;c++)if("string"==typeof a[c])for(var d=a[c].split(","),e=0;e<d.length;e++)b.push(this._strToDate(d[e],!1));else a[c]instanceof Date&&b.push(a[c]);return b},this._clearRange=function(){this._rangeActive=!1,this._rangeType=null,this._rangeFrom=null,this._rangeTo=null},this._clearRangeSet=function(){for(var a in this._rangeSet)this._rangeSet[a]=null,delete this._rangeSet[a]},this._clearHolidays=function(){for(var a in this._holidays)this._holidays[a]=null,delete this._holidays[a]},this._isOutOfRange=function(a){if(1==this._rangeSet[a])return!0;if(this._rangeActive){if("in"==this._rangeType&&(a<this._rangeFrom||a>this._rangeTo))return!0;if("out"==this._rangeType&&a>=this._rangeFrom&&a<=this._rangeTo)return!0;if("from"==this._rangeType&&a<this._rangeFrom)return!0;if("to"==this._rangeType&&a>this._rangeTo)return!0}return!1},this.clearSensitiveRange=function(){this._clearRange(),this._drawMonth(this._activeDate)},this.setSensitiveRange=function(a,b,c){var d=!1;if(null!=a&&null!=b){if(a instanceof Date||(a=this._strToDate(a,!1)),b instanceof Date||(b=this._strToDate(b,!1)),a.getTime()>b.getTime())return;this._rangeFrom=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime(),this._rangeTo=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0).getTime(),this._rangeActive=!0,this._rangeType="in",d=!0}d||null==a||null!=b||(a instanceof Date||(a=this._strToDate(a,!1)),this._rangeFrom=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime(),this._rangeTo=null,c===!0&&this._rangeFrom++,this._rangeActive=!0,this._rangeType="from",d=!0),d||null!=a||null==b||(b instanceof Date||(b=this._strToDate(b,!1)),this._rangeFrom=null,this._rangeTo=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0).getTime(),c===!0&&this._rangeTo--,this._rangeActive=!0,this._rangeType="to",d=!0),d&&this._drawMonth(this._activeDate)},this.setInsensitiveRange=function(a,b){if(null!=a&&null!=b){if(a instanceof Date||(a=this._strToDate(a,!1)),b instanceof Date||(b=this._strToDate(b,!1)),a.getTime()>b.getTime())return;return this._rangeFrom=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime(),this._rangeTo=new Date(b.getFullYear(),b.getMonth(),b.getDate(),0,0,0,0).getTime(),this._rangeActive=!0,this._rangeType="out",void this._drawMonth(this._activeDate)}return null!=a&&null==b?void this.setSensitiveRange(null,a,!0):null==a&&null!=b?void this.setSensitiveRange(b,null,!0):void 0},this._doOnClick=function(a){a=a||event;var b=a.target||a.srcElement;return b._dhtmlxcalendar_uid&&b._dhtmlxcalendar_uid!=k._activeInp&&k._isVisible()?void k._hide():void(b._dhtmlxcalendar_uid&&k.i[b._dhtmlxcalendar_uid]||(k._isSelectorVisible()?k._hideSelector():!k._hasParent&&k._isVisible()&&k._hide()))},this._doOnKeyDown=function(a){a=a||event,27==a.keyCode&&(k._isSelectorVisible()?k._hideSelector():k._isVisible()&&!k._hasParent&&k._hide())},this._doOnInpClick=function(a){a=a||event;var b=a.target||a.srcElement;b._dhtmlxcalendar_uid&&(k._updateDateStr(b.value),k._show(b._dhtmlxcalendar_uid,!0))},this._doOnInpKeyUp=function(a){a=a||event;var b=a.target||a.srcElement;13!=a.keyCode&&b._dhtmlxcalendar_uid&&k._updateDateStr(b.value)},this._doOnUnload=function(){"undefined"!=typeof k&&null!==k&&k.unload()},d.ext.window().addEventListener?(d.ext.body().addEventListener("click",k._doOnClick,!1),d.ext.window().addEventListener("keydown",k._doOnKeyDown,!1),d.ext.window().addEventListener("unload",k._doOnUnload,!1)):(d.ext.body().attachEvent("onclick",k._doOnClick),d.ext.body().attachEvent("onkeydown",k._doOnKeyDown),d.ext.window().attachEvent("onunload",k._doOnUnload)),this.attachObj=function(a){var b=this.uid();this.i[b]=a,this._attachEventsToObject(b)},this.detachObj=function(a){var b=a._dhtmlxcalendar_uid;null!=this.i[b]&&(this._detachEventsFromObject(b),this.i[b]._dhtmlxcalendar_uid=null,this.i[b]=null,delete this.i[b])},this._attachEventsToObject=function(a){this.i[a]._dhtmlxcalendar_uid=a,d.ext.window().addEventListener?(this.i[a].addEventListener("click",k._doOnInpClick,!1),this.i[a].addEventListener("keyup",k._doOnInpKeyUp,!1)):(this.i[a].attachEvent("onclick",k._doOnInpClick),this.i[a].attachEvent("onkeyup",k._doOnInpKeyUp))},this._detachEventsFromObject=function(a){d.ext.window().addEventListener?(this.i[a].removeEventListener("click",k._doOnInpClick,!1),this.i[a].removeEventListener("keyup",k._doOnInpKeyUp,!1)):(this.i[a].detachEvent("onclick",k._doOnInpClick),this.i[a].detachEvent("onkeyup",k._doOnInpKeyUp))};for(var m in this.i)this._attachEventsToObject(m);return this.evs={},this.attachEvent=function(a,b){var c=this.uid();return this.evs[c]={name:String(a).toLowerCase(),func:b},c},this.detachEvent=function(a){this.evs[a]&&(this.evs[a].name=null,this.evs[a].func=null,this.evs[a]=null,delete this.evs[a])},this.callEvent=function(a,b){var c=!0,d=String(a).toLowerCase();b=b||[];for(var e in this.evs)if(this.evs[e].name==d){var f=this.evs[e].func.apply(this,b);c=c&&f}return c},this.checkEvent=function(a){var b=!1,c=String(a).toLowerCase();for(var d in this.evs)b=b||this.evs[d].name==c;return b},this.unload=function(){d.ext.window().addEventListener?(d.ext.body().removeEventListener("click",k._doOnClick,!1),d.ext.window().removeEventListener("keydown",k._doOnKeyDown,!1),d.ext.window().removeEventListener("unload",k._doOnUnload,!1)):(d.ext.body().detachEvent("onclick",k._doOnClick),d.ext.body().detachEvent("onkeydown",k._doOnKeyDown),d.ext.window().detachEvent("onunload",k._doOnKeyDown)),this._doOnClick=null,this._doOnKeyDown=null,this._doOnUnload=null,this._activeDate=null,this._activeDateCell=null,this._activeInp=null,this._activeMonth=null,this._dateFormat=null,this._dateFormatRE=null,this._lastHover=null,this.uid=null,this.uidd=null;for(var a in this.i)this.i[a]._dhtmlxcalendar_uid=null,delete this.i[a]._dhtmlxcalendar_uid,d.ext.window().addEventListener?(this.i[a].removeEventListener("click",k._doOnInpClick,!1),this.i[a].removeEventListener("keyup",k._doOnInpKeyUp,!1)):(this.i[a].detachEvent("onclick",k._doOnInpClick),this.i[a].detachEvent("onkeyup",k._doOnInpKeyUp)),this.i[a]=null,delete this.i[a];this.i=null,this._doOnInpClick=null,this._doOnInpKeyUp=null;for(var a in this.evs)this.detachEvent(a);for(this.evs=null,this.attachEvent=null,this.detachEvent=null,this.checkEvent=null,this.callEvent=null,this.contMonth.onselectstart=null,this.contMonth.firstChild.firstChild.onclick=null,this.contMonth.firstChild.firstChild.firstChild.onmouseover=null,this.contMonth.firstChild.firstChild.firstChild.onmouseout=null,this.contMonth.firstChild.firstChild.lastChild.onmouseover=null,this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;this.contMonth.firstChild.firstChild.childNodes.length>0;)this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild);for(this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild),this.contMonth.removeChild(this.contMonth.firstChild),this.contMonth.parentNode.removeChild(this.contMonth),this.contMonth=null;this.contDays.firstChild.childNodes.length>0;)this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild);for(this.contDays.removeChild(this.contDays.firstChild),this.contDays.parentNode.removeChild(this.contDays),this.contDays=null,this.contDates.onclick=null,this.contDates.onmouseover=null,this.contDates.onmouseout=null;this.contDates.childNodes.length>0;){for(;this.contDates.lastChild.childNodes.length>0;)this.contDates.lastChild.lastChild._css_date=null,this.contDates.lastChild.lastChild._css_month=null,this.contDates.lastChild.lastChild._css_weekend=null,this.contDates.lastChild.lastChild._css_hover=null,this.contDates.lastChild.lastChild._date=null,this.contDates.lastChild.lastChild._q=null,this.contDates.lastChild.lastChild._w=null,this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild);this.contDates.removeChild(this.contDates.lastChild)}for(this.contDates.parentNode.removeChild(this.contDates),this.contDates=null,this.contTime.firstChild.firstChild.onclick=null;this.contTime.firstChild.firstChild.childNodes.length>0;)this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild);if(this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild),this.contTime.removeChild(this.contTime.firstChild),this.contTime.parentNode.removeChild(this.contTime),this.contTime=null,this._lastHover=null,this.msCont){this.msCont.onclick=null,this._msActive=null;for(var a in this._msCells)this._msCells[a]._cell=null,this._msCells[a]._month=null,this._msCells[a].parentNode.removeChild(this._msCells[a]),this._msCells[a]=null;for(this._msCells=null;this.msCont.childNodes.length>0;)this.msCont.removeChild(this.msCont.lastChild);this.msCont.parentNode.removeChild(this.msCont),this.msCont=null}if(this.ysCont){this.ysCont.onclick=null;for(var a in this._ysCells)this._ysCells[a]._cell=null,this._ysCells[a]._year=null,this._ysCells[a].parentNode.removeChild(this._ysCells[a]),this._ysCells[a]=null;for(this._ysCells=null;this.ysCont.childNodes.length>0;)this.ysCont.removeChild(this.ysCont.lastChild);this.ysCont.parentNode.removeChild(this.ysCont),this.ysCont=null}if(this.hsCont){this.hsCont.onclick=null,this._hsActive=null;for(var a in this._hsCells)this._hsCells[a]._cell=null,this._hsCells[a]._hours=null,this._hsCells[a].parentNode.removeChild(this._hsCells[a]),this._hsCells[a]=null;for(this._hsCells=null;this.hsCont.childNodes.length>0;)this.hsCont.removeChild(this.hsCont.lastChild);this.hsCont.parentNode.removeChild(this.hsCont),this.hsCont=null}if(this.rsCont){this.rsCont.onclick=null,this._rsActive=null;for(var a in this._rsCells)this._rsCells[a]._cell=null,this._rsCells[a]._minutes=null,this._rsCells[a].parentNode.removeChild(this._rsCells[a]),this._rsCells[a]=null;for(this._rsCells=null;this.rsCont.childNodes.length>0;)this.rsCont.removeChild(this.rsCont.lastChild);this.rsCont.parentNode.removeChild(this.rsCont),this.rsCont=null}if(this._selCover&&(this._selCover.parentNode.removeChild(this._selCover),this._selCover=null),this._sel){for(var a in this._sel._ta)this._sel._ta[a]=null;for(this._sel._ta=null,this._sel._t=null,this._sel.onmouseover=null,this._sel.onmouseout=null;this._sel.firstChild.firstChild.firstChild.childNodes.length>0;)this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null,this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild);for(this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild),this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);this._sel.childNodes.length>0;)this._sel.removeChild(this._sel.lastChild);this._sel.parentNode.removeChild(this._sel),this._sel=null}this.base.onclick=null,this.base.parentNode.removeChild(this.base),this.base=null,this._clearDayHover=null,this._clearSelHover=null,this._doOnSelectorChange=null,this._doOnSelectorShow=null,this._drawMonth=null,this._fixLength=null,this._getLeft=null,this._getTop=null,this._hide=null,this._hideSelector=null,this._initSelector=null,this._isSelectorVisible=null,this._isVisible=null,this._posGetOffset=null,this._posGetOffsetRect=null,this._posGetOffsetSum=null,this._scrollYears=null,this._show=null,this._showSelector=null,this._strToDate=null,this._updateActiveHours=null,this._updateActiveMinutes=null,this._updateActiveMonth=null,this._updateActiveYear=null,this._updateCellStyle=null,this._updateDateStr=null,this._updateVisibleHours=null,this._updateVisibleMinutes=null,this._updateYearsList=null,this.hide=null,this.hideTime=null,this.setDate=null,this.setDateFormat=null,this.show=null,this.showTime=null,this.unload=null;for(var a in this)delete this[a];a=k=null},this.setDate(this._activeDate),this}var d=a(".sf-datepicker").size(),e=a({}),f=a.fn.sfDatePicker=function(c,g){"string"==typeof c?this.each(function(){"function"==typeof this[c]&&this[c](g)}):(me=a(this),"object"==typeof c&&"undefined"!=typeof c.wireup&&(me=a(".sf-datepicker")),"object"==typeof c&&"undefined"!=typeof c.rangeGroup&&(a(this).attr("data-range-group",c.rangeGroup),a(this).attr("data-range-position",c.rangePosition)),a(me[0]).hasClass("sf-datepicker")||(d+=me.length),me.each(function(){var g=a(this),h=g.attr("data-min-date");"string"==typeof h&&(h=new Date(h));var i=g.attr("data-max-date");"string"==typeof i&&(i=new Date(i));var j=a.extend({prefix:"dp-style",zIndex:b,dateFormat:g.attr("data-date-format")||"%m/%d/%Y",dateOverride:g.attr("data-date-override")||null,rangeGroup:g.attr("data-range-group")||null,beforeToday:"true"===g.attr("data-before-today")||!1,minDate:h,maxDate:i,onSelect:function(){},onChange:function(){},afterInit:function(){},context:window,displayContext:window,zAnchor:null},c),k=(ux.util.zIndex,null),l=ux.util.context(j.context,j.displayContext);"undefined"==typeof f.instances&&(f.instances=[]),f.instances.push(g),a.extend(this,{init:function(){$el=a(this),$el.addClass("sf-datepicker");var b={width:$el.outerWidth(),height:$el.outerHeight()},c=($el.offset(),""+j.prefix+Math.round(65535*Math.random()));k=ux.util.logger(c,"duel");var f=a('<a href="#" class="trigger"><span class="uxicon uxicon-calendar-date"></span></a>'),g=a('<span id="'+c+'"></span>'),h=a("<span />"),i=ux.util.zIndex.getLayer("flyout",a(l.ext.body()),l.isSingle()?$el:l.ext.iframe());h.css({position:"relative",display:"inline-block"}),$el.wrap(h),g.addClass("sf-dp-wrapper dp-wrapper").css({height:b.height,zIndex:"",display:"none"}),f.addClass("sf-dp-trigger"),f.insertAfter($el),g.appendTo(i);var m=new dhtmlxCalendarObject(c,!1,null,l,k);m.setDateFormat(j.dateFormat),m.loadUserLanguage("en-us"),m.setSkin("gd"),m.draw(),m.show(),m.hide(),m.setWeekStartDay(7),m.hideTime(),j.dateOverride&&"none"!==j.dateOverride&&m.setDate(m.getFormatedDate(m._dateFormat,m._strToDate(j.dateOverride))),m.setHolidays(m.getFormatedDate(m._dateFormat,m.getDate())),$el.val()&&"Invalid Date"!==m._strToDate($el.val())&&m.setDate(m._strToDate($el.val()));var n=a(m.base);n.css({position:"absolute"});var o=a('<div class="btn-pane"><a class="today btn btn-default btn-sm" href="#">'+(m.langData[m.lang].today||"Today")+"</a></div>");n.append(o),this.set("uid",c),this.set("container",n),this.set("input",$el),this.set("wrapper",g),this.set("trigger",f),this.set("layer",i),this.set("cal",m),this.set("today",o),this.set("defaultDate",this._getDefaultDate()),this.bindings(),j.rangeGroup&&this.rangedBindings(),this.setDate("none"===j.dateOverride?"":this.get("defaultDate")),j.minDate||j.maxDate?this._setRange(j.minDate,j.maxDate):j.beforeToday||this._setMinRange(),d--,0===d&&(j.afterInit.call(me),e.trigger("dp.allInitsFinished.dp-on"+this.get("uid"))),this.positionTrigger();var p=this,q=function(a){var b=a.args[0]&&a.args[0].moduleElement?a.args[0].moduleElement:null;b&&(l.isSingle()?b.has(p.get("input")).length>0:ux.util.jCompat.isEl(b,l.ext.iframe()))&&(p.showAll(),p.positionWrapper())},r=l.ext.window();r.ux.util.event.on("dragstart",function(a){var b=a.args[0]&&a.args[0].moduleElement?a.args[0].moduleElement:null;b&&(l.isSingle()?b.has(p.get("input")).length>0:ux.util.jCompat.isEl(b,l.ext.iframe()))&&p.hideAll(!0)}),r.ux.util.event.on("dragend",q),r.ux.util.event.on("resize",q)},destroy:function(){var b=l.ext.window();b.ux.util.event.off("dragstart"),b.ux.util.event.off("dragend"),b.ux.util.event.off("resize");var c=this.get("cal");c.unload();var d=this.get("wrapper"),e=this.get("input").before(d),h=".dp-on"+this.get("uid");e.unbind("click"+h),e.unbind("change"+h),a(l.intr.window()).unbind("resize"+h),l.isSingle()||(a(l.ext.window()).unbind("resize"+h),a(l.intr.window()).unbind("scroll"+h)),h=".dp-blur"+this.get("uid"),a(l.intr.body()).unbind("click"+h),a(l.intr.body()).unbind("click"+h),l.isSingle()||(a(l.ext.body()).unbind("click"+h),a(l.ext.body()).unbind("click"+h)),d.remove(),this.get("container").remove(),this.get("trigger").remove();var i=g;f.instances=_.reject(f.instances,function(a){return a===i})},positionTrigger:function(){var a=this.get("input"),b=this.get("trigger");if("undefined"!=typeof b){var c={top:0,left:0};b.css({position:"absolute",top:c.top+"px",left:a.outerWidth(!0)+c.left-b.outerWidth()+"px",display:!l.isSingle()&&!l.intr.isInBounds(a)||"true"===b.attr("data-hidden")?"none":"block"})}},positionWrapper:function(){var b=this.get("input"),c=this.get("wrapper");if("undefined"!=typeof c){var d=null!==ux.util.zIndex.getStackingParent(b),e=l.ext.offset(b,d);l.isSingle()&&d&&(e.top-=a(l.ext.window()).scrollTop(),e.left-=a(l.ext.window()).scrollLeft()),c.css({position:d?"fixed":"absolute",top:e.top+"px",left:e.left+"px",display:!l.isSingle()&&!l.intr.isInBounds(b)||"true"===c.attr("data-hidden")?"none":"block"})}},enable:function(){var a=this.get("input"),b=this.get("trigger");a.removeAttr("disabled"),this.get("trigger").removeAttr("data-disabled"),b.css("cursor","")},disable:function(){var a=this.get("input"),b=this.get("trigger");a.attr("disabled",!0),this.get("trigger").attr("data-disabled",!0),b.css("cursor","default")},show:function(){var a=this.get("trigger"),b=this.get("wrapper"),c=this.get("layer"),d=this.get("container"),e=this.get("input"),f=l.ext.offset(e);this.get("cal");this.positionWrapper();var g=e.outerWidth()-d.outerWidth()+1,h=g,i=f.left-(d.outerWidth()-e.outerWidth());0>i?(h=e.outerWidth()-a.outerWidth()+1,b.addClass("dp-left-align")):b.removeClass("dp-left-align");var k={top:a.outerHeight(),left:h};e.addClass("dp-showing"),a.addClass("dp-trigger-active");var m=isNaN(j.zIndex)?ux.util.zIndex.getTop(null!==j.zAnchor?j.zAnchor:e):j.zIndex;b.css({zIndex:ux.util.zIndex.maxForLayer(c)+1}).removeAttr("data-hidden"),a.css({zIndex:m+10}).removeAttr("data-hidden"),d.css({top:k.top-2,left:k.left-1}),this._updateCalDateFromInput(),b.show(),d.show(),this._appendArrow()},bindings:function(){function b(){d.positionTrigger(),d.positionWrapper()}function c(){try{b()}catch(a){n.unbind("resize"+m)}}var d=this,g=this.get("trigger"),h=(this.get("input"),this.get("container"),this.get("wrapper"),this.get("input")),i=this.get("cal"),k=this.get("today"),m=".dp-on"+d.get("uid"),n=a(l.ext.window()),o=a(l.intr.window());h.bind("click"+m,function(b){function c(){d.hide(),m.unbind("click"+g)}function e(){try{c()}catch(a){k.unbind("click"+g)}}if(b.stopPropagation(),b.preventDefault(),h.hasClass("dp-showing"))d.hide();else{a.each(f.instances,function(a,b){try{b.hasClass("dp-showing")&&!ux.util.jCompat.isEl(b,h)&&b.sfDatePicker("hide")}catch(c){f.instances[a]=null}}),f.instances=_.compact(f.instances),d.show();var g=".dp-blur"+d.get("uid"),k=a(l.ext.body()),m=a(l.intr.body());m.unbind("click"+g),m.bind("click"+g,c),l.isSingle()||(k.unbind("click"+g),k.bind("click"+g,e))}if(!i.attached){i.attached=!0,i.attachEvent("onClick",function(a){d.setDate(d._getCurrentDate()),d.hide(),j.onSelect(h,d._getCurrentDate())}),i.attachEvent("onChange",function(){a(".dhtmlxcalendar_month_label_year").removeClass("selected"),a(".dhtmlxcalendar_month_label_month").removeClass("selected")}),i.attachEvent("onSelectorHide",function(){a(".dhtmlxcalendar_month_label_year").removeClass("selected"),a(".dhtmlxcalendar_month_label_month").removeClass("selected")});i.attachEvent("onShowMonthSelector",function(b){a(b).addClass("selected"),a(b).siblings().removeClass("selected")}),i.attachEvent("onShowYearSelector",function(b){a(b).addClass("selected"),a(b).siblings().removeClass("selected")}),i.attachEvent("onYearSelected",function(a){d._appendArrow()})}}),h.bind("change"+m,function(a){j.onChange(h,h.val())}),o.bind("resize"+m,b),l.isSingle()||(n.bind("resize"+m,c),o.bind("scroll"+m,b)),e.bind("dp.allInitsFinished"+m,c),g.click(function(b){b.preventDefault(),b.stopPropagation(),a(this).attr("data-disabled")||h.trigger("click"+m)}),k.click(function(a){a.preventDefault();var b=i.getFormatedDate(i._dateFormat,new Date);d.setDate(b),j.onSelect(h,b),d.hide()})},rangedBindings:function(){function b(){var a=new Date(f._getBrowserFriendlyDate()),b=new Date,c=!1;a.getTime()>b.getTime()&&(c=!0),e.trigger("sfdp."+g,{date:d.getFormatedDate(d._dateFormat),disableToday:c})}var c=this.get("trigger"),d=this.get("cal"),e=this.get("input"),f=this,g=j.rangeGroup,h=(this.get("today"),a('[data-range-group="'+g+'"]')),i=h.filter(":eq(0)"),k=h.filter(":eq(1)");h.length>1&&(i.data("range-position","from"),k.data("range-position","to")),"to"===e.data("range-position")?(i.bind("sfdp."+g,function(a,b){d.clearSensitiveRange(),f._setMinRange(b.date),f._disableToday(b.disableToday)}),i.bind("sfdp.triggerOpen",function(a,b){if(!b){var c=this.get("cal"),b={};c.setDate(d.getFormatedDate(c._dateFormat,new Date(i.val()))),b.date=c.getFormatedDate(c._dateFormat)}d.clearSensitiveRange(),""!==i.val()&&f._setMinRange(b.date)}),c.click(function(){i.trigger("sfdp.triggerOpen"),f._appendArrow(),setTimeout(function(){f._appendArrow()},300)})):(e.bind("sfdp.updateRange",b),d.attachEvent("onClick",function(a){f.setDate(f._getCurrentDate()),f.hide(),b()}),i.bind("change",function(){f.setDate(a(this).val())}),c.click(function(){e.trigger("sfdp.triggerOpen",{date:d.getFormatedDate(d._dateFormat)})})),a(this).removeClass("me")},hide:function(){var a=this.get("trigger"),b=this.get("container"),c=this.get("input"),d=this.get("wrapper");a.css({zIndex:""}).attr("data-hidden",!0),d.css({zIndex:"",display:"none"}).attr("data-hidden",!0),c.removeClass("dp-showing"),a.removeClass("dp-trigger-active"),b.unbind("click.dp-protect"),b.hide()},hideAll:function(a){var b=this.get("trigger"),c=this.get("input"),d=this.get("wrapper");this.hide(),b.hide(),d.hide(),a!==!0&&c.hide()},showAll:function(){var a=this.get("trigger"),b=this.get("input"),c=this.get("wrapper");a.removeAttr("data-hidden").show(),c.removeAttr("data-hidden").show(),b.show(),this.positionTrigger()},set:function(b,c){a(this).data(b,c)},get:function(b,c){return a(this).data(b)},setDate:function(a){"date"==typeof a&&(a=("0"+(a.getUTCMonth()+1)).substr(-2)+"/"+("0"+a.getUTCDate()).substr(-2)+"/"+a.getUTCFullYear());var b=this.get("input"),c=b.val();b.val(a),this._updateCalDateFromInput(),c!==a&&j.onChange(b,a),b.trigger("sfdp.updateRange")},_appendArrow:function(){var a=this.get("container"),b=a.find(".dhtmlxcalendar_month_label_year").text();b+='<span class="arrow"></span>',a.find(".dhtmlxcalendar_month_label_year").html(b)},_disableToday:function(a){var b=this.get("today");a?b.hide():b.show()},_getDefaultDate:function(){var a=this.get("cal");return a.getFormatedDate(j.dateFormat,a.getDate())},_getCurrentDate:function(){var a=this.get("cal");return a.getFormatedDate(j.dateFormat)},_getPluginFriendlyDate:function(){var a=this.get("cal");return a.getFormatedDate(a._dateFormat,a.getDate())},_getBrowserFriendlyDate:function(){var a=this.get("cal");return a.getFormatedDate(a._dateFormat,a.getDate())},_getUTCFriendlyDate:function(a){var c=new Date(a),d=new Date;return isNaN(c.getTime())?b:new Date(c.getTime()+6e4*d.getTimezoneOffset())},_setMinRange:function(a){var b=this.get("cal"),c=this._getDayBefore(this._getBrowserFriendlyDate());if(a){c=this._getDayBefore(a);var d=this.get("input").val(),e=new Date(this._getBrowserFriendlyDate()),f=this._getUTCFriendlyDate(a);(""===d||e.getTime()<f.getTime())&&(b.setDate(b.getFormatedDate(b._dateFormat,f)),this.setDate(b.getFormatedDate(j.dateFormat)))}"to"===this.get("input").data("range-position")&&"undefined"!=typeof this.max&&this.max.length>0?b.setSensitiveRange(this._getDayAfter(c),this.max):b.setInsensitiveRange(null,c)},_setRange:function(a,b){var c=this.get("cal"),d=null,e=null;a=this._getUTCFriendlyDate(a),b=this._getUTCFriendlyDate(b),a&&(d=c.getFormatedDate(c._dateFormat,a),this.min=c.getFormatedDate(c._dateFormat,a)),b&&(e=c.getFormatedDate(c._dateFormat,b),this.max=c.getFormatedDate(c._dateFormat,b));var f=new Date(this._getBrowserFriendlyDate());a&&f.getTime()<a.getTime()?(c.setDate(c.getFormatedDate(c._dateFormat,new Date(a))),this.setDate(c.getFormatedDate(j.dateFormat))):b&&f.getTime()>b.getTime()&&(c.setDate(c.getFormatedDate(c._dateFormat,new Date(b))),this.setDate(c.getFormatedDate(j.dateFormat))),c.setSensitiveRange(d,e)},_getDayBefore:function(a){var b=this.get("cal"),a=b._strToDate(a);a.setDate(a.getDate()-1);var c=b.getFormatedDate(b._dateFormat,a);return c},_getDayAfter:function(a){var b=this.get("cal"),a=b._strToDate(a);a.setDate(a.getDate()+1);var c=b.getFormatedDate(b._dateFormat,a);
return c},_updateCalDateFromInput:function(){var a=this.get("input"),b=this.get("cal"),c=new Date;c.setHours(0,0,0,0);var d=""===a.val()?c:b._strToDate(a.val());if(d.setHours(0,0,0,0),d.getTime()<c.getTime()&&!j.beforeToday){var e=this._getCurrentDate();a.val(e),j.onChange(a,e)}b.setDate(b.getFormatedDate(b._dateFormat,d))}}),this.init()}))};c.prototype.setYearsRange=function(){};var g,h;ux&&ux.i18n&&(g=ux.i18n.culture,h=ux.i18n.dhtmlxCalendar),g=g||"en",h=a.extend({dateformat:"%Y-%m-%d",monthesFNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthesSNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysSNames:["Su","Mo","Tu","We","Th","Fr","Sa"],weekstart:1,today:"Today"},h),c.prototype.lang=g,c.prototype.langData={},c.prototype.langData[g]=h,dhtmlxCalendarObject=c}(jQuery),function(a,b){var c={options:{selectedIndex:0,width:250,listWidth:b,listMaxHeight:b,listHeight:b,autoOpen:!1,valueChangeElement:b,onOpen:b,onClose:b,onValueChanged:b,zIndex:b,disabled:!1,context:self,displayContext:self},_create:function(){var b=this;b._width=b.options.width,b._listWidth=b.options.listWidth?b.options.listWidth:b._width,b._enabled=b.options.disabled!==!0,b._context=ux.util.context(b.options.context,b.options.displayContext);var c=b._context.isSingle()?b.element:b._context.ext.iframe();if(b._stackingParent=ux.util.zIndex.getStackingParent(c),b._stackingParent="undefined"==typeof b._stackingParent?null:b._stackingParent,b._eventId=b._generateId("sfdl").replace(/-_/g,""),b._createMain(),b.options.valueChangeElement&&b.options.valueChangeElement.length>0&&(b.valueChangeElement=a(b.options.valueChangeElement)),b._createDropDown(),b.list.attr("data-placeholder"))b._loadBox('<div style="opacity:.5;">'+b.list.attr("data-placeholder")+"</div>");else{var d=b.list.children("[data-selected]");0===d.length&&(d=b.list.children("li").eq(b.options.selectedIndex)),0===d.length&&(d=b.list.children("li").first()),d.length>1&&(d=d.eq(0)),b.selectItem(d,!0)}var e=b.list.children("[data-highlighted]");e.length>0&&b.highlightItems(e,!0);var f=b.list.children("[data-disabled]");f.length>0&&b.disableItems(f,!0),b.options.autoOpen===!0&&this.open()},_createMain:function(){var b=this;b.element.wrap('<div class="'+b.baseClass+'-select form-control" tabindex="0" />'),b.wrapper=b.element.parent(),b.wrapper.css({width:b._width-38+"px"}),b._enabled||b.wrapper.addClass(b.baseClass+"-select-disabled").attr("disabled","disabled"),b.boxContent=a('<div class="'+b.baseClass+'-selectcontent"></div>').append('<div class="'+b.baseClass+'-display"></div>').prependTo(b.wrapper),b.anchor=a('<div class="sf-droplist-selectbtn"><span class="'+b.baseClass+'-anchor"></span></div>').appendTo(b.wrapper),b.list=b.element,b.list.addClass(b.baseClass).css("position","relative").hide()},_createDropDown:function(){var b=this,c={display:"none",position:null!==b._stackingParent?"fixed":"absolute","overflow-x":"hidden"};"number"==typeof b.options.listHeight?(c.height=b.options.listHeight+"px",c["overflow-y"]="auto"):"number"==typeof b.options.listMaxHeight?(c["max-height"]=b.options.listMaxHeight+"px",c["overflow-y"]="auto"):c["overflow-y"]="hidden",b._log("context is single = "+b._context.isSingle()),b.drop=a('<div class="sf-droplist-drop"></div>').appendTo(ux.util.zIndex.getLayer("flyout",a(b._context.ext.body()),b._context.isSingle()?b.element:b._context.ext.iframe())).width(b._listWidth).append(b.list).css(c),b.list.show();var d=b._eventId,e=function(){b._enabled&&(b.toggle(),setTimeout(function(){b.box().focus()},1))};b.anchor.bind("click."+d,e),b.boxContent.bind("click."+d,e),b._attachScrollHandler(),b.wrapper.bind("keydown."+d,function(a){return b._wrapperKeydownHandler(a,b)}),a(b._context.ext.window()).bind("click."+d,function(c){b._blur(a(c.target))}),b._context.isSingle()||a(b._context.intr.window()).bind("click."+d,function(c){b._blur(a(c.target))}),b._attachItemClickHandler(b.list.children("li"))},_attachItemClickHandler:function(b){var c=this;b.click(function(){var b=!a(this).attr("data-disabled");return b&&(c.selectItem(a(this)),c.close()),c.wrapper.focus(),b})},_attachScrollHandler:function(a){var b=this,c=b.wrapper.parents().add(b._context.ext.window()),d="scroll."+b._eventId;a=!(a===!1),a?setTimeout(function(){c.bind(d,function(){b.isOpen()&&b.close()})},1):c.unbind(d)},_wrapperKeydownHandler:function(a,b){var c={down:40===a.which,up:38===a.which,exit:9===a.which||13===a.which||27===a.which};return(c.up||c.down||c.exit)&&0!==b.list.children("li:not([data-disabled])").length?(c.exit&&b.close(),(c.down||c.up)&&(b.isOpen()?b._moveSelectionInList(c.down):(b._attachScrollHandler(!1),b.open(),b._attachScrollHandler())),!1):!0},_moveSelectionInList:function(a){var b=this,c=b.selectedIndex(),d=a?1:-1,e=c;do c+=d,(0>c||0===b.list.find("li:eq("+c+")").length)&&(c=e);while(c!==e&&b.list.find("li:eq("+c+")").attr("data-disabled"));b.selectItem(c);var f=b.drop.scrollTop(),g=b.list.find("li:eq("+c+")"),h=g.position().top;b._attachScrollHandler(!1),f>h&&b.drop.scrollTop(h),h=g.position().top+g.outerHeight()-b.drop.height(),h>f&&b.drop.scrollTop(h),b._attachScrollHandler()},_positionList:function(){function b(){var b={top:d.top-c.drop.outerHeight()+1,bottom:d.top+c.wrapper.outerHeight()-1},e=a(c._context.ext.window()).scrollTop(),f={top:e,bottom:e+a(c._context.ext.window()).height()},g={top:b.top,bottom:b.bottom+c.drop.outerHeight()},h=g.bottom<f.bottom,i=g.top>f.top;return b[h?"bottom":i?"top":"bottom"]}var c=this,d=c._context.isSingle()?c.wrapper.offset():c._context.ext.offset(c.wrapper,null!==c._stackingParent);c._context.isSingle()&&null!==c._stackingParent&&(d.top-=a(c._context.ext.window()).scrollTop(),d.left-=a(c._context.ext.window()).scrollLeft());var e={left:d.left+"px",top:b()+"px"};isNaN(c.options.zIndex)||(e.zIndex=c.options.zIndex),c.drop.css(e)},_blur:function(a){var b=ux.util.jCompat.isEl(a,this.wrapper);b||(b=ux.util.jCompat.findEl(this.wrapper,a).length>0),b||this.close()},_loadBox:function(a){this.boxContent.children().addClass("old").end().prepend(a).children(".old").remove()},_changeItemsStatus:function(b,c,d,e){var f=this;a.isPlainObject(b)&&!a.isArray(b)&&(c=b.preserveExisting,b=b.items),c=c===!0,c||f.list.children("li").removeAttr(d).removeClass(e),0!==b.length&&a.each(b,function(){var b=this,c=b;if("number"==typeof b)c=f.list.children("li:eq("+b+")");else{if(0===a(b).length)return!0;c=a(b)}c.attr(d,!0).addClass(e)})},destroy:function(b){this.isOpen()&&this.close(),this.boxContent.unbind(),this.anchor.unbind(),this.list.removeClass(this.baseClass).hide().insertBefore(this.wrapper).children().removeClass("sf-droplist-actv").unbind();var c=this._eventId;this._attachScrollHandler(!1),this.wrapper.unbind("keydown."+c),this.wrapper.remove(),a(this._context.ext.window()).unbind("click."+c),this._context.isSingle()||a(this._context.intr.window()).unbind("click."+c),this.drop.remove(),this._execSuper("destroy",b)},selectItem:function(b,c){var d,e=this.selectedIndex();if(a.isPlainObject(b)&&(c=b.forceRefresh,b=b.item),"number"==typeof b)d=this.list.children("li:eq("+b+")");else{if(0===b.length)return b;d=b}if(c||e!==d.index()){this._loadBox("<div>"+d.children("[data-main]").html()+"</div>"),this.list.children("li").removeAttr("data-selected").removeClass("sf-droplist-actv"),d.attr("data-selected",!0).addClass("sf-droplist-actv");var f=d.attr("data-value");this.list.attr("data-value",f),!c&&a.isFunction(this.options.onValueChanged)&&this.options.onValueChanged(this.element,d,f);var g=this.valueChangeElement;g&&g.length>0&&g.each(function(){a(this).is("input")?a(this).val(f):a(this).text(f)})}},selectItemByValue:function(b,c){a.isPlainObject(b)&&(c=b.forceRefresh,b=b.value);var d=this.list.children('li[data-value="'+b+'"]');d.length>0&&this.selectItem(d,c)},disableItems:function(a){this._changeItemsStatus(a,!1,"data-disabled","sf-droplist-dis")},highlightItems:function(a,b){this._changeItemsStatus(a,b,"data-highlighted","sf-droplist-hlt")},highlightItemsByValue:function(b,c){var d=this;if(a.isPlainObject(b)&&!a.isArray(b)&&(c=b.preserveExisting,b=b.values),null===b||a.isArray(b)){var e=null===b?[]:a.map(b,function(a){var b=d.list.children('li[data-value="'+a+'"]');return 0===b.length?null:b});d.highlightItems(e,c)}},open:function(){var b=this;b._positionList(),b.drop.show(),a(":sf-droplist(open)").not(b.element).sfDropList("close"),a(b._context.ext.window()).bind("resize."+b._eventId,function(){b.isOpen()&&b._positionList()}),a.isFunction(b.options.onOpen)&&b.options.onOpen(b.element)},close:function(){var b=this,c=!0;a.isFunction(b.options.onClose)&&(c=b.options.onClose(b.element)),c&&(b.drop.hide(),a(b._context.ext.window()).unbind("resize."+b._eventId))},toggle:function(){this.isOpen()?this.close():this.open()},addItem:function(b){var c,d,e,f,g;if(!b)throw"You must provide arguments indicating what you'd like to add to the droplist.";"object"==typeof b?(d=b.html,c=b.text||b.value,e=b.value||b.text,f=b.index,g=b.classes):(c=b.toString(),e=c);var h=a("<li/>").attr("data-value",e);d?(h.html(d),h.find("[data-main]").length||h.children().first().attr("data-main","true")):c&&h.append(a('<div data-main="true"/>').text(c)),g&&h.addClass(g),0===f?h.prependTo(this.list):f?this.list.find("li:nth-child("+(f+1)+")").before(h):h.appendTo(this.list),this._attachItemClickHandler(h)},removeItem:function(a){var c,d;"number"==typeof a?c=a:"string"==typeof a?d=a:"index"in a?c=+a.index:d=a.value;var e,f;c===b?(e='li[data-value="'+d+'"]',f=d==this.val()):(e="li:nth-child("+(c+1)+")",f=c==this.selectedIndex()),this.list.find(e).remove(),f&&this.selectItem(0)},enable:function(){this.wrapper.removeClass(this.baseClass+"-select-disabled").removeAttr("disabled"),this._enabled=!0},disable:function(){this.close(),this._enabled=!1,this.wrapper.addClass(this.baseClass+"-select-disabled").attr("disabled","disabled")},isOpen:function(){return this.drop.is(":visible")},val:function(){return this.list.children("li[data-selected]").length?this.list.children("li[data-selected]").attr("data-value"):null},selectedItem:function(){return this.list.children("li[data-selected]")},selectedIndex:function(){return this.list.children("li[data-selected]").index()},box:function(){return this.wrapper}};ux.util.module("DropList",c),ux.util.selector("sf-droplist",{root:{selector:".sf-droplist",states:{open:function(a){return a.sfDropList("isOpen")},closed:function(a){return!a.sfDropList("isOpen")}},tests:{id:function(a,b){return a.attr("id")===b}}}})}(jQuery),function(a,b,c){var d=b["sf.player"],e={options:{videos:[],relatedStyle:"sidebar",heightMin:500,zIndex:c,context:self,currentItem:-1,destroyOnClose:!0,onVideoChange:c,onOpen:c,onClose:c},_isOpen:!1,_zIndex:0,_create:function(){this._checkCanBuild()&&(this._initSettings(),this._saveStateForDestroy(),this._initContent(),this._initBase(),this._showVideo(),this.open())},_checkCanBuild:function(){return 0===this.options.videos.length?(this.destroy(),!1):!0},_initSettings:function(){this._elements={},this._zIndex=this.options.zIndex,this._context=this.options.context,this._videos=a.merge([],this.options.videos);for(var b=this,c=0,d=this._videos.length;d>c;c++){var e=this._videos[c];e.id=e.id||b._generateId("rm"),e.id=e.id.replace("rm-","")}this._relatedStyle=this._videos.length>1?this.options.relatedStyle:"none",this._currentItem=this.options.currentItem,this._currentRelatedItem=-1,this._itemCount=this._videos.length,this._preventOverflowChanges=a("body:first",this._context.document).find("embed[flashvars]").length>0&&ux.util.ua.ff},_saveStateForDestroy:function(){var a=this._elements;a.initParent=this.element.parent(),this._initHasParent=a.initParent.length>0,this._initHasParent&&(a.initPrev=this.element.prev()),null===this.options.destroyOnClose&&(this.options.destroyOnClose=this._initHasParent===!1)},_initBase:function(){var a=this._elements,b=this;this._base=new ux.base.modal,this._base.init({element:this.element,context:this._context,dialog:a.dialog,content:a.content,inner:a.inner,zIndex:this._zIndex,fixedHeight:!0,fixedWidth:!0,overlay:{skin:ux.skin,useAlt:!1,clickToClose:function(){b.close()}}}),this._base.positioner({idealWidth:"sidebar"===this._relatedStyle?800:642,widthMin:642,heightMin:this.options.heightMin,margin:{x:20,y:20},extraHeight:function(){return a.title.outerHeight(!0)},widthAdjustment:function(b){var c=parseInt(a.banner.attr("data-nwidth"));return c=isNaN(c)?b:c}}).set({disableAnimations:!this._isOpen,animationDuration:400})},_initContent:function(){var b=this,c=this._elements;this.element.addClass(this.baseClass).show(),c.meBody=a("body:first",this._context.document),c.dialog=a("<div/>").addClass("sf-pc sf-pc-video").css("position","absolute"),c.close=a("<button/>").addClass("close").attr("type","button").html(""),c.content=a("<div/>").addClass("sf-pc-content"),c.inner=a("<div/>").addClass("sf-pc-main"),c.title=a("<div/>").addClass("sf-pc-title"),c.banner=a("<div/>").addClass("sf-pc-banner").css({position:"relative",height:"360px",width:"640px"}),c.description=this.element.find(".sf-pc-description"),c.description.children().addClass("sf-pc-car-item sf-pc-car-item-inactive"),this._initTitles(),this.element.prepend(c.banner),c.inner.append(this.element),c.content.append(c.inner),c.dialog.append(c.close),c.dialog.append(c.title),c.dialog.append(c.content),c.meBody.append(c.dialog);var d={sidebar:function(){c.sidebar=a("<div/>").addClass("sf-pc-sidebar").appendTo(c.content),c.dialog.addClass("sf-pc-video-ext"),b._initSideBar()},panel:function(){c.description.children().wrapInner('<div class="sf-pc-description-main" />'),c.sidepanel=a("<div>").addClass("sf-pc-description-sidebar").appendTo(c.description),b._initSidePanel()},none:function(){return!0}};d[this._relatedStyle](),c.close.bind("click",function(){b.close()})},_initSideBar:function(){for(var b=this,c=this._elements,e=c.sidebar.append(a("<div/>").addClass("sf-pc-hdr2").text("{0}:".sfFormat(d.relatedVid))),f=a("<ul/>").addClass("sf-pc-video-list").appendTo(e).wrap(a("<div />").addClass("sf-pc-video-list-wrap")),g=this.currentItem(),h=0;h<this._videos.length;h++){var i=this._videos[h],j=a("<li/>").append(a("<a/>").attr({href:"javascript: void(0);",onclick:"return false;","data-videoid":i.id}).bind("click",function(){b.showVideo(a(this).attr("data-videoid")),a(this).parents("ul").find("li:not(:visible)").show(),a(this).parent().css("display","none")}).append(a("<span />").addClass("sf-pc-video-thumb").append(a("<img />").attr("src",i.thumbnail))).append(a("<span />").addClass("sf-pc-video-title").text(i.title))).appendTo(f);h===g&&j.css("display","none")}c.content.append(a("<div />").addClass("sf-pc-sidebar-grad"))},_initSidePanel:function(){for(var b=this,c=this._elements,e=c.sidepanel.append(a("<div/>").addClass("sf-pc-hdr2").text("{0}:".sfFormat(d.relatedVid))),f=a("<div/>").addClass("sf-pc-video-album").appendTo(e).append(a("<a/>").addClass("sf-pc-video-album-prev sf-pc-video-album-arrow sf-pc-video-album-arrow-dsabld").attr({href:"javascript: void(0);",onclick:"return false;"}).text("Prev").bind("click",function(){a(this).hasClass("sf-pc-video-album-arrow-dsabld")||b.prevRelated()})).append(a("<a/>").addClass("sf-pc-video-album-next sf-pc-video-album-arrow sf-pc-video-album-arrow-dsabld").attr({href:"javascript: void(0);",onclick:"return false;"}).text("Next").bind("click",function(){a(this).hasClass("sf-pc-video-album-arrow-dsabld")||b.nextRelated()})),g=a("<div />").addClass("sf-pc-video-album-main").appendTo(f),h=0;h<this._videos.length;h++){var i=this._videos[h];a("<div/>").addClass("sf-pc-album-item").append(a("<div/>").addClass("sf-pc-video-album-title").text(i.title)).append(a("<div />").addClass("sf-pc-video-album-thumb").append(a("<a/>").attr({href:"javascript: void(0);",onclick:"return false;","data-videoid":i.id}).append(a("<img />").attr("src",i.thumbnail)).bind("click",function(){b.showVideo(a(this).attr("data-videoid"))}))).appendTo(g)}},_initTitles:function(){for(var b=this._elements.title,c=0;c<this._videos.length;c++){var d=this._videos[c];b.append(a("<div/>").addClass("sf-pc-car-item sf-pc-car-item-inactive").text(d.title))}},_getIndexFromVideoId:function(a){for(var b=-1,c=0;c<this._videos.length;c++)if(this._videos[c].id===a){b=c;break}return b},_showVideo:function(b){var c="undefined"!=typeof b;if(b=c?b:this.currentItem(),this._currentItem!==b||!c){this._currentItem=b;var d=this._elements,e=d.title.find(".sf-pc-car-item");e.removeClass("sf-pc-car-item-active").addClass("sf-pc-car-item-inactive"),e.eq(b).addClass("sf-pc-car-item-active").removeClass("sf-pc-car-item-inactive");var e=d.description.find(".sf-pc-car-item");e.removeClass("sf-pc-car-item-active").addClass("sf-pc-car-item-inactive"),e.eq(b).addClass("sf-pc-car-item-active").removeClass("sf-pc-car-item-inactive"),d.dialog.css("width",""),d.banner.empty();var f=a("<div />").appendTo(d.banner).css({overflow:"hidden"}),g=this._videos[b],h={rel:0,modestbranding:1,showinfo:0};if(g.params&&a.extend(h,g.params),"undefined"!=typeof MediaElementPlayer){var i=g.url||"",j="MSPlayer-"+g.id,k="youtube";if(""!==i){var l=i.substr(0,4),m=i.substr(i.lastIndexOf("."));k="rtmp"===l?"rtmp":".ogv"===m?"ogg":".webm"===m?"webm":"mp4"}else i=g.id;f.append('<video id="'+j+'" width="640" height="360"><source type="video/'+k+'" src="'+i+'" /></video>'),f.data("MediaElementPlayer",new MediaElementPlayer("#"+j,{flashStreamer:i}))}else f.append('<iframe id="vplayer-'+g.id+'" width="640" height="360" src="//www.youtube.com/embed/'+g.id+"?"+a.param(h)+'" frameborder="0" allowfullscreen></iframe>');this[this.currentRelatedItem()>=this._videos.length-1?"prevRelated":"nextRelated"](),this.position(),a.isFunction(this.options.onVideoChange)&&this.options.onVideoChange(this.element,this.currentItem(),this._videos[this.currentItem()],this._getCurrentContentElements())}},_getCurrentContentElements:function(){return{title:this._elements.title.find(".sf-pc-car-item-active"),description:this._elements.description.find(".sf-pc-car-item-active")}},currentItem:function(){if("none"===this._relatedStyle)this._currentItem=0;else if(-1===this._currentItem){var a=this._elements.description.children(".sf-pc-car-item.sf-pc-car-item-active");this._currentItem=0===a.length?0:a.index()}return this._currentItem},next:function(){this._videos.length<=1||this.currentItem()+1<this._itemCount&&this.moveToVideo(this.currentItem()+1)},prev:function(){this._videos.length<=1||this.currentItem()-1>-1&&this.moveToVideo(this.currentItem()-1)},currentRelatedItem:function(){if("panel"!==this._relatedStyle)this._currentRelatedItem=-1;else if(-1===this._currentRelatedItem){var a=this._elements.description.find(".sf-pc-album-item-active");this._currentRelatedItem=0===a.length?0:a.index()}return this._currentRelatedItem},nextRelated:function(){if("panel"===this._relatedStyle){var a=this.currentRelatedItem();a+=a+1===this.currentItem()?2:1,a<this._videos.length&&this.moveRelatedItem(a)}},prevRelated:function(){if("panel"===this._relatedStyle){var a=this.currentRelatedItem();a-=a-1===this.currentItem()?2:1,a>-1&&this.moveRelatedItem(a)}},moveRelatedItem:function(a){a="undefined"==typeof a?this.currentRelatedItem():a,this._currentRelatedItem=a;var b=this._elements.description.find(".sf-pc-video-album");b.find(".sf-pc-album-item.sf-pc-album-item-active").removeClass("sf-pc-album-item-active"),b.find(".sf-pc-album-item").eq(a).addClass("sf-pc-album-item-active");var c=this._videos.length-(this.currentItem()===this._videos.length-1?2:1);b.find(".sf-pc-video-album-next")[c>a?"removeClass":"addClass"]("sf-pc-video-album-arrow-dsabld");var d=0===this.currentItem()?1:0;b.find(".sf-pc-video-album-prev")[a>d?"removeClass":"addClass"]("sf-pc-video-album-arrow-dsabld")},moveToVideo:function(a){!isNaN(a)&&a>-1&&a<this._videos.length&&this._showVideo(a)},showVideo:function(a){var b=this._getIndexFromVideoId(a);this._showVideo(b)},position:function(){this._base.position.canReposition()&&this._base.position.reposition({disableAnimations:!this._isOpen})},open:function(){this._isOpen||(this._base.open({disableAnimations:!0}),this._isOpen=!0,this._elements.dialog.show(),a.isFunction(this.options.onOpen)&&this.options.onOpen(this.element,this._getCurrentContentElements()))},close:function(){if(this._isOpen){var b=!0;a.isFunction(this.options.onClose)&&(b=this.options.onClose(this.element,this._getCurrentContentElements())),("undefined"==typeof b||b===!0)&&(this._elements.dialog.hide(),this._base.close(),this._isOpen=!1,this.options.destroyOnClose&&this.destroy())}},isOpen:function(){return this._isOpen},destroy:function(b){function c(){e.banner.remove(),e.title.remove(),e.description.children().removeClass("sf-pc-car-item sf-pc-car-item-inactive sf-pc-car-item-active"),"panel"===d._relatedStyle&&(e.description.find(".sf-pc-description-main").children().unwrap(),e.description.find(".sf-pc-description-sidebar").remove()),e.initPrev.length>0?d.element.insertAfter(e.initPrev):d.element.appendTo(e.parent),e.dialog.remove(),delete d._base,d._execSuper("destroy",b)}this.isOpen()&&this.close();var d=this;if(this._initHasParent){this.element.removeClass(this.baseClass).css("display","none");var e=this._elements;e.banner.find("iframe").attr("src","").hide(),setTimeout(c,100)}else d._elements.banner.find("iframe").attr("src","").hide(),setTimeout(function(){d._elements.dialog.appendTo(document.body),d._elements.dialog.remove(),delete d._base,d._execSuper("destroy",b),a.isFunction(b)&&b()},100)}};ux.util.module("Player",e),ux.util.selector("sf-player",{root:{selector:".sf-player",tests:{id:function(a,b){return a.attr("id")===b}},states:{open:function(a){return a.sfPlayer("isOpen")},closed:function(a){return!a.sfPlayer("isOpen")}}}})}(jQuery,ux.i18n),function(a,b){var c={options:{type:"h",style:"i",min:0,max:100,initVal:0,unitSize:b,showTickLabels:!0,tickInterval:1,ticks:b,tickFormat:"[tval]",snap:!1,valueInterval:b,reverse:!1,onValueChanged:b,keyScroll:!0,mouseScroll:!0},_x:{val:0,min:0,max:100,range:100},_y:{val:0,min:0,max:100,range:100},_handle:{},_bar:{},_wrap:b,_barWrap:b,_barVal:b,_ticks:{},_timeout:b,_reverse:!1,_create:function(){this._initSettings(),this._initContent(),this._sizeContent(),this._val(this._axis.name,this.options.initVal,!0)},_initSettings:function(){var c=this.options;this.options.snap===!0&&"undefined"==typeof this.options.valueInterval&&(this.options.valueInterval=1),"ticks"===this.options.snap&&(this.options.valueInterval=this.options.tickInterval),this._reverse=c.reverse===!0;var d=this._axis=this["_"+("h"===c.type?"x":"y")];d.min=c.min,d.max=c.max,d.range=c.max-c.min,d.name="h"===c.type?"x":"y",d.opposite="h"===c.type?"y":"x",d.dimension="x"===d.name?"width":"height",this._ticks={show:c.showTickLabels,interval:c.tickInterval,count:Math.floor(d.range/c.tickInterval)+1,data:a.isArray(c.ticks)?a.map(c.ticks,function(a,b){var e=b*c.tickInterval;return{name:a.toString(),val:e<d.max?e:d.max}}):b,autoPopulated:!1},this._populateTicks()},_populateTicks:function(){var a=this._ticks,b=this._axis;if(a.count=Math.floor(b.range/a.interval)+1,"undefined"==typeof a.data&&(a.data=[]),a.show&&0===a.data.length){for(var c=b.min;c<b.max;c+=a.interval)a.data.push({name:c.toString(),val:c});a.data.push({name:b.max.toString(),val:b.max}),a.autoPopulated=!0,a.count=a.data.length}"g"===this.options.style&&b.range>2&&a.data.length>2&&(a.data=[a.data[0],a.data[1]])},_initContent:function(){var b=this,c=b.options,d=b._bar.element=b.element;d.addClass(this.baseClass),d.wrap(a("<div/>").addClass(b.baseClass+"-wrap").addClass(b.baseClass+("h"===c.type?"-hori":"-vert")).addClass(b.baseClass+("i"===c.style?"-inc":"-grad"))),b._wrap=d.parent(),b._reverse&&b._wrap.addClass(b.baseClass+"-rev"),c.colorscheme&&b._wrap.addClass(b.baseClass+"-"+c.colorscheme),d.wrap(a("<div/>").addClass(b.baseClass+"-barwrap")),b._barWrap=d.parent();var e=b._handle.element=a("<div/>").insertAfter(d).addClass(b.baseClass+"-handle").append('<span class="sf-slider-handle-icn uxicon uxicon-grab-sq"></span>'),f=b._barVal=a("<div/>").insertAfter(d).addClass(b.baseClass+"-value"),g=b._ticks;g.labels=a("<div/>").insertBefore(d).addClass(b.baseClass+"-ticks"),g.pointers=a("<div/>").insertAfter(f).addClass(b.baseClass+"-tickpoints");var h=function(a){b._mouseDown(a)};d.bind("mousedown."+b.id,h),e.bind("mousedown."+b.id,h),f.bind("mousedown."+b.id,h),g.labels.bind("mousedown."+b.id,h),g.pointers.bind("mousedown."+b.id,h),b._handle.width=e.width(),b._handle.height=e.height()},_sizeContent:function(){var a=this,b=a._bar.element,c=a._barVal,d=a._barWrap,e="x"===a._axis.name,f=e?"left":"top";a._barPad=parseInt(d.css("padding-"+f),10);var g=parseInt(d.css("border-"+f+"-width"),10);a._barDiff=isNaN(g)?0:g;var h=a._unitSize=a._getUnitSize(),i=a._bar.width=h&&e?h*a._axis.range:b.width(),j=a._bar.height=h&&!e?h*a._axis.range:b.height();b.width(i),b.height(j),d.width(i),d.height(j),c.width(e?0:i+2*a._barDiff),c.height(e?j+2*a._barDiff:0);var k={};k[a._reverse?"right":"left"]=-a._barDiff+"px",k[a._reverse?"bottom":"top"]=-a._barDiff+"px",c.css(k),a._handle.element.css(e?"top":"left",(e?j:i)-a._handle.element[e?"height":"width"]()>>1),a._buildTicks()},_getUnitSize:function(){var c=this,d=this.options,e=this._axis.dimension,f="number"==typeof d.unitSize?d.unitSize:b,g=0;if("undefined"==typeof f){var h="number"==typeof d.size?d.size:"string"==typeof d.size&&parseInt(d.size,10).toString().length<d.size.length?this.element.css(e,d.size)[e]():""!==this.element[0].style[e]?this.element[e]():0;h-=2*c._barPad,f=h>0?h/this._axis.range:(this._ticks.count-1)/this._axis.range*20}return a.each(this._ticks.data,function(){var a=c._getLabelText(this.name,this.val),b=c._setLabel(a,!0);b>g&&(g=b)}),g=Math.floor(g/this._ticks.interval),g>f&&(f=g),f},_buildTicks:function(){var b=this,c=b._ticks,d=b.options,e=b._bar.element,f=b._unitSize,g="x"===b._axis.name,h=b._axis.dimension;if(c.labels[h](e[h]()+f),c.pointers[h](e[h]()+f),c.show||"g"===d.style){c.labels.empty(),c.pointers.empty();for(var i=c.count-1,j=c.interval*f,k=0;i>=k;k++){var l=a("<div />").addClass(b.baseClass+"-tickpoint").appendTo(c.pointers),m=k*j,n=b._axis.range*b._unitSize,o=k===i&&m>n?j-(m-n):j;m=k===i?(k-1)*j+o:m;var p=m+b._barPad-(k===i?1:0);if(l.css(g?"left":"top",p+"px"),c.show){var q=b._reverse?i-k:k,r="g"===d.style&&q===i?1:q;if("i"===d.style||0===k||k===i){var s=this._getLabelText(c.data[r].name,c.data[r].val),t=this._setLabel(s),u=t.elTick,v=t.size;o>v&&(v=o,u[h](v)),u.css(g?"left":"top",p-(v>>1)+"px"),g||u.css("line-height",v+"px")}}}}},_getLabelText:function(b,c){var d=this.options.tickFormat;return"string"!=typeof b?"":"string"==typeof d?d.replace("[tval]",b):a.isFunction(d)?d(b,c).toString():b},_setLabel:function(b,c){c="boolean"!=typeof c?!1:c;var d=a("<div />").addClass(this.baseClass+"-tick").html(b).appendTo(this._ticks.labels),e=d["outer"+this._axis.dimension.substr(0,1).toUpperCase()+this._axis.dimension.substr(1)](!0);return c?(d.remove(),e):{size:e,elTick:d}},_rebuild:function(b,c,d){a.isArray(b)?this._ticks.data=a.map(b,function(a,b){return{name:a.toString(),val:b}}):this._ticks.autoPopulated===!0&&(this._ticks.data=[]),"number"==typeof c&&(this._ticks.interval=c),"number"==typeof d&&(this._unitSize=d),this._populateTicks(),this._sizeContent(),this.draw()},_mouseDown:function(b){var c=this;c._bar.offset=c._bar.element.offset(),c._handle.element.addClass("sf-slider-handle-move"),c._wrap.addClass("sf-slider-handle-move"),clearTimeout(c._timeout),c._timeout=setTimeout(function(){c._setValuesFromMousePosition(b)},0),a(document).bind("mousemove."+c.id,function(a){c._mouseMove(a)}).bind("mouseup."+c.id,function(a){c._mouseUp(a)}),c._attachShortcuts(),b.preventDefault()},_mouseMove:function(a){var b=this;return clearTimeout(b._timeout),b._timeout=setTimeout(function(){b._setValuesFromMousePosition(a)},0),a.stopPropagation(),a.preventDefault(),!1},_mouseUp:function(b){var c=this;return c._handle.element.removeClass("sf-slider-handle-move"),c._wrap.removeClass("sf-slider-handle-move"),a(document).unbind("mouseup."+c.id).unbind("mousemove."+c.id),b.stopPropagation(),b.preventDefault(),!1},_attachShortcuts:function(){var b=this,c=a(document).trigger("clearMousewheel.sfSlider").unbind(".sfSlider");if(this.options.keyScroll||this.options.mouseScroll){var d=function(a){b._handleShortcut(a)};this.options.keyScroll&&c.bind("keydown.sfSlider",d),this.options.mouseScroll&&(this._wrap.bind("mousewheel.sfSlider DOMMouseScroll.sfSlider",d),c.bind("clearMousewheel.sfSlider",function(){b._wrap.unbind(".sfSlider")})),setTimeout(function(){c.bind("mousedown.sfSlider",function(){c.trigger("clearMousewheel.sfSlider").unbind(".sfSlider")})},0)}},_handleShortcut:function(b){var c=0;b=a.event.fix(b||window.event),(b.wheelDelta||b.originalEvent&&b.originalEvent.wheelDelta)&&(c=(b.wheelDelta||b.originalEvent&&b.originalEvent.wheelDelta)/120),(b.detail||b.originalEvent&&b.originalEvent.detail)&&(c=-(b.detail||b.originalEvent&&b.originalEvent.detail)/3);var d,e,f=Math.round(100*this._axis.val),g=Math.round(100*(this.options.valueInterval||1)),h=Math.round(100*(this.options.tickInterval||1)),i=function(){return b.preventDefault(),!1};if(b.shiftKey&&h>g?(g=h,this._reverse&&(g*=-1),d=f%g===0?(f+g)/100:Math.round(Math.ceil(f/g)*g)/100,e=f%g===0?(f-g)/100:Math.round(Math.floor(f/g)*g)/100):(this._reverse&&(g*=-1),d=(f+g)/100,e=(f-g)/100),"h"===this.options.type){if(0>c||37===b.keyCode)return this.val(e),i();if(c>0||39===b.keyCode)return this.val(d),i()}else{if(c>0||38===b.keyCode)return this.val(e),i();if(0>c||40===b.keyCode)return this.val(d),i()}},_setValuesFromMousePosition:function(a){var b=this,c=a.pageX-b._bar.offset.left,d=a.pageY-b._bar.offset.top,e=b._bar.width,f=b._bar.height;c=0>c?0:c>e?e:c,d=0>d?0:d>f?f:d;var g={x:c/e*b._x.range+b._x.min,y:d/f*b._y.range+b._y.min};b._reverse&&(g.x=b._x.max-g.x,g.y=b._y.max-g.y),this._val(b._axis.name,g)},_getPreciseValue:function(a,b){if(a>=this._axis.max)return this._axis.max;if("undefined"==typeof this.options.valueInterval)return a;var c=this,d="number"!=typeof b?c.options.valueInterval:b,e=d.toString(),f=e.indexOf(".")>-1?e.split(".")[1].length:0;if(f>0){var g=a%d,h=Math.round(g*Math.pow(10,f));a+=g*(h>=5?1:-1),a=parseFloat(a.toFixed(f))}else a=Math.round(a);return a},_val:function(c,d,e){var f=d!==b,g=this;c="string"!=typeof c||"xy".indexOf(c)<-1?g._axis.name:c;var h=2===c.length,i={x:g._x.val,y:g._y.val};if(f){"undefined"==typeof e&&(e=!0);var j=!1,k=function(a,b){var c=b[a],e=g["_"+a];c="number"==typeof d?d:"number"==typeof d[a]?d[a]:c,c!==e.val&&(c<e.min?c=e.min:c>e.max&&(c=e.max),e.val!==c&&(e.val=c,b[a]=a===g._axis.name?g._getPreciseValue(c):c,j=!0))};c.indexOf("x")>-1&&k("x",i),c.indexOf("y")>-1&&k("y",i),e&&g.draw(),j&&a.isFunction(g.options.onValueChanged)&&g.options.onValueChanged(g.element,i[g._axis.name])}return h?i:g["_"+c].val},_range:function(c){c=a.extend({},c);var d=c.value,e=d!==b,f=this,g="string"!=typeof c.name?"all":c.name.toLowerCase(),h="all"===g,i=h?"":g.substr(-1,1),j=h?"":g.substr(0,g.length-1),k={minX:f._x.min,maxX:f._x.max,rangeX:f._x.range,minY:f._y.min,maxY:f._y.max,rangeY:f._y.range};if(e){var l=function(a,b,c){var e=a.toUpperCase(),h=c[b+e],i=f["_"+a];h="number"==typeof d&&b+a===g?d:"number"==typeof d[b+e]?d[b+e]:h,"number"==typeof h&&i[b]!==h&&(i[b]=h,c[b+e]=h,i.range=i.max-i.min,c["range"+e]=i.range)};("x"===i||"all"===g)&&("max"!==j&&l("x","min",k),"min"!==j&&l("x","max",k)),("y"===i||"all"===g)&&("max"!==j&&l("y","min",k),"min"!==j&&l("y","max",k))}return h?k:"rangex"===g?{minX:k.minX,maxX:k.maxX,rangeX:k.rangeX}:"rangey"===g?{minY:k.minY,maxY:k.maxY,rangeY:k.rangeY}:f["_"+i][j]},draw:function(){function a(a,c,d){var e=0;if(a.range>0){var f=b.options.snap===!0||"values"===b.options.snap?b._getPreciseValue(a.val):"ticks"===b.options.snap?b._getPreciseValue(a.val,b.options.tickInterval):a.val;e=f===a.max?c:(f-a.min)/a.range*c|0}return e}var b=this;
setTimeout(function(){var c="x"===b._axis.name,d=a(b._axis,b._bar[b._axis.dimension],b._handle.element["outer"+(c?"Width":"Height")]());b._handle.element.css(c?b._reverse?"right":"left":b._reverse?"bottom":"top",d+"px"),b._barVal.css(b._axis.dimension,d+"px")},0)},changeRange:function(a){if(a="undefined"==typeof a?{}:a,a.hasOwnProperty("min")||a.hasOwnProperty("max")){var b={},c=this._axis.name.toUpperCase();"number"==typeof a.min&&"number"==typeof a.min?(b.value={},b.value["min"+c]=a.min,b.value["max"+c]=a.max,b.name="range"+c):"number"==typeof a.min?(b.name="min"+c,b.value=a.min):(b.name="max"+c,b.value=a.max),this._dir(b,"rops"),this._range(b),"number"==typeof a.value&&this._val(this._axis.name,a.value,!1),this._rebuild(a.ticks,a.tickInterval,a.unitSize)}},val:function(a){if("undefined"==typeof a||"number"==typeof a&&"number"==typeof a.value)return this._axis.val;var b="number"==typeof a?a:a.value,c="number"==typeof a?!0:a.refresh!==!1;return this._val(this._axis.name,b,c),this._axis.val},destroy:function(a){this.element.removeClass(this.baseClass);var b=this.id;this._bar.element.unbind("mousedown."+b),this._handle.element.unbind("mousedown."+b),this._barVal.unbind("mousedown."+b),"g"===this.options.style&&this._ticks.pointers.unbind("mousedown."+b),this._bar.element.insertBefore(this._wrap),this._wrap.remove(),this._execSuper("destroy",a)}};ux.util.module("Slider",c),ux.util.selector("sf-slider",{root:{selector:".sf-slider",tests:{id:function(a,b){return a.attr("id")===b}}}})}(jQuery),function(a,b,c){var d=b["sf.tourguide"],e={options:{tourId:c,currentPointIndex:0,keepHistory:!0,pointAutoOpen:!1,suppressAutoOpenIfAllViewed:!0,cyclePoints:!1,listAnchor:c,listHeadingText:d.newFeatures,listHideText:d.hide,listYDefaultPosition:"bottom",listXIdealPosition:"center",listAutoOpen:!1,listAutoOpenIfUnviewed:!1,closeListOnSelection:!0,tourStartAnchor:c,pointHeading:d.newFeature,pointShowMoreText:d.more,pointShowLessText:d.less,onListOpen:c,onListClose:c,onPointSelect:c,onPointOpened:c,onPointClose:c},destroy:function(a){this.list.anchor&&(this.list.element.sfFlyout("destroy"),this.list.anchor.removeClass($w.baseClass+"-listanchor")),this.tour.anchor&&this.tour.anchor.removeClass($w.baseClass+"-touranchor").unbind("click.sftg"),this._execSuper("destroy",a)},_create:function(){var a=this,b=a.options;b.boxShadowAdjustment=5,b.dialogBoxShadowAdjustment=5,a.list={anchor:c,element:c},a.tour={points:[],currentIndex:b.currentPointIndex,anchor:c,pointOpen:!1,id:b.tourId?b.tourId:a.id},b.keepHistory=b.keepHistory&&a.canKeepHistory(),this._createAnchors(),this._loadPoints(),this._initFlyout()},_createAnchors:function(){var b=this;if(b.list.anchor=b.options.listAnchor,!b.list.anchor||0==a(b.options.listAnchor).length){var d=b.element.attr("data-listanchor");""!=d&&a(d).length>0&&(b.list.anchor=a(d))}b.list.anchor&&b.list.anchor.addClass(b.baseClass+"-listanchor").attr("data-anchor-tour",b.tour.id),b.tour.anchor=b.options.tourStartAnchor?a(b.options.tourStartAnchor):c,b.tour.anchor&&a(b.tour.anchor).length>0?b.tour.anchor.addClass(b.baseClass+"-touranchor").attr("data-anchor-tour",b.tour.id).bind("click.sftg",function(a){b.startTour(),a.stopPropagation()}):b.tour.anchor=c},_loadPoints:function(){var b=this,c=-1,d="normal",e=b.element.find(".sf-tip").not("[data-style]"),f=e.length,g=b.list.element=a('<div class="'+b.baseClass+'-list"><div class="sf-tourguide-list-hdr">'+b.options.listHeadingText+"</div></div>").appendTo(document.body).append(b.element).append('<div class="'+b.baseClass+'-list-hide"><a href="javascript: void(0);" onclick="return false;">'+b.options.listHideText+"</a></div>").css({display:"none"});g.find("."+b.baseClass+"-list-hide a").bind("click",function(){b.closeList()}),e.attr("data-style","tourpoint"),b.element.addClass(b.baseClass+"-root").show(),"string"==typeof b.tour.currentIndex&&(d=b.tour.currentIndex,b.tour.currentIndex=0),b.options.keepHistory||"history"!=d||(d="normal"),e.each(function(e,g){var h=a(this),i={target:h.attr("data-target"),content:h.attr("data-content"),title:h.attr("data-title"),index:e};if(""!=i.target&&""!=i.content&&""!=i.title){h.attr("data-width")&&(i.width=h.attr("data-width")),h.attr("data-location")&&(i.location=h.attr("data-location")),i.content="<div>"+i.content+b._getTipperNavHtml(i.index,f)+"</div>",b.tour.points.push(i),h.bind("click",function(){b.moveToPoint(e),b.options.closeListOnSelection&&b.closeList()});var j=a(i.target),k=j.attr("data-tour");k=(k&&""!=k?k+",":"")+b.tour.id,j.addClass("sf-tourguide-point").attr("data-point-tour",k),"history"!=d||b._pointViewed(i)||-1!=c||(c=e)}}),"history"==d&&c>-1&&(b.tour.currentIndex=c),(b.tour.currentIndex>f-1||b.tour.currentIndex<0)&&(b.tour.currentIndex=0);var h=-1==c&&"history"==d;b.options.pointAutoOpen&&(!h||h&&!b.options.suppressAutoOpenIfAllViewed)&&b.moveToPoint(b.tour.currentIndex)},_getTipperNavHtml:function(b,c){b=b?b:0;var d=this;if(!d.tipperNav){for(var e='<div><ul class="sf-tourpoint-nav"><li class="sf-tourpoint-nav-prev"><span aria-hidden="true" class="uxicon uxicon-chevron-left"></span></li>',f=0;c>f;f++)e+='<li class="sf-tourpoint-nav-item" data-index="'+f+'"><span aria-hidden="true" class="uxicon"></span></li>';e+='<li class="sf-tourpoint-nav-next"><span aria-hidden="true" class="uxicon uxicon-chevron-right"></span></li></ul></div>',d.tipperNav=a(e)}var g=d.tipperNav.children("ul");return g.children("li.sf-tourpoint-nav-item").removeClass("current").eq(b).addClass("current"),d.options.cyclePoints||(g.children(".disabled").removeClass("disabled"),0==b&&g.children("li.sf-tourpoint-nav-prev").addClass("disabled"),b==c-1&&g.children("li.sf-tourpoint-nav-next").addClass("disabled")),d.tipperNav.html()},_initFlyout:function(){var b=this;if(b.list.anchor){var c=b.list.element,d=b.options.listAutoOpen||b.options.listAutoOpenIfUnviewed&&b.options.keepHistory&&b.unviewedPointIds().length>0,e={anchor:b.list.anchor,autoOpen:d,destroyOnClose:!1,dialogWidthIdeal:250,yDefaultPosition:b.options.listYDefaultPosition,xIdealPosition:b.options.listXIdealPosition,boxShadowAdjustment:b.options.boxShadowAdjustment,dialogBoxShadowAdjustment:b.options.dialogBoxShadowAdjustment,client:"sf-tourguide",singleClientInstance:!0,onOpen:function(){a.isFunction(b.options.onListOpen)&&b.options.onListOpen(b.element,c,b.tour.currentIndex,b.tour.points[b.tour.currentIndex])},onClose:function(){return a.isFunction(b.options.onListClose)?b.options.onListClose(b.element,c,b.tour.currentIndex,b.tour.points[b.tour.currentIndex]):void 0}};c.sfFlyout(e),c.show()}},moveToPoint:function(b){var d=this,e=d.tour;b==c&&(b=e.currentIndex);var f=a(":sf-tipper(group="+e.id+"):visible").length>0;if(f&&b==e.currentIndex)return!1;if(f){var g=e.points[e.currentIndex];a(g.target).sfTipper({close:!0})}else{var h=a(":sf-tipper(style=tourpoint):visible");h.length>0&&h.data("sf-tipper-target").sfTipper({close:!0})}var i=e.points[b],j=d.list.anchor?d.list.anchor:d.tour.anchor?d.tour.anchor:c,k=!0;return a.isFunction(d.options.onPointSelect)&&(k=d.options.onPointSelect(d.element,a(i.target),b)),"undefined"==typeof k||k?(i.tipper=a(i.target).sfTipper({style:"tourpoint",title:i.title,content:i.content,autoOpen:!0,attachIcon:!1,heading:d.options.pointHeading,width:i.width?i.width:255,location:i.location?i.location:"auto",fadeToAnchor:j,groupId:e.id,showMoreText:d.options.pointShowMoreText,showLessText:d.options.pointShowLessText,onDisplay:function(c,e){d.options.keepHistory&&d._pointViewed(i,!0),setTimeout(function(){e.find(".sf-tourpoint-nav-prev").one("click",function(a){d.movePrevPoint(),a.stopPropagation()}),e.find(".sf-tourpoint-nav-next").one("click",function(a){d.moveNextPoint(),a.stopPropagation()}),e.find(".sf-tourpoint-nav").bind("click",function(b){var c=a(this),d=b.pageX,e={prev:c.children(".sf-tourpoint-nav-prev"),next:c.children(".sf-tourpoint-nav-next")},f=d<e.prev.offset().left+e.prev.width()?"prev":d>e.next.offset().left?"next":null;f&&e[f].click()})},100),a.isFunction(d.options.onPointOpened)&&d.options.onPointOpened(d.element,a(i.target),b)},onClose:function(){var c=!0;return a.isFunction(d.options.onPointClose)&&(c=d.options.onPointClose(d.element,a(i.target),b)),c="undefined"==typeof c?!0:c}}),e.currentIndex=b,!0):!1},movePrevPoint:function(){var a=this,b=a.tour.currentIndex,c=!1,d=a.tour.points.length-1;return b--,a.options.cyclePoints?(0>b&&(b=d),c=!0):c=b>=0,c?(a.moveToPoint(b),!0):!1},moveNextPoint:function(){var a=this,b=a.tour.currentIndex,c=!1,d=a.tour.points.length-1;return b++,a.options.cyclePoints?(b>d&&(b=0),c=!0):c=d>=b,c?(a.moveToPoint(b),!0):!1},startTour:function(){return this.moveToPoint(this.tour.currentIndex)},openList:function(){var a=this;if(a.list.anchor&&!a.isListOpen()){var b=a.list.element;b.is(":sf-flyout")&&b.sfFlyout("open")}},closeList:function(){if(this.list.anchor){var a=this.list.element;a.is(":sf-flyout")&&a.sfFlyout("close")}},toggleList:function(a){this.isListOpen()?this.closeList():this.openList()},_getFlyout:function(){var a=this;if(a.list.anchor){var b=null;return a.list.element.is(":sf-flyout")&&(b=a.list.element.parents(".sf-flyout")),b}},repositionList:function(){var a=this;a.list.anchor&&a.list.element.is(":sf-flyout")&&a.list.element.sfFlyout("resize")},repositionPoint:function(){var b=a(this.tour.points[this.tour.currentIndex].target);b.is(":sf-tipper(target,open)")&&b.sfTipper({resize:!0})},canKeepHistory:function(){var a=new ux.util.storage;return a.isEnabled()},_pointState:function(a){var b=a,c="tour-"+this.tour.id,d=new ux.util.storage;return"undefined"==typeof a?(b=d.getItem(c,""),b=""!=b?b.split(","):[]):(a?(b=a,d.setItem(c,a.join())):(b=[],d.removeItem(c)),b)},_pointViewed:function(b,c){var d=this._pointState();if(!d)return!1;var e=a.grep(d,function(a){return a==b.target});return"undefined"==typeof c?e.length>0:(c&&(0==e.length?d.push(b.target):d=a.grep(d,function(a){return a!=b.target})),void this._pointState(d))},resetTour:function(a){this._pointState(null),a&&(this.tour.currentIndex=0)},isListOpen:function(){if(this.list.anchor){var a=this.list.element,b=!1;return a.is(":sf-flyout")&&(b=a.sfFlyout("isOpen")),b}},tourId:function(){return this.tour.id},currentPointIndex:function(){return this.tour.currentIndex},setCurrentPointIndex:function(a){this.tour.currentIndex=a},pointsCount:function(){return this.tour.points.length},pointIds:function(){return a.map(this.tour.points,function(a){return a.target})},viewedPointIds:function(){return this._pointState()},unviewedPointIds:function(){var b=this._pointState(),c=this.pointIds();return a.grep(c,function(c){return-1==a.inArray(c,b)})},currentPointId:function(){return this.tour.points[this.tour.currentIndex].target}};ux.util.module("TourGuide",e),ux.util.selector("sf-tourguide",{root:{selector:".sf-tourguide-root",tests:{id:function(a,b){var c=a.sfTourGuide("tourId");return c===b}}},point:{selector:".sf-tourguide-point",states:{open:function(b){var c=b.data("sf-tipper");return c&&a(":sf-tipper(target="+c+",open)").length>0},closed:function(b){var c=b.data("sf-tipper");return c&&0==a(":sf-tipper(target="+b.data("sf-tipper")+",open)").length}},tests:{id:function(b,c){found=!1;var d=b.attr("data-point-tour");return""!=d&&(found=a.inArray(c,d.split(","))>-1),found}}},anchor:{selector:".sf-tourguide-listanchor, .sf-tourguide-touranchor",tests:{id:function(a,b){return a.attr("data-anchor-tour")===b}}},list:{selector:".sf-tourguide-list"}})}(jQuery,ux.i18n),function($,i18n,undefined){sfUploadIFrame=function(a){this.mod=a,this.uploading=!1,this.uploads=[]},sfUploadXhr=function(a){this.mod=a,this.uploading=!1},sfUploadFlash=function(a){this.mod=a,this.uploading=!1};var watchTitle=function(a){var b,c,d,e;return b=function(){if($.browser.msie&&a.attachEvent&&a.originalTitle===undefined){if(a.originalTitle=a.title,Object.defineProperty){var b=$("title");b.length||(b=$("<title/>").text(a.originalTitle).appendTo("head")),Object.defineProperty(a,"title",{get:function(){return b.text()},set:function(c){return b.text(a.originalTitle=c)}})}a.attachEvent("onpropertychange",d)}},d=function(a){a&&"title"===a.propertyName&&setTimeout(e,0)},e=function(){a.title!==a.originalTitle&&(a.title=a.originalTitle)},c=function(){a.originalTitle&&(a.detachEvent("onpropertychange",d),Object.defineProperty&&(delete a.title,a.title=a.originalTitle),delete a.originalTitle)},{init:b,destroy:c}}(document),module={files:{},files_ar:[],options:{width:"100%",txt:i18n["sf.upload"],multiFile:!0,maxItems:999,maxUploads:undefined,modal:undefined,accept:"*",condensed:!1,uploadPath:undefined,uploaders:[sfUploadXhr,sfUploadFlash,sfUploadIFrame],ddEnabled:!0,expectData:!1,maxFileSize:0,showErrorHelper:!0,hideListOnFinish:!1,hideListOnFinishDelay:2e3,onGetUploader:undefined,onUpload:undefined,onSuccess:undefined,onProgress:undefined,onError:undefined,onClose:undefined,onStart:undefined,onFinish:undefined},_create:function(){if(this.getUploadPath()||0!=$.isFunction(this.options.onUpload)){1==this.options.maxItems&&(this.multiFile=!1),this.tuploads=0,this.element.parent().is(".sf-dialog-inner")&&(this.options.modal=this.element);var a=this;this.options.modal&&this.options.modal.sfDialog({onClose:function(){return 1==a.modalClosing?!0:(a.closeModal=!0,a.cancel())},onOpen:function(){a.closeModal=!1,a.modalClosing=!1}}),this.status=$('<span class="sf-upload-status"/>'),this.list=$('<ul class="sf-upload-list"/>'),this.scroller=$('<div class="sf-upload-scroller"/>').append(this.list).hide(),this.btns=$('<div class="sf-upload-btns"/>'),this.cancelYes=$('<button class="btn btn-link yes"/> ').html('<span class="uxicon uxicon-chevron-sign-right"></span> <span>'+this.options.txt.yes+"</span>"),this.cancelNo=$('<button class="btn btn-link no"/>').html('<span class="uxicon uxicon-chevron-sign-right"></span> <span>'+this.options.txt.no+"</span>"),this.toolBar=$('<div class="btn-toolbar pull-right"/>').append(this.cancelYes).append(" ").append(this.cancelNo),this.cancelAlert=$('<div data-style="warn"/>').html(this.options.txt.cancel).css({"margin-top":"20px"}).append(this.toolBar).sfAlert({hideClose:!0}).hide(),this.closeModal=!1,this.modalClosing=!1,this.cancelYes=this.cancelAlert.find(".yes"),this.cancelNo=this.cancelAlert.find(".no"),this.cancelYes.bind("click",function(){a.cancelAlert.hide(),a.cancel(a.cancelFiles,!0),a.options.condensed&&(a.condensedEl=!1)}),this.cancelNo.bind("click",function(){a.closeModal=!1,a.cancelAlert.hide()}),this.element.addClass("sf-upload").append(this.status).append(this.scroller).append(this.btns).append(this.cancelAlert),this.initUploader()}},uploaderReady:function(){if(this.upload.create(),this.updateStatus(),1==this.options.ddEnabled&&1==this.upload.isDDSupported()){var a=$('<span class="uxicon uxicon-cloud-upload"/>'),b=$('<div class="sf-upload-dd-instructions"/>').append(this.options.txt.dd_info),c=$('<div class="sf-upload-dd-foldername"/>').append(this.options.txt.dd_dest),d=$('<div class="sf-upload-dd-details"/>').append(this.options.txt.dd_limits),e=$('<div class="sf-upload-dd-content"/>').append(a).append(b).append(c).append(d),f=this,g=$('<div class="sf-upload-dd-zone-drop"/>').append(e).bind("dragover",function(a){a.stopPropagation(),a.preventDefault(),g.addClass("sf-upload-dd-zone-active")}).bind("dragleave",function(a){a.stopPropagation(),a.preventDefault(),g.removeClass("sf-upload-dd-zone-active")}),h=$('<a href="#" class="sf-upload-dd-zone-btn btn"/>').html(this.options.txt.dd_cancel).bind("dragover",function(a){a.stopPropagation(),a.preventDefault(),h.addClass("sf-upload-dd-zone-active")}).bind("dragleave",function(a){a.stopPropagation(),a.preventDefault(),h.removeClass("sf-upload-dd-zone-active")});this.dd=$('<div class="sf-upload-dd"/>').hide().append(g).append(h),$(document.body).append(this.dd),h.wrap('<div class="sf-upload-dd-zone-btnpane"></div>'),this.dd_enter=function(a){f.onDragOver(a)},this.dd_leave=function(a){f.onDragLeave(a)},this.dd_drop=function(a){f.onDragDrop(a)},document.addEventListener("dragenter",this.dd_enter),document.addEventListener("dragleave",this.dd_leave),document.addEventListener("drop",this.dd_drop)}},isDDInBounds:function(a){var b=$(window).width(),c=$(window).height();return a.clientX>=1&&a.clientX<=b-1&&a.clientY>=1&&a.clientY<=c-1},onDragOver:function(a){if(a&&a.dataTransfer&&a.dataTransfer.types)for(var b=a.dataTransfer.types,c=0;c<b.length;c++){if("text/html"==b[c]||"Text"==b[c])return;if("Files"==b[c])break}a.stopPropagation(),a.preventDefault(),0==this.dd.is(":visible")&&this.dd.show().find(".sf-upload-dd-zone-active").removeClass("sf-upload-dd-zone-active")},onDragEnd:function(a){a.stopPropagation(),a.preventDefault(),this.dd.hide()},onDragLeave:function(a){a.stopPropagation(),a.preventDefault(),0==this.isDDInBounds(a)&&this.dd.hide()},onDragDrop:function(a){a.stopPropagation(),a.preventDefault();var b=a.dataTransfer.files;if(this.dd.hide(),$(a.target).closest(".sf-upload-dd-zone-drop").length>0){var b=a.dataTransfer?a.dataTransfer.files:a.target.files;b&&"undefined"!=typeof b.length&&b.length>0&&(this.element.show(),this.addFiles(b),this.options.modal&&this.options.modal.sfDialog("open"))}},getUploadPath:function(a){return this.options.uploadPath},initUploader:function(a){this._log("initUploader: idx={0}".sfFormat(a));var b=this.options.uploaders,c=undefined;1==isNaN(a)&&(a=0);for(var d=a;d<b.length;d++){var e=b[d],f=e.isSupported(this,this.initUploader,d);if(f===!0){c||(c=e);break}if(f!==!1)return}1==$.isFunction(this.options.onGetUploader)&&(c=this.options.onGetUploader.call(this.element,c)),this.upload=new c(this),this.uploaderReady()},getFile:function(a){},addFiles:function(a){this._log("addFiles.files.length={0}".sfFormat(a.length));var b=[];this.options.condensed&&(this.condensedTotal=this.condensedTotalSize=this.condensedFinished=this.condensedFinishedSize=0);for(var c=0;c<a.length;c++){var d=a[c];if(this.tuploads>=this.options.maxItems||c>0&&0==this.options.multiFile){b.push(d);break}this.tuploads++,this.options.condensed&&(this.condensedTotal++,this.condensedTotalSize+=parseFloat(d.size)),this.addFile(d)||b.push(d)}this.tuploads>=this.options.maxItems&&this.btns.children(".sf-btn-file").hide(),this.onStart(b),this.uploadFiles()},addFile:function(a){var b=!0;return a.uploading=!1,a.finished=!1,a.error=!1,"undefined"!=typeof a.size&&this.options.maxFileSize>0&&a.size>this.options.maxFileSize&&(a.error=this.options.txt.maxSize,b=!1),this.files_ar.push(a),this.files[a.name]=a,this.options.condensed&&this.condensedEl?(a.li=this.condensedEl.removeClass("sf-upload-finished"),a.name_el=$(".sf-upload-name",this.condensedEl),a.size_el=$(".sf-upload-size",this.condensedEl),a.alert_el=$(".sf-upload-alert",this.condensedEl),a.bar_val_el=$(".progress-bar",this.condensedEl)):(a.retry_el=$('<a href="#" class="sf-upload-retry btn btn-link"/>').html('<span class="uxicon uxicon-chevron-sign-right"></span> <span>'+this.options.txt.retry+"</span>").hide(),a.name_el=$('<span class="sf-upload-name"/>').text(a.name),a.size_el=$('<span class="sf-upload-size"/>'),a.alert_el=$('<span class="sf-upload-alert"/>'),a.head_el=$('<div class="sf-upload-header"/>').append(a.retry_el).append(a.name_el).append(a.size_el).append(a.alert_el),a.bar_val_el=$('<span class="progress-bar"/>'),a.bar_el=$('<div class="progress"/>').append(a.bar_val_el),a.del_el=$('<a href="#" class="uxicon uxicon-delete-outline"/>').append("").bind("click",{me:this,file:a},this.onCancel),(this.options.condensed||1==this.options.maxItems||0==this.options.multiFile)&&a.del_el.hide(),a.cont_el=$('<div class="sf-upload-content"/>').append(a.bar_el).append(a.del_el),this.options.condensed&&(a.head_el.addClass("sf-upload-condensed"),a.cont_el.addClass("sf-upload-condensed")),a.li=$("<li/>").append(a.head_el).append(a.cont_el),this.list.append(a.li),this.options.condensed&&(this.condensedEl=a.li)),this.updateStatus(a),b},delFile:function(a){delete this.files[a.name];for(var b=this.files_ar,c=0;c<b.length;c++){var d=b[c];if(d.name==a.name){this.cfile&&this.cfile.name==d.name&&delete this.cfile,b.splice(c,1),$("*",d.li).unbind(),d.li.remove(),this.updateStatus([]);break}}},tryAgain:function(a){},getFiles:function(a){"undefined"==typeof a&&(a={pending:!0,uploading:!0,finished:!0,errors:!0});for(var b=[],c=this.files_ar,d=0;d<c.length;d++){var e=c[d],f=e.error!==!1;(a.errors&&f||a.finished&&e.finished||a.uploading&&e.uploading&&!f&&!e.finished||a.pending&&!e.uploading&&!f&&!e.finished)&&b.push(e)}return b},showFile:function(a){var b=a.li.position().top,c=this.scroller.height(),d=a.li.outerHeight(!0),e=this.scroller.scrollTop(),f=e+c,g=b+d;if(e>b)this.scroller.scrollTop(b);else if(g>f){var h=g-c+10;this.scroller.scrollTop(h)}},sizeToString:function(a){var b=1024,c=b*b;return(a/(a>=c?c:b)).toFixed(1)+" "+(a>=c?"MB":"KB")},hideList:function(a){a="number"==typeof a?a:this.options.hideListOnFinishDelay;var b=this;setTimeout(function(){b.cancelAlert.hide(),b.scroller[a>0?"slideUp":"hide"](a>0?"slow":0,function(){b.options.modal&&b.options.modal.sfDialog("resize",{noanim:!1})}).css("overflow-y","auto")},a)},updateStatus:function(a){var a=this.files_ar;1==$.isArray(a)?fs=a:"object"==typeof a&&(fs=[a]);for(var b=0;b<fs.length;b++){var c=fs[b];if(this.cfile&&this.cfile.name==c.name?(c.error!==!1||1==c.finished)&&delete this.cfile:this.cfile||c.error!==!1||1==c.finished||(this.cfile=c,this.showFile(c)),this.options.condensed||c.size_el&&c.size_el.text(c.size?" ("+this.sizeToString(c.size)+")":""),c.error!==!1)c.logged||(c.logged=!0,this.options.condensed?(this.condensedFinished++,this.condensedTotalSize-=parseFloat(c.size)):(c.li.addClass("sf-upload-error"),c.bar_el.removeClass("progress-striped active"),c.bar_val_el.css("width","0%").addClass("progress-bar-danger")),c.alert_el.text(this.options.txt.error),this._log("sfUpload.Error["+c.name+"]: "+c.error));else if(1==c.finished)c.logged||(c.logged=!0,this.options.condensed?(this.condensedFinished++,this.condensedFinishedSize+=parseFloat(c.size)):(c.li.addClass("sf-upload-finished"),c.bar_el.removeClass("progress-striped active"),c.bar_val_el.css("width","100%")),c.alert_el.text(this.options.txt.finished),this._log("sfUpload.Finished["+c.name+"]: Success"));else if(c.bar_val_el&&(!this.options.condensed||c==this.cfile))if(c.name_el.text(c.name),c.uploading||this.options.condensed?c.alert_el.text(this.options.txt.uploading):c.alert_el.text(this.options.txt.pending),this.options.condensed){var d=0,e=this.condensedTotal<=1?")":this.mod.options.txt.of+this.sizeToString(this.condensedTotalSize)+")";c.progress?(c.size&&(d=parseFloat(c.progress>c.size?c.size:c.progress)),c.size_el&&c.size_el.text(" ("+this.sizeToString(parseFloat(this.condensedFinishedSize+d))+e)):c.size_el&&c.size_el.text(" ("+this.sizeToString(this.condensedFinishedSize)+e),c.bar_el.removeClass("progress-striped active"),c.bar_val_el.css("width",Math.round(100*parseFloat((this.condensedFinished+(d?parseFloat(d/c.size):0))/this.condensedTotal))+"%")}else c.size&&c.progress?(c.progress>c.size&&(c.progress=c.size),c.bar_el.removeClass("progress-striped active"),c.bar_val_el.css("width",parseInt(c.progress/c.size*100)+"%")):(c.uploading?(c.bar_el.addClass("progress-striped active"),c.bar_val_el.css("width","100%")):(c.bar_el.removeClass("progress-striped active"),c.bar_val_el.css("width","0%")),0==c.finished&&1==c.uploading&&c.alert_el.text(this.options.txt.uploading))}if(0==this.files_ar.length)this.tuploads>=this.options.maxItems?this.status.html(this.options.txt.introMaxItems):1==this.upload.isDDSupported()&&1==this.options.ddEnabled?this.status.html(this.options.txt.introWithDrop):this.status.html(this.options.txt.intro),this.hideList(0),this.closeModal=!1;else{this.scroller.show();var f=this.getFiles({pending:!0,uploading:!0}).length,g=this.getFiles({finished:!0}),h=this.getFiles({errors:!0});if(f>0)this.status.html(this.options.txt.statusUploading.sfFormat(f));else{if(this.options.condensed&&(this.condensedEl.addClass("sf-upload-finished"),$(".progress-bar",this.condensedEl).css("width","100%"),$(".sf-upload-size, .sf-upload-name",this.condensedEl).text("")),this.status.html(this.options.txt.statusFinished.sfFormat(g.length,h.length)+"&nbsp;"),h.length>0&&this.options.showErrorHelper){for(var i="",b=0;b<h.length;b++){var c=h[b];i+="<strong>{0}</strong>: {1}<br/>".sfFormat(c.name,c.error)}var j=$("<span/>").appendTo(this.status);j.sfTipper({content:i,width:350})}this.cancelAlert.hide(),this.closeModal=!1}}this.options.modal&&this.options.modal.sfDialog("resize")},uploadFiles:function(){this.upload.uploadFiles(),this.updateStatus()},uploadComplete:function(){this.updateStatus()},onStart:function(a){var b=this.options.onStart;if($.isFunction(b)){var c=this.getFiles({pending:!0,uploading:!0});b(c,a||[])}},onFinish:function(){var a=this.options.onFinish;this.options.hideListOnFinish===!0&&this.hideList(),$.isFunction(a)&&a()},onUpload:function(a,b){var c=this.options.onUpload,d=this.options.uploadPath;if(1==$.isFunction(c)){var e=this,f=c.call(this.element,a,d,function(c){b.call(e.upload,a,"string"==typeof c?c:d)});if(f===!1||"string"!=typeof f)return;d=f}b.call(this.upload,a,d)},onSuccess:function(a,b){var c=this.options.onSuccess;if(1==$.isFunction(c)){var d=this.getFiles({pending:!0,uploading:!0});c(a,d,b)}},onProgress:function(a){var b=this.options.onProgress;$.isFunction(b)&&b(a)},onError:function(a){var b=this.options.onError;if($.isFunction(b)){var c=this.getFiles({pending:!0,uploading:!0});b(a,c)}},cancel:function(a,b){a||(a=this.files_ar);var c,d=a.slice(0),e=!1;for(c=0;c<d.length;c++){var f=d[c];if(0==f.finished&&f.error===!1){e=!0;break}}if(1==e&&b!==!0)return this.cancelFiles=a,this.cancelAlert.show(),this.options.modal&&this.options.modal.sfDialog("resize"),!1;var g=this.closeModal;for(c=0;c<d.length;c++){var f=d[c];0==f.finished&&f.error===!1&&this.upload.cancel(f),this.delFile(f)}return this.options.modal&&1==g&&0==this.files_ar.length&&(this.closeModal=!1,this.modalClosing=!0,this.options.modal.sfDialog("close")),this.options.condensed&&(this.condensedEl=!1),!0},onCancel:function(a){return a.data.me.cancel([a.data.file])},destroy:function(a){this.cancel(!1,!0),this.upload&&(this.upload.destroy(),delete this.upload),this.dd&&($("*",this.dd).unbind(),this.dd.remove(),delete this.dd,document.removeEventListener("dragenter",this.dd_enter),document.removeEventListener("dragleave",this.dd_leave),document.removeEventListener("drop",this.dd_drop)),$("*",this.status).unbind(),$("*",this.scroller).unbind(),$("*",this.btns).unbind(),this.status.remove(),this.scroller.remove(),this.btns.remove(),this._execSuper("destroy",a)}};ux.util.module("Upload",module);var upiframe=sfUploadIFrame;upiframe.name="iframe",upiframe.isSupported=function(){return!0};var upiframep=upiframe.prototype;upiframep.isDDSupported=function(){return!1},upiframep.create=function(){var a={id:parseInt(1e4*Math.random()),uploading:!1,files:[]},b="file"+a.id;a.file_btn=$('<input type="file" size="0" />').attr("name",b).attr("id",b).attr("title",this.mod.options.txt.select).attr("accept",this.mod.options.accept).bind("change",{me:this,upload:a},this.onAddFiles),1==this.mod.options.multiFile&&a.file_btn.attr("multiple","multiple"),a.select_btn=$('<label class="btn btn-default btn-sm sf-btn-file"/>').append(this.mod.options.txt.select).append(a.file_btn);var c="hifrm"+a.id,d="form"+a.id;a.form=$('<form method="post" enctype="multipart/form-data" />').attr("name",d).attr("id",d).attr("target",c).append(a.select_btn),a.iframe=$('<iframe name="{0}" width="0" height="0" border="0" style="width:0;height:0;border:none"/>'.sfFormat(c)).attr("id",c).bind("load",{me:this,upload:a},this.onLoad),this.mod.btns.append(a.iframe).append(a.form),this.uploads.push(a)},upiframep.onAddFiles=function(a){var b=a.data.me,c=a.data.upload,d=a.dataTransfer?a.dataTransfer.files:a.target.files;d&&"undefined"!=typeof d.length||(d=[{name:c.file_btn[0].value}]);for(var e=0;e<d.length;e++){var f=d[e];f.upload=c,c.files.push(f)}return b.mod.addFiles(d),!0},upiframep.onLoad=function(a){var b=a.data.me,c=a.data.upload;if(0!=c.uploading&&c.iframe&&c.iframe[0].parentNode){b.uploading=!1;for(var d=c.files,e=0;e<d.length;e++){var f=d[e];0==f.finished&&f.error===!1&&(f.finished=!0)}c.uploading=!1,c.form.remove();var g;if(b.mod.options.expectData){var h=c.iframe[0];try{h.contentDocument?g=h.contentDocument.body.innerHTML:h.contentWindow?g=h.contentWindow.document.body.innerHTML:h.document&&(g=h.document.body.innerHTML)}catch(i){g=undefined}}c.iframe.remove(),b.mod.onSuccess(d,g),b.mod.uploadComplete(),b.uploadFiles()}},upiframep.uploadFiles=function(){if(1!=this.uploading){if(0==this.uploads.length)return void this.mod.onFinish();var a=this.uploads.shift();this.uploading=!0,a.uploading=!0,a.form.hide(),this.mod.onUpload(a.files,function(b,c){if(0!=a.uploading){for(var d=a.files,e=0;e<d.length;e++){var f=d[e];f.uploading=!0,this.mod.updateStatus(f)}a.form.attr("action",c).submit()}}),this.create()}},upiframep.cancel=function(a){var b=a.upload;if(b&&b.uploading){b.uploading=!1,0==this.uploads.length&&(this.uploading=!1);for(var c=0;c<b.files.length;c++){var d=b.files[c];d.error=this.mod.options.txt.cancelled,this.mod.delFile(d)}if(b.iframe&&b.iframe[0].parentNode){try{b.iframe.attr("src","javascript:false;"),b.iframe.remove()}catch(e){}try{b.form.remove()}catch(e){}}this.mod.onError(b.files)}},upiframep.destroy=function(){};var upxhr=sfUploadXhr;upxhr.name="xhr",upxhr.isSupported=function(){if("undefined"==typeof XMLHttpRequest)return!1;var a=new XMLHttpRequest;return"undefined"!=typeof a.upload&&"undefined"!=typeof File&&"undefined"!=typeof FormData};var upxhrp=upxhr.prototype;upxhrp.isDDSupported=function(){return!0},upxhrp.create=function(){var a="file"+parseInt(1e4*Math.random());this.file_btn=$('<input type="file" size="0" />').attr("name",a).attr("id",a).attr("title",this.mod.options.txt.select).attr("accept",this.mod.options.accept).bind("change",{me:this},this.onAddFiles),1==this.mod.options.multiFile&&this.file_btn.attr("multiple","multiple"),this.select_btn=$('<label class="btn btn-default btn-sm sf-btn-file"/>').append(this.mod.options.txt.select).append(this.file_btn),this.mod.btns.append(this.select_btn)},upxhrp.onAddFiles=function(a){var b=a.data.me,c=a.data.upload,d=a.dataTransfer?a.dataTransfer.files:a.target.files;d&&"undefined"!=typeof d.length||(d=[{name:c.file_btn[0].value}]);for(var e=0;e<d.length;e++){var f=d[e];f.fileSize&&(f.size=f.fileSize),f.fileName&&(f.name=f.fileName)}return b.mod.addFiles(d),$(this).closest("label").remove(),b.create(),!0},upxhrp.onProgress=function(a){var b=this.file;b.progress=a.loaded,this.mod.updateStatus(b),this.mod.onProgress([b])},upxhrp.onComplete=function(){var a=this.file;if(a.uploading=!1,200==a.xhr.status){a.finished=!0;var b;if(this.mod.options.expectData)try{b=a.xhr.responseText}catch(c){b=undefined}this.mod.onSuccess([a],b)}else a.error=a.xhr.responseText,("string"!=typeof a.error||0==a.error.length)&&(a.error=this.mod.options.txt.unknown),this.mod.onError([a]);delete this.file,delete a.xhr,this.mod.updateStatus(a),this.uploading=!1,this.uploadFiles()},upxhrp.uploadFiles=function(){if(1!=this.uploading){delete this.file;var a=this.mod.getFiles({pending:!0});return a.length>0&&(this.file=a[0]),"undefined"==typeof this.file?(this.mod.updateStatus(),void this.mod.onFinish()):void this.uploadFile()}},upxhrp.uploadFile=function(){var a=this.file;"undefined"!=typeof a&&(this.uploading=!0,this.mod.onUpload([this.file],function(b,c){if(0!=this.uploading){var d=a.xhr=new XMLHttpRequest;a.uploading=!0,this.mod.updateStatus(a);var e=this;d.upload.onprogress=function(a){a.lengthComputable&&e.onProgress(a)},d.onreadystatechange=function(){4==d.readyState&&e.onComplete()},d.open("POST",c,!0);var f=new FormData;f.append(a.name,a),d.send(f)}}))},upxhrp._cancel=function(a){if("undefined"!=typeof a&&"undefined"!=typeof a.xhr){try{a.xhr.abort()}catch(b){}delete a.xhr}a.uploading=!1,a.error=this.mod.options.txt.cancelled,this.mod.onError([a])},upxhrp.cancel=function(a){a?(this._cancel(a),this.uploading=!1,this.mod.delFile(a)):this.uploading=!1;
},upxhrp.destroy=function(){this.cancel()};var upflash=sfUploadFlash;upflash.name="flash",upflash.isSupported=function(a,b,c){return ux.swfobject?ux.swfobject.hasFlashPlayerVersion("9.0"):void b.call(a,c)};var upflashp=upflash.prototype;upflashp.isDDSupported=function(){return!1},upflashp.create=function(){watchTitle.init(),this.flashid="sfUploadSwf"+parseInt(1e4*Math.random()),window[this.flashid+"self"]=this;var a=$("<div/>").attr("id",this.flashid);this.flash_wrapper=$("<div/>").css({position:"absolute",top:"0",left:"0"}).append(a),this.select_btn=$('<label class="btn btn-default btn-sm sf-btn-file"/>').append(this.mod.options.txt.select).hide(),this.mod.btns.append(this.select_btn).append(this.flash_wrapper);var b={expectData:this.mod.options.expectData,fileUploadUrl:this.mod.getUploadPath(),filterName:this.mod.options.txt.allFiles+" (*.*)",filterFileList:"*",beforeSend:this.flashid+"self.onBeforeSend",fileProgress:this.flashid+"self.onFileProgress",fileUploaded:this.flashid+"self.onFileUploaded",filesSelected:this.flashid+"self.onFilesSelected",uploadError:this.flashid+"self.onUploadError",browseButton:"0,0,200,40,0",uploadButton:"999,0,0,0,0",hoverCursor:"arrow",mouseOverBrowse:this.flashid+"self.onSelectOver",mouseOutBrowse:this.flashid+"self.onSelectOut"},c={quality:"high",allowfullscreen:"true",allowscriptaccess:"always",salign:"tl",bgcolor:"#FFFFFF",wmode:"transparent",allowNetworking:"all"},d={id:this.flashid,name:this.flashid},e=ux.config.cdn_url+"/assets/SimpleUploader.swf",f=this;ux.swfobject.embedSWF(e,this.flashid,"250","40","9.0.0",ux.config.cdn_url+"/assets/expressInstall.swf",b,c,d,function(a){f.flash_obj=a.ref,$(f.flash_obj).css({"vertical-align":"top"}),f.select_btn.css({display:""}),setTimeout(function(){f.onSelectOver()},0)})},upflashp.onSelectOver=function(){var a=this.select_btn;if(a.addClass("hover"),this.flash_obj){var b=a.position(),c=a.outerWidth(),d=a.outerHeight(),e="0,0,{0},{1},0".sfFormat(c,d);this.flash_wrapper.css(b);try{this.flash_obj.setButtonBrowseBtn(e)}catch(f){var g=this;setTimeout(function(){g.onSelectOver()},250)}}},upflashp.onSelectOut=function(){this.select_btn.removeClass("hover")},upflashp.onFilesSelected=function(a){return a=$.parseJSON(a).selectedFiles,this.mod._log("{0}.onFilesSelected.files.length={1}".sfFormat(this.flashid,a.length)),this.mod.addFiles(a),!0},upflashp.onFileProgress=function(a){a=$.parseJSON(a),this.mod._log("{0}.onFileProgress.file.progress={1}".sfFormat(this.flashid,a.progress));var b=this.file;b.progress=a.progress,this.mod.updateStatus(b),this.mod.onProgress([b])},upflashp.onFileUploaded=function(fileResponse){this.mod._log("{0}.onFileUploaded.file.fileGuid={1}".sfFormat(this.flashid,this.file.fileGuid));var f=this.file;f.uploading=!1,f.finished=!0;var response;if(this.mod.options.expectData&&fileResponse)try{response=eval("("+fileResponse+");"),response=response&&response.returnData?response.returnData:undefined}catch(e){response=undefined}this.mod.onSuccess([f],response),this.mod.updateStatus(f),this.uploading=!1,delete this.file,this.uploadFiles()},upflashp.onUploadError=function(a){this.mod._log("{0}.onUploadError.file.fileGuid={1}".sfFormat(this.flashid,this.file.fileGuid));var b=this.file;b.uploading=!1,b.error=this.mod.options.txt.unknownError.sfFormat(a.error),this.mod.onError([b]),this.mod.updateStatus(b),this.uploading=!1,delete this.file,this.uploadFiles()},upflashp.uploadFiles=function(){if(1!=this.uploading){delete this.file;var a=this.mod.getFiles({pending:!0});return a.length>0&&(this.file=a[0]),"undefined"==typeof this.file?(this.mod.updateStatus(),void this.mod.onFinish()):void this.uploadFile()}},upflashp.uploadFile=function(){var a=this.file;if("undefined"!=typeof a){this.uploading=!0;var b=this;this.mod.onUpload([this.file],function(c,d){if(0!=b.uploading){a.uploading=!0,b.mod.updateStatus(a),b.mod._log("{0}.uploadFile: id={1}, url={2}".sfFormat(b.flashid,a.fileGuid,d));try{b.flash_obj.SetConfig("fileUploadUrl",d),b.flash_obj.ContinueUpload(a.fileGuid)}catch(e){a.uploading=!1,a.error=this.mod.options.txt.error+" (ContinueUpload): "+e,this.mod._log("{0}.onError.file.fileGuid={1}, url={2}: {3}".sfFormat(b.flashid,a.fileGuid,d,a.error)),b.uploading=!1,delete b.file,b.mod.onError([a]),b.mod.updateStatus(),b.uploadFiles()}}})}},upflashp._cancel=function(a){if("undefined"!=typeof a)try{this.flash_obj.CancelFileUpload(a.fileGuid)}catch(b){}a.uploading=!1,a.error=this.mod.options.txt.cancelled,this.mod.onError([a])},upflashp.cancel=function(a){a?(this._cancel(a),this.uploading=!1,this.mod.delFile(a)):this.uploading=!1,this.mod._siblings().length||watchTitle.destroy()},upflashp.destroy=function(){this.cancel()}}(jQuery,ux.i18n),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top()),"function"==typeof h&&(h=f.bottom());var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;this.affixed!==i&&(this.unpin&&this.$element.css("top",""),this.affixed=i,this.unpin="bottom"==i?e.top-d:null,this.$element.removeClass(b.RESET).addClass("affix"+(i?"-"+i:"")),"bottom"==i&&this.$element.offset({top:document.body.offsetHeight-h-this.$element.height()}))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),"function"==typeof define&&define.amd&&(define("starfield/sf.flash",[],function(){return ux.jQuery}),define("starfield/sf.accordion",[],function(){return ux.jQuery}),define("starfield/sf.autocomplete",[],function(){return ux.jQuery}),define("starfield/sf.colorpicker",[],function(){return ux.jQuery}),define("starfield/sf.context",[],function(){return ux.jQuery}),define("starfield/sf.datagrid",[],function(){return ux.jQuery}),define("starfield/sf.datepicker",[],function(){return ux.jQuery}),define("starfield/sf.droplist",[],function(){return ux.jQuery}),define("starfield/sf.player",[],function(){return ux.jQuery}),define("starfield/sf.slider",[],function(){return ux.jQuery}),define("starfield/sf.tourguide",[],function(){return ux.jQuery}),define("starfield/sf.upload",[],function(){return ux.jQuery}));